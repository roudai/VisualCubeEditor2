{"version":3,"file":"srVisualizer.min.js","mappings":"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","sources":["webpack://sr-visualizer/webpack/universalModuleDefinition","webpack://sr-visualizer/./node_modules/svg.js/dist/svg.js","webpack://sr-visualizer/./src/colors.ts","webpack://sr-visualizer/./src/constants.ts","webpack://sr-visualizer/./src/cube/constants.ts","webpack://sr-visualizer/./src/cube/drawing.ts","webpack://sr-visualizer/./src/cube/geometry.ts","webpack://sr-visualizer/./src/cube/masking.ts","webpack://sr-visualizer/./src/cube/models/arrow.ts","webpack://sr-visualizer/./src/cube/models/sticker.ts","webpack://sr-visualizer/./src/cube/parsing/algorithm.ts","webpack://sr-visualizer/./src/cube/parsing/arrow.ts","webpack://sr-visualizer/./src/cube/parsing/color.ts","webpack://sr-visualizer/./src/cube/parsing/colorScheme.ts","webpack://sr-visualizer/./src/cube/parsing/faceletColors.ts","webpack://sr-visualizer/./src/cube/parsing/faceletDefinitions.ts","webpack://sr-visualizer/./src/cube/parsing/options.ts","webpack://sr-visualizer/./src/cube/parsing/rotation.ts","webpack://sr-visualizer/./src/cube/simulation.ts","webpack://sr-visualizer/./src/cube/stickers.ts","webpack://sr-visualizer/./src/index.ts","webpack://sr-visualizer/./src/math.ts","webpack://sr-visualizer/webpack/bootstrap","webpack://sr-visualizer/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sr-visualizer\"] = factory();\n\telse\n\t\troot[\"sr-visualizer\"] = factory();\n})(this, function() {\nreturn ","/*!\n* svg.js - A lightweight library for manipulating and animating SVG.\n* @version 2.7.1\n* https://svgdotjs.github.io/\n*\n* @copyright Wout Fierens <wout@mick-wout.com>\n* @license MIT\n*\n* BUILT: Fri Nov 30 2018 10:01:55 GMT+0100 (GMT+01:00)\n*/;\n(function(root, factory) {\r\n  /* istanbul ignore next */\r\n  if (typeof define === 'function' && define.amd) {\r\n    define(function(){\r\n      return factory(root, root.document)\r\n    })\r\n  } else if (typeof exports === 'object') {\r\n    module.exports = root.document ? factory(root, root.document) : function(w){ return factory(w, w.document) }\r\n  } else {\r\n    root.SVG = factory(root, root.document)\r\n  }\r\n}(typeof window !== \"undefined\" ? window : this, function(window, document) {\r\n\r\n// Find global reference - uses 'this' by default when available,\r\n// falls back to 'window' otherwise (for bundlers like Webpack)\r\nvar globalRef = (typeof this !== \"undefined\") ? this : window;\r\n\r\n// The main wrapping element\r\nvar SVG = globalRef.SVG = function(element) {\r\n  if (SVG.supported) {\r\n    element = new SVG.Doc(element)\r\n\r\n    if(!SVG.parser.draw)\r\n      SVG.prepare()\r\n\r\n    return element\r\n  }\r\n}\r\n\r\n// Default namespaces\r\nSVG.ns    = 'http://www.w3.org/2000/svg'\r\nSVG.xmlns = 'http://www.w3.org/2000/xmlns/'\r\nSVG.xlink = 'http://www.w3.org/1999/xlink'\r\nSVG.svgjs = 'http://svgjs.com/svgjs'\r\n\r\n// Svg support test\r\nSVG.supported = (function() {\r\n  return !! document.createElementNS &&\r\n         !! document.createElementNS(SVG.ns,'svg').createSVGRect\r\n})()\r\n\r\n// Don't bother to continue if SVG is not supported\r\nif (!SVG.supported) return false\r\n\r\n// Element id sequence\r\nSVG.did  = 1000\r\n\r\n// Get next named element id\r\nSVG.eid = function(name) {\r\n  return 'Svgjs' + capitalize(name) + (SVG.did++)\r\n}\r\n\r\n// Method for element creation\r\nSVG.create = function(name) {\r\n  // create element\r\n  var element = document.createElementNS(this.ns, name)\r\n\r\n  // apply unique id\r\n  element.setAttribute('id', this.eid(name))\r\n\r\n  return element\r\n}\r\n\r\n// Method for extending objects\r\nSVG.extend = function() {\r\n  var modules, methods, key, i\r\n\r\n  // Get list of modules\r\n  modules = [].slice.call(arguments)\r\n\r\n  // Get object with extensions\r\n  methods = modules.pop()\r\n\r\n  for (i = modules.length - 1; i >= 0; i--)\r\n    if (modules[i])\r\n      for (key in methods)\r\n        modules[i].prototype[key] = methods[key]\r\n\r\n  // Make sure SVG.Set inherits any newly added methods\r\n  if (SVG.Set && SVG.Set.inherit)\r\n    SVG.Set.inherit()\r\n}\r\n\r\n// Invent new element\r\nSVG.invent = function(config) {\r\n  // Create element initializer\r\n  var initializer = typeof config.create == 'function' ?\r\n    config.create :\r\n    function() {\r\n      this.constructor.call(this, SVG.create(config.create))\r\n    }\r\n\r\n  // Inherit prototype\r\n  if (config.inherit)\r\n    initializer.prototype = new config.inherit\r\n\r\n  // Extend with methods\r\n  if (config.extend)\r\n    SVG.extend(initializer, config.extend)\r\n\r\n  // Attach construct method to parent\r\n  if (config.construct)\r\n    SVG.extend(config.parent || SVG.Container, config.construct)\r\n\r\n  return initializer\r\n}\r\n\r\n// Adopt existing svg elements\r\nSVG.adopt = function(node) {\r\n  // check for presence of node\r\n  if (!node) return null\r\n\r\n  // make sure a node isn't already adopted\r\n  if (node.instance) return node.instance\r\n\r\n  // initialize variables\r\n  var element\r\n\r\n  // adopt with element-specific settings\r\n  if (node.nodeName == 'svg')\r\n    element = node.parentNode instanceof window.SVGElement ? new SVG.Nested : new SVG.Doc\r\n  else if (node.nodeName == 'linearGradient')\r\n    element = new SVG.Gradient('linear')\r\n  else if (node.nodeName == 'radialGradient')\r\n    element = new SVG.Gradient('radial')\r\n  else if (SVG[capitalize(node.nodeName)])\r\n    element = new SVG[capitalize(node.nodeName)]\r\n  else\r\n    element = new SVG.Element(node)\r\n\r\n  // ensure references\r\n  element.type  = node.nodeName\r\n  element.node  = node\r\n  node.instance = element\r\n\r\n  // SVG.Class specific preparations\r\n  if (element instanceof SVG.Doc)\r\n    element.namespace().defs()\r\n\r\n  // pull svgjs data from the dom (getAttributeNS doesn't work in html5)\r\n  element.setData(JSON.parse(node.getAttribute('svgjs:data')) || {})\r\n\r\n  return element\r\n}\r\n\r\n// Initialize parsing element\r\nSVG.prepare = function() {\r\n  // Select document body and create invisible svg element\r\n  var body = document.getElementsByTagName('body')[0]\r\n    , draw = (body ? new SVG.Doc(body) : SVG.adopt(document.documentElement).nested()).size(2, 0)\r\n\r\n  // Create parser object\r\n  SVG.parser = {\r\n    body: body || document.documentElement\r\n  , draw: draw.style('opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden').attr('focusable', 'false').node\r\n  , poly: draw.polyline().node\r\n  , path: draw.path().node\r\n  , native: SVG.create('svg')\r\n  }\r\n}\r\n\r\nSVG.parser = {\r\n  native: SVG.create('svg')\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  if(!SVG.parser.draw)\r\n    SVG.prepare()\r\n}, false)\r\n\n// Storage for regular expressions\r\nSVG.regex = {\r\n  // Parse unit value\r\n  numberAndUnit:    /^([+-]?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?)([a-z%]*)$/i\r\n\r\n  // Parse hex value\r\n, hex:              /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i\r\n\r\n  // Parse rgb value\r\n, rgb:              /rgb\\((\\d+),(\\d+),(\\d+)\\)/\r\n\r\n  // Parse reference id\r\n, reference:        /#([a-z0-9\\-_]+)/i\r\n\r\n  // splits a transformation chain\r\n, transforms:       /\\)\\s*,?\\s*/\r\n\r\n  // Whitespace\r\n, whitespace:       /\\s/g\r\n\r\n  // Test hex value\r\n, isHex:            /^#[a-f0-9]{3,6}$/i\r\n\r\n  // Test rgb value\r\n, isRgb:            /^rgb\\(/\r\n\r\n  // Test css declaration\r\n, isCss:            /[^:]+:[^;]+;?/\r\n\r\n  // Test for blank string\r\n, isBlank:          /^(\\s+)?$/\r\n\r\n  // Test for numeric string\r\n, isNumber:         /^[+-]?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i\r\n\r\n  // Test for percent value\r\n, isPercent:        /^-?[\\d\\.]+%$/\r\n\r\n  // Test for image url\r\n, isImage:          /\\.(jpg|jpeg|png|gif|svg)(\\?[^=]+.*)?/i\r\n\r\n  // split at whitespace and comma\r\n, delimiter:        /[\\s,]+/\r\n\r\n  // The following regex are used to parse the d attribute of a path\r\n\r\n  // Matches all hyphens which are not after an exponent\r\n, hyphen:           /([^e])\\-/gi\r\n\r\n  // Replaces and tests for all path letters\r\n, pathLetters:      /[MLHVCSQTAZ]/gi\r\n\r\n  // yes we need this one, too\r\n, isPathLetter:     /[MLHVCSQTAZ]/i\r\n\r\n  // matches 0.154.23.45\r\n, numbersWithDots:  /((\\d?\\.\\d+(?:e[+-]?\\d+)?)((?:\\.\\d+(?:e[+-]?\\d+)?)+))+/gi\r\n\r\n  // matches .\r\n, dots:             /\\./g\r\n}\r\n\nSVG.utils = {\r\n  // Map function\r\n  map: function(array, block) {\r\n    var i\r\n      , il = array.length\r\n      , result = []\r\n\r\n    for (i = 0; i < il; i++)\r\n      result.push(block(array[i]))\r\n\r\n    return result\r\n  }\r\n\r\n  // Filter function\r\n, filter: function(array, block) {\r\n    var i\r\n      , il = array.length\r\n      , result = []\r\n\r\n    for (i = 0; i < il; i++)\r\n      if (block(array[i]))\r\n        result.push(array[i])\r\n\r\n    return result\r\n  }\r\n\r\n  // Degrees to radians\r\n, radians: function(d) {\r\n    return d % 360 * Math.PI / 180\r\n  }\r\n\r\n  // Radians to degrees\r\n, degrees: function(r) {\r\n    return r * 180 / Math.PI % 360\r\n  }\r\n\r\n, filterSVGElements: function(nodes) {\r\n    return this.filter( nodes, function(el) { return el instanceof window.SVGElement })\r\n  }\r\n\r\n}\n\r\nSVG.defaults = {\r\n  // Default attribute values\r\n  attrs: {\r\n    // fill and stroke\r\n    'fill-opacity':     1\r\n  , 'stroke-opacity':   1\r\n  , 'stroke-width':     0\r\n  , 'stroke-linejoin':  'miter'\r\n  , 'stroke-linecap':   'butt'\r\n  , fill:               '#000000'\r\n  , stroke:             '#000000'\r\n  , opacity:            1\r\n    // position\r\n  , x:                  0\r\n  , y:                  0\r\n  , cx:                 0\r\n  , cy:                 0\r\n    // size\r\n  , width:              0\r\n  , height:             0\r\n    // radius\r\n  , r:                  0\r\n  , rx:                 0\r\n  , ry:                 0\r\n    // gradient\r\n  , offset:             0\r\n  , 'stop-opacity':     1\r\n  , 'stop-color':       '#000000'\r\n    // text\r\n  , 'font-size':        16\r\n  , 'font-family':      'Helvetica, Arial, sans-serif'\r\n  , 'text-anchor':      'start'\r\n  }\r\n\r\n}\n// Module for color convertions\r\nSVG.Color = function(color) {\r\n  var match\r\n\r\n  // initialize defaults\r\n  this.r = 0\r\n  this.g = 0\r\n  this.b = 0\r\n\r\n  if(!color) return\r\n\r\n  // parse color\r\n  if (typeof color === 'string') {\r\n    if (SVG.regex.isRgb.test(color)) {\r\n      // get rgb values\r\n      match = SVG.regex.rgb.exec(color.replace(SVG.regex.whitespace,''))\r\n\r\n      // parse numeric values\r\n      this.r = parseInt(match[1])\r\n      this.g = parseInt(match[2])\r\n      this.b = parseInt(match[3])\r\n\r\n    } else if (SVG.regex.isHex.test(color)) {\r\n      // get hex values\r\n      match = SVG.regex.hex.exec(fullHex(color))\r\n\r\n      // parse numeric values\r\n      this.r = parseInt(match[1], 16)\r\n      this.g = parseInt(match[2], 16)\r\n      this.b = parseInt(match[3], 16)\r\n\r\n    }\r\n\r\n  } else if (typeof color === 'object') {\r\n    this.r = color.r\r\n    this.g = color.g\r\n    this.b = color.b\r\n\r\n  }\r\n\r\n}\r\n\r\nSVG.extend(SVG.Color, {\r\n  // Default to hex conversion\r\n  toString: function() {\r\n    return this.toHex()\r\n  }\r\n  // Build hex value\r\n, toHex: function() {\r\n    return '#'\r\n      + compToHex(this.r)\r\n      + compToHex(this.g)\r\n      + compToHex(this.b)\r\n  }\r\n  // Build rgb value\r\n, toRgb: function() {\r\n    return 'rgb(' + [this.r, this.g, this.b].join() + ')'\r\n  }\r\n  // Calculate true brightness\r\n, brightness: function() {\r\n    return (this.r / 255 * 0.30)\r\n         + (this.g / 255 * 0.59)\r\n         + (this.b / 255 * 0.11)\r\n  }\r\n  // Make color morphable\r\n, morph: function(color) {\r\n    this.destination = new SVG.Color(color)\r\n\r\n    return this\r\n  }\r\n  // Get morphed color at given position\r\n, at: function(pos) {\r\n    // make sure a destination is defined\r\n    if (!this.destination) return this\r\n\r\n    // normalise pos\r\n    pos = pos < 0 ? 0 : pos > 1 ? 1 : pos\r\n\r\n    // generate morphed color\r\n    return new SVG.Color({\r\n      r: ~~(this.r + (this.destination.r - this.r) * pos)\r\n    , g: ~~(this.g + (this.destination.g - this.g) * pos)\r\n    , b: ~~(this.b + (this.destination.b - this.b) * pos)\r\n    })\r\n  }\r\n\r\n})\r\n\r\n// Testers\r\n\r\n// Test if given value is a color string\r\nSVG.Color.test = function(color) {\r\n  color += ''\r\n  return SVG.regex.isHex.test(color)\r\n      || SVG.regex.isRgb.test(color)\r\n}\r\n\r\n// Test if given value is a rgb object\r\nSVG.Color.isRgb = function(color) {\r\n  return color && typeof color.r == 'number'\r\n               && typeof color.g == 'number'\r\n               && typeof color.b == 'number'\r\n}\r\n\r\n// Test if given value is a color\r\nSVG.Color.isColor = function(color) {\r\n  return SVG.Color.isRgb(color) || SVG.Color.test(color)\r\n}\n// Module for array conversion\r\nSVG.Array = function(array, fallback) {\r\n  array = (array || []).valueOf()\r\n\r\n  // if array is empty and fallback is provided, use fallback\r\n  if (array.length == 0 && fallback)\r\n    array = fallback.valueOf()\r\n\r\n  // parse array\r\n  this.value = this.parse(array)\r\n}\r\n\r\nSVG.extend(SVG.Array, {\r\n  // Make array morphable\r\n  morph: function(array) {\r\n    this.destination = this.parse(array)\r\n\r\n    // normalize length of arrays\r\n    if (this.value.length != this.destination.length) {\r\n      var lastValue       = this.value[this.value.length - 1]\r\n        , lastDestination = this.destination[this.destination.length - 1]\r\n\r\n      while(this.value.length > this.destination.length)\r\n        this.destination.push(lastDestination)\r\n      while(this.value.length < this.destination.length)\r\n        this.value.push(lastValue)\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Clean up any duplicate points\r\n, settle: function() {\r\n    // find all unique values\r\n    for (var i = 0, il = this.value.length, seen = []; i < il; i++)\r\n      if (seen.indexOf(this.value[i]) == -1)\r\n        seen.push(this.value[i])\r\n\r\n    // set new value\r\n    return this.value = seen\r\n  }\r\n  // Get morphed array at given position\r\n, at: function(pos) {\r\n    // make sure a destination is defined\r\n    if (!this.destination) return this\r\n\r\n    // generate morphed array\r\n    for (var i = 0, il = this.value.length, array = []; i < il; i++)\r\n      array.push(this.value[i] + (this.destination[i] - this.value[i]) * pos)\r\n\r\n    return new SVG.Array(array)\r\n  }\r\n  // Convert array to string\r\n, toString: function() {\r\n    return this.value.join(' ')\r\n  }\r\n  // Real value\r\n, valueOf: function() {\r\n    return this.value\r\n  }\r\n  // Parse whitespace separated string\r\n, parse: function(array) {\r\n    array = array.valueOf()\r\n\r\n    // if already is an array, no need to parse it\r\n    if (Array.isArray(array)) return array\r\n\r\n    return this.split(array)\r\n  }\r\n  // Strip unnecessary whitespace\r\n, split: function(string) {\r\n    return string.trim().split(SVG.regex.delimiter).map(parseFloat)\r\n  }\r\n  // Reverse array\r\n, reverse: function() {\r\n    this.value.reverse()\r\n\r\n    return this\r\n  }\r\n, clone: function() {\r\n    var clone = new this.constructor()\r\n    clone.value = array_clone(this.value)\r\n    return clone\r\n  }\r\n})\n// Poly points array\r\nSVG.PointArray = function(array, fallback) {\r\n  SVG.Array.call(this, array, fallback || [[0,0]])\r\n}\r\n\r\n// Inherit from SVG.Array\r\nSVG.PointArray.prototype = new SVG.Array\r\nSVG.PointArray.prototype.constructor = SVG.PointArray\r\n\r\nSVG.extend(SVG.PointArray, {\r\n  // Convert array to string\r\n  toString: function() {\r\n    // convert to a poly point string\r\n    for (var i = 0, il = this.value.length, array = []; i < il; i++)\r\n      array.push(this.value[i].join(','))\r\n\r\n    return array.join(' ')\r\n  }\r\n  // Convert array to line object\r\n, toLine: function() {\r\n    return {\r\n      x1: this.value[0][0]\r\n    , y1: this.value[0][1]\r\n    , x2: this.value[1][0]\r\n    , y2: this.value[1][1]\r\n    }\r\n  }\r\n  // Get morphed array at given position\r\n, at: function(pos) {\r\n    // make sure a destination is defined\r\n    if (!this.destination) return this\r\n\r\n    // generate morphed point string\r\n    for (var i = 0, il = this.value.length, array = []; i < il; i++)\r\n      array.push([\r\n        this.value[i][0] + (this.destination[i][0] - this.value[i][0]) * pos\r\n      , this.value[i][1] + (this.destination[i][1] - this.value[i][1]) * pos\r\n      ])\r\n\r\n    return new SVG.PointArray(array)\r\n  }\r\n  // Parse point string and flat array\r\n, parse: function(array) {\r\n    var points = []\r\n\r\n    array = array.valueOf()\r\n\r\n    // if it is an array\r\n    if (Array.isArray(array)) {\r\n      // and it is not flat, there is no need to parse it\r\n      if(Array.isArray(array[0])) {\r\n        // make sure to use a clone\r\n        return array.map(function (el) { return el.slice() })\r\n      } else if (array[0].x != null){\r\n        // allow point objects to be passed\r\n        return array.map(function (el) { return [el.x, el.y] })\r\n      }\r\n    } else { // Else, it is considered as a string\r\n      // parse points\r\n      array = array.trim().split(SVG.regex.delimiter).map(parseFloat)\r\n    }\r\n\r\n    // validate points - https://svgwg.org/svg2-draft/shapes.html#DataTypePoints\r\n    // Odd number of coordinates is an error. In such cases, drop the last odd coordinate.\r\n    if (array.length % 2 !== 0) array.pop()\r\n\r\n    // wrap points in two-tuples and parse points as floats\r\n    for(var i = 0, len = array.length; i < len; i = i + 2)\r\n      points.push([ array[i], array[i+1] ])\r\n\r\n    return points\r\n  }\r\n  // Move point string\r\n, move: function(x, y) {\r\n    var box = this.bbox()\r\n\r\n    // get relative offset\r\n    x -= box.x\r\n    y -= box.y\r\n\r\n    // move every point\r\n    if (!isNaN(x) && !isNaN(y))\r\n      for (var i = this.value.length - 1; i >= 0; i--)\r\n        this.value[i] = [this.value[i][0] + x, this.value[i][1] + y]\r\n\r\n    return this\r\n  }\r\n  // Resize poly string\r\n, size: function(width, height) {\r\n    var i, box = this.bbox()\r\n\r\n    // recalculate position of all points according to new size\r\n    for (i = this.value.length - 1; i >= 0; i--) {\r\n      if(box.width) this.value[i][0] = ((this.value[i][0] - box.x) * width)  / box.width  + box.x\r\n      if(box.height) this.value[i][1] = ((this.value[i][1] - box.y) * height) / box.height + box.y\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Get bounding box of points\r\n, bbox: function() {\r\n    SVG.parser.poly.setAttribute('points', this.toString())\r\n\r\n    return SVG.parser.poly.getBBox()\r\n  }\r\n})\r\n\nvar pathHandlers = {\r\n  M: function(c, p, p0) {\r\n    p.x = p0.x = c[0]\r\n    p.y = p0.y = c[1]\r\n\r\n    return ['M', p.x, p.y]\r\n  },\r\n  L: function(c, p) {\r\n    p.x = c[0]\r\n    p.y = c[1]\r\n    return ['L', c[0], c[1]]\r\n  },\r\n  H: function(c, p) {\r\n    p.x = c[0]\r\n    return ['H', c[0]]\r\n  },\r\n  V: function(c, p) {\r\n    p.y = c[0]\r\n    return ['V', c[0]]\r\n  },\r\n  C: function(c, p) {\r\n    p.x = c[4]\r\n    p.y = c[5]\r\n    return ['C', c[0], c[1], c[2], c[3], c[4], c[5]]\r\n  },\r\n  S: function(c, p) {\r\n    p.x = c[2]\r\n    p.y = c[3]\r\n    return ['S', c[0], c[1], c[2], c[3]]\r\n  },\r\n  Q: function(c, p) {\r\n    p.x = c[2]\r\n    p.y = c[3]\r\n    return ['Q', c[0], c[1], c[2], c[3]]\r\n  },\r\n  T: function(c, p) {\r\n    p.x = c[0]\r\n    p.y = c[1]\r\n    return ['T', c[0], c[1]]\r\n  },\r\n  Z: function(c, p, p0) {\r\n    p.x = p0.x\r\n    p.y = p0.y\r\n    return ['Z']\r\n  },\r\n  A: function(c, p) {\r\n    p.x = c[5]\r\n    p.y = c[6]\r\n    return ['A', c[0], c[1], c[2], c[3], c[4], c[5], c[6]]\r\n  }\r\n}\r\n\r\nvar mlhvqtcsa = 'mlhvqtcsaz'.split('')\r\n\r\nfor(var i = 0, il = mlhvqtcsa.length; i < il; ++i){\r\n  pathHandlers[mlhvqtcsa[i]] = (function(i){\r\n    return function(c, p, p0) {\r\n      if(i == 'H') c[0] = c[0] + p.x\r\n      else if(i == 'V') c[0] = c[0] + p.y\r\n      else if(i == 'A'){\r\n        c[5] = c[5] + p.x,\r\n        c[6] = c[6] + p.y\r\n      }\r\n      else\r\n        for(var j = 0, jl = c.length; j < jl; ++j) {\r\n          c[j] = c[j] + (j%2 ? p.y : p.x)\r\n        }\r\n\r\n      return pathHandlers[i](c, p, p0)\r\n    }\r\n  })(mlhvqtcsa[i].toUpperCase())\r\n}\r\n\r\n// Path points array\r\nSVG.PathArray = function(array, fallback) {\r\n  SVG.Array.call(this, array, fallback || [['M', 0, 0]])\r\n}\r\n\r\n// Inherit from SVG.Array\r\nSVG.PathArray.prototype = new SVG.Array\r\nSVG.PathArray.prototype.constructor = SVG.PathArray\r\n\r\nSVG.extend(SVG.PathArray, {\r\n  // Convert array to string\r\n  toString: function() {\r\n    return arrayToString(this.value)\r\n  }\r\n  // Move path string\r\n, move: function(x, y) {\r\n    // get bounding box of current situation\r\n    var box = this.bbox()\r\n\r\n    // get relative offset\r\n    x -= box.x\r\n    y -= box.y\r\n\r\n    if (!isNaN(x) && !isNaN(y)) {\r\n      // move every point\r\n      for (var l, i = this.value.length - 1; i >= 0; i--) {\r\n        l = this.value[i][0]\r\n\r\n        if (l == 'M' || l == 'L' || l == 'T')  {\r\n          this.value[i][1] += x\r\n          this.value[i][2] += y\r\n\r\n        } else if (l == 'H')  {\r\n          this.value[i][1] += x\r\n\r\n        } else if (l == 'V')  {\r\n          this.value[i][1] += y\r\n\r\n        } else if (l == 'C' || l == 'S' || l == 'Q')  {\r\n          this.value[i][1] += x\r\n          this.value[i][2] += y\r\n          this.value[i][3] += x\r\n          this.value[i][4] += y\r\n\r\n          if (l == 'C')  {\r\n            this.value[i][5] += x\r\n            this.value[i][6] += y\r\n          }\r\n\r\n        } else if (l == 'A')  {\r\n          this.value[i][6] += x\r\n          this.value[i][7] += y\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Resize path string\r\n, size: function(width, height) {\r\n    // get bounding box of current situation\r\n    var i, l, box = this.bbox()\r\n\r\n    // recalculate position of all points according to new size\r\n    for (i = this.value.length - 1; i >= 0; i--) {\r\n      l = this.value[i][0]\r\n\r\n      if (l == 'M' || l == 'L' || l == 'T')  {\r\n        this.value[i][1] = ((this.value[i][1] - box.x) * width)  / box.width  + box.x\r\n        this.value[i][2] = ((this.value[i][2] - box.y) * height) / box.height + box.y\r\n\r\n      } else if (l == 'H')  {\r\n        this.value[i][1] = ((this.value[i][1] - box.x) * width)  / box.width  + box.x\r\n\r\n      } else if (l == 'V')  {\r\n        this.value[i][1] = ((this.value[i][1] - box.y) * height) / box.height + box.y\r\n\r\n      } else if (l == 'C' || l == 'S' || l == 'Q')  {\r\n        this.value[i][1] = ((this.value[i][1] - box.x) * width)  / box.width  + box.x\r\n        this.value[i][2] = ((this.value[i][2] - box.y) * height) / box.height + box.y\r\n        this.value[i][3] = ((this.value[i][3] - box.x) * width)  / box.width  + box.x\r\n        this.value[i][4] = ((this.value[i][4] - box.y) * height) / box.height + box.y\r\n\r\n        if (l == 'C')  {\r\n          this.value[i][5] = ((this.value[i][5] - box.x) * width)  / box.width  + box.x\r\n          this.value[i][6] = ((this.value[i][6] - box.y) * height) / box.height + box.y\r\n        }\r\n\r\n      } else if (l == 'A')  {\r\n        // resize radii\r\n        this.value[i][1] = (this.value[i][1] * width)  / box.width\r\n        this.value[i][2] = (this.value[i][2] * height) / box.height\r\n\r\n        // move position values\r\n        this.value[i][6] = ((this.value[i][6] - box.x) * width)  / box.width  + box.x\r\n        this.value[i][7] = ((this.value[i][7] - box.y) * height) / box.height + box.y\r\n      }\r\n\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Test if the passed path array use the same path data commands as this path array\r\n, equalCommands: function(pathArray) {\r\n    var i, il, equalCommands\r\n\r\n    pathArray = new SVG.PathArray(pathArray)\r\n\r\n    equalCommands = this.value.length === pathArray.value.length\r\n    for(i = 0, il = this.value.length; equalCommands && i < il; i++) {\r\n      equalCommands = this.value[i][0] === pathArray.value[i][0]\r\n    }\r\n\r\n    return equalCommands\r\n  }\r\n  // Make path array morphable\r\n, morph: function(pathArray) {\r\n    pathArray = new SVG.PathArray(pathArray)\r\n\r\n    if(this.equalCommands(pathArray)) {\r\n      this.destination = pathArray\r\n    } else {\r\n      this.destination = null\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Get morphed path array at given position\r\n, at: function(pos) {\r\n    // make sure a destination is defined\r\n    if (!this.destination) return this\r\n\r\n    var sourceArray = this.value\r\n      , destinationArray = this.destination.value\r\n      , array = [], pathArray = new SVG.PathArray()\r\n      , i, il, j, jl\r\n\r\n    // Animate has specified in the SVG spec\r\n    // See: https://www.w3.org/TR/SVG11/paths.html#PathElement\r\n    for (i = 0, il = sourceArray.length; i < il; i++) {\r\n      array[i] = [sourceArray[i][0]]\r\n      for(j = 1, jl = sourceArray[i].length; j < jl; j++) {\r\n        array[i][j] = sourceArray[i][j] + (destinationArray[i][j] - sourceArray[i][j]) * pos\r\n      }\r\n      // For the two flags of the elliptical arc command, the SVG spec say:\r\n      // Flags and booleans are interpolated as fractions between zero and one, with any non-zero value considered to be a value of one/true\r\n      // Elliptical arc command as an array followed by corresponding indexes:\r\n      // ['A', rx, ry, x-axis-rotation, large-arc-flag, sweep-flag, x, y]\r\n      //   0    1   2        3                 4             5      6  7\r\n      if(array[i][0] === 'A') {\r\n        array[i][4] = +(array[i][4] != 0)\r\n        array[i][5] = +(array[i][5] != 0)\r\n      }\r\n    }\r\n\r\n    // Directly modify the value of a path array, this is done this way for performance\r\n    pathArray.value = array\r\n    return pathArray\r\n  }\r\n  // Absolutize and parse path to array\r\n, parse: function(array) {\r\n    // if it's already a patharray, no need to parse it\r\n    if (array instanceof SVG.PathArray) return array.valueOf()\r\n\r\n    // prepare for parsing\r\n    var i, x0, y0, s, seg, arr\r\n      , x = 0\r\n      , y = 0\r\n      , paramCnt = { 'M':2, 'L':2, 'H':1, 'V':1, 'C':6, 'S':4, 'Q':4, 'T':2, 'A':7, 'Z':0 }\r\n\r\n    if(typeof array == 'string'){\r\n\r\n      array = array\r\n        .replace(SVG.regex.numbersWithDots, pathRegReplace) // convert 45.123.123 to 45.123 .123\r\n        .replace(SVG.regex.pathLetters, ' $& ') // put some room between letters and numbers\r\n        .replace(SVG.regex.hyphen, '$1 -')      // add space before hyphen\r\n        .trim()                                 // trim\r\n        .split(SVG.regex.delimiter)   // split into array\r\n\r\n    }else{\r\n      array = array.reduce(function(prev, curr){\r\n        return [].concat.call(prev, curr)\r\n      }, [])\r\n    }\r\n\r\n    // array now is an array containing all parts of a path e.g. ['M', '0', '0', 'L', '30', '30' ...]\r\n    var arr = []\r\n      , p = new SVG.Point()\r\n      , p0 = new SVG.Point()\r\n      , index = 0\r\n      , len = array.length\r\n\r\n    do{\r\n      // Test if we have a path letter\r\n      if(SVG.regex.isPathLetter.test(array[index])){\r\n        s = array[index]\r\n        ++index\r\n      // If last letter was a move command and we got no new, it defaults to [L]ine\r\n      }else if(s == 'M'){\r\n        s = 'L'\r\n      }else if(s == 'm'){\r\n        s = 'l'\r\n      }\r\n\r\n      arr.push(pathHandlers[s].call(null,\r\n          array.slice(index, (index = index + paramCnt[s.toUpperCase()])).map(parseFloat),\r\n          p, p0\r\n        )\r\n      )\r\n\r\n    }while(len > index)\r\n\r\n    return arr\r\n\r\n  }\r\n  // Get bounding box of path\r\n, bbox: function() {\r\n    SVG.parser.path.setAttribute('d', this.toString())\r\n\r\n    return SVG.parser.path.getBBox()\r\n  }\r\n\r\n})\r\n\n// Module for unit convertions\r\nSVG.Number = SVG.invent({\r\n  // Initialize\r\n  create: function(value, unit) {\r\n    // initialize defaults\r\n    this.value = 0\r\n    this.unit  = unit || ''\r\n\r\n    // parse value\r\n    if (typeof value === 'number') {\r\n      // ensure a valid numeric value\r\n      this.value = isNaN(value) ? 0 : !isFinite(value) ? (value < 0 ? -3.4e+38 : +3.4e+38) : value\r\n\r\n    } else if (typeof value === 'string') {\r\n      unit = value.match(SVG.regex.numberAndUnit)\r\n\r\n      if (unit) {\r\n        // make value numeric\r\n        this.value = parseFloat(unit[1])\r\n\r\n        // normalize\r\n        if (unit[5] == '%')\r\n          this.value /= 100\r\n        else if (unit[5] == 's')\r\n          this.value *= 1000\r\n\r\n        // store unit\r\n        this.unit = unit[5]\r\n      }\r\n\r\n    } else {\r\n      if (value instanceof SVG.Number) {\r\n        this.value = value.valueOf()\r\n        this.unit  = value.unit\r\n      }\r\n    }\r\n\r\n  }\r\n  // Add methods\r\n, extend: {\r\n    // Stringalize\r\n    toString: function() {\r\n      return (\r\n        this.unit == '%' ?\r\n          ~~(this.value * 1e8) / 1e6:\r\n        this.unit == 's' ?\r\n          this.value / 1e3 :\r\n          this.value\r\n      ) + this.unit\r\n    }\r\n  , toJSON: function() {\r\n      return this.toString()\r\n    }\r\n  , // Convert to primitive\r\n    valueOf: function() {\r\n      return this.value\r\n    }\r\n    // Add number\r\n  , plus: function(number) {\r\n      number = new SVG.Number(number)\r\n      return new SVG.Number(this + number, this.unit || number.unit)\r\n    }\r\n    // Subtract number\r\n  , minus: function(number) {\r\n      number = new SVG.Number(number)\r\n      return new SVG.Number(this - number, this.unit || number.unit)\r\n    }\r\n    // Multiply number\r\n  , times: function(number) {\r\n      number = new SVG.Number(number)\r\n      return new SVG.Number(this * number, this.unit || number.unit)\r\n    }\r\n    // Divide number\r\n  , divide: function(number) {\r\n      number = new SVG.Number(number)\r\n      return new SVG.Number(this / number, this.unit || number.unit)\r\n    }\r\n    // Convert to different unit\r\n  , to: function(unit) {\r\n      var number = new SVG.Number(this)\r\n\r\n      if (typeof unit === 'string')\r\n        number.unit = unit\r\n\r\n      return number\r\n    }\r\n    // Make number morphable\r\n  , morph: function(number) {\r\n      this.destination = new SVG.Number(number)\r\n\r\n      if(number.relative) {\r\n        this.destination.value += this.value\r\n      }\r\n\r\n      return this\r\n    }\r\n    // Get morphed number at given position\r\n  , at: function(pos) {\r\n      // Make sure a destination is defined\r\n      if (!this.destination) return this\r\n\r\n      // Generate new morphed number\r\n      return new SVG.Number(this.destination)\r\n          .minus(this)\r\n          .times(pos)\r\n          .plus(this)\r\n    }\r\n\r\n  }\r\n})\r\n\n\r\nSVG.Element = SVG.invent({\r\n  // Initialize node\r\n  create: function(node) {\r\n    // make stroke value accessible dynamically\r\n    this._stroke = SVG.defaults.attrs.stroke\r\n    this._event = null\r\n    this._events = {}\r\n\r\n    // initialize data object\r\n    this.dom = {}\r\n\r\n    // create circular reference\r\n    if (this.node = node) {\r\n      this.type = node.nodeName\r\n      this.node.instance = this\r\n      this._events = node._events || {}\r\n\r\n      // store current attribute value\r\n      this._stroke = node.getAttribute('stroke') || this._stroke\r\n    }\r\n  }\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Move over x-axis\r\n    x: function(x) {\r\n      return this.attr('x', x)\r\n    }\r\n    // Move over y-axis\r\n  , y: function(y) {\r\n      return this.attr('y', y)\r\n    }\r\n    // Move by center over x-axis\r\n  , cx: function(x) {\r\n      return x == null ? this.x() + this.width() / 2 : this.x(x - this.width() / 2)\r\n    }\r\n    // Move by center over y-axis\r\n  , cy: function(y) {\r\n      return y == null ? this.y() + this.height() / 2 : this.y(y - this.height() / 2)\r\n    }\r\n    // Move element to given x and y values\r\n  , move: function(x, y) {\r\n      return this.x(x).y(y)\r\n    }\r\n    // Move element by its center\r\n  , center: function(x, y) {\r\n      return this.cx(x).cy(y)\r\n    }\r\n    // Set width of element\r\n  , width: function(width) {\r\n      return this.attr('width', width)\r\n    }\r\n    // Set height of element\r\n  , height: function(height) {\r\n      return this.attr('height', height)\r\n    }\r\n    // Set element size to given width and height\r\n  , size: function(width, height) {\r\n      var p = proportionalSize(this, width, height)\r\n\r\n      return this\r\n        .width(new SVG.Number(p.width))\r\n        .height(new SVG.Number(p.height))\r\n    }\r\n    // Clone element\r\n  , clone: function(parent) {\r\n      // write dom data to the dom so the clone can pickup the data\r\n      this.writeDataToDom()\r\n\r\n      // clone element and assign new id\r\n      var clone = assignNewId(this.node.cloneNode(true))\r\n\r\n      // insert the clone in the given parent or after myself\r\n      if(parent) parent.add(clone)\r\n      else this.after(clone)\r\n\r\n      return clone\r\n    }\r\n    // Remove element\r\n  , remove: function() {\r\n      if (this.parent())\r\n        this.parent().removeElement(this)\r\n\r\n      return this\r\n    }\r\n    // Replace element\r\n  , replace: function(element) {\r\n      this.after(element).remove()\r\n\r\n      return element\r\n    }\r\n    // Add element to given container and return self\r\n  , addTo: function(parent) {\r\n      return parent.put(this)\r\n    }\r\n    // Add element to given container and return container\r\n  , putIn: function(parent) {\r\n      return parent.add(this)\r\n    }\r\n    // Get / set id\r\n  , id: function(id) {\r\n      return this.attr('id', id)\r\n    }\r\n    // Checks whether the given point inside the bounding box of the element\r\n  , inside: function(x, y) {\r\n      var box = this.bbox()\r\n\r\n      return x > box.x\r\n          && y > box.y\r\n          && x < box.x + box.width\r\n          && y < box.y + box.height\r\n    }\r\n    // Show element\r\n  , show: function() {\r\n      return this.style('display', '')\r\n    }\r\n    // Hide element\r\n  , hide: function() {\r\n      return this.style('display', 'none')\r\n    }\r\n    // Is element visible?\r\n  , visible: function() {\r\n      return this.style('display') != 'none'\r\n    }\r\n    // Return id on string conversion\r\n  , toString: function() {\r\n      return this.attr('id')\r\n    }\r\n    // Return array of classes on the node\r\n  , classes: function() {\r\n      var attr = this.attr('class')\r\n\r\n      return attr == null ? [] : attr.trim().split(SVG.regex.delimiter)\r\n    }\r\n    // Return true if class exists on the node, false otherwise\r\n  , hasClass: function(name) {\r\n      return this.classes().indexOf(name) != -1\r\n    }\r\n    // Add class to the node\r\n  , addClass: function(name) {\r\n      if (!this.hasClass(name)) {\r\n        var array = this.classes()\r\n        array.push(name)\r\n        this.attr('class', array.join(' '))\r\n      }\r\n\r\n      return this\r\n    }\r\n    // Remove class from the node\r\n  , removeClass: function(name) {\r\n      if (this.hasClass(name)) {\r\n        this.attr('class', this.classes().filter(function(c) {\r\n          return c != name\r\n        }).join(' '))\r\n      }\r\n\r\n      return this\r\n    }\r\n    // Toggle the presence of a class on the node\r\n  , toggleClass: function(name) {\r\n      return this.hasClass(name) ? this.removeClass(name) : this.addClass(name)\r\n    }\r\n    // Get referenced element form attribute value\r\n  , reference: function(attr) {\r\n      return SVG.get(this.attr(attr))\r\n    }\r\n    // Returns the parent element instance\r\n  , parent: function(type) {\r\n      var parent = this\r\n\r\n      // check for parent\r\n      if(!parent.node.parentNode) return null\r\n\r\n      // get parent element\r\n      parent = SVG.adopt(parent.node.parentNode)\r\n\r\n      if(!type) return parent\r\n\r\n      // loop trough ancestors if type is given\r\n      while(parent && parent.node instanceof window.SVGElement){\r\n        if(typeof type === 'string' ? parent.matches(type) : parent instanceof type) return parent\r\n        if(!parent.node.parentNode || parent.node.parentNode.nodeName == '#document' || parent.node.parentNode.nodeName == '#document-fragment') return null // #759, #720\r\n        parent = SVG.adopt(parent.node.parentNode)\r\n      }\r\n    }\r\n    // Get parent document\r\n  , doc: function() {\r\n      return this instanceof SVG.Doc ? this : this.parent(SVG.Doc)\r\n    }\r\n    // return array of all ancestors of given type up to the root svg\r\n  , parents: function(type) {\r\n      var parents = [], parent = this\r\n\r\n      do{\r\n        parent = parent.parent(type)\r\n        if(!parent || !parent.node) break\r\n\r\n        parents.push(parent)\r\n      } while(parent.parent)\r\n\r\n      return parents\r\n    }\r\n    // matches the element vs a css selector\r\n  , matches: function(selector){\r\n      return matches(this.node, selector)\r\n    }\r\n    // Returns the svg node to call native svg methods on it\r\n  , native: function() {\r\n      return this.node\r\n    }\r\n    // Import raw svg\r\n  , svg: function(svg) {\r\n      // create temporary holder\r\n      var well = document.createElement('svg')\r\n\r\n      // act as a setter if svg is given\r\n      if (svg && this instanceof SVG.Parent) {\r\n        // dump raw svg\r\n        well.innerHTML = '<svg>' + svg.replace(/\\n/, '').replace(/<([\\w:-]+)([^<]+?)\\/>/g, '<$1$2></$1>') + '</svg>'\r\n\r\n        // transplant nodes\r\n        for (var i = 0, il = well.firstChild.childNodes.length; i < il; i++)\r\n          this.node.appendChild(well.firstChild.firstChild)\r\n\r\n      // otherwise act as a getter\r\n      } else {\r\n        // create a wrapping svg element in case of partial content\r\n        well.appendChild(svg = document.createElement('svg'))\r\n\r\n        // write svgjs data to the dom\r\n        this.writeDataToDom()\r\n\r\n        // insert a copy of this node\r\n        svg.appendChild(this.node.cloneNode(true))\r\n\r\n        // return target element\r\n        return well.innerHTML.replace(/^<svg>/, '').replace(/<\\/svg>$/, '')\r\n      }\r\n\r\n      return this\r\n    }\r\n  // write svgjs data to the dom\r\n  , writeDataToDom: function() {\r\n\r\n      // dump variables recursively\r\n      if(this.each || this.lines){\r\n        var fn = this.each ? this : this.lines();\r\n        fn.each(function(){\r\n          this.writeDataToDom()\r\n        })\r\n      }\r\n\r\n      // remove previously set data\r\n      this.node.removeAttribute('svgjs:data')\r\n\r\n      if(Object.keys(this.dom).length)\r\n        this.node.setAttribute('svgjs:data', JSON.stringify(this.dom)) // see #428\r\n\r\n      return this\r\n    }\r\n  // set given data to the elements data property\r\n  , setData: function(o){\r\n      this.dom = o\r\n      return this\r\n    }\r\n  , is: function(obj){\r\n      return is(this, obj)\r\n    }\r\n  }\r\n})\r\n\nSVG.easing = {\r\n  '-': function(pos){return pos}\r\n, '<>':function(pos){return -Math.cos(pos * Math.PI) / 2 + 0.5}\r\n, '>': function(pos){return  Math.sin(pos * Math.PI / 2)}\r\n, '<': function(pos){return -Math.cos(pos * Math.PI / 2) + 1}\r\n}\r\n\r\nSVG.morph = function(pos){\r\n  return function(from, to) {\r\n    return new SVG.MorphObj(from, to).at(pos)\r\n  }\r\n}\r\n\r\nSVG.Situation = SVG.invent({\r\n\r\n  create: function(o){\r\n    this.init = false\r\n    this.reversed = false\r\n    this.reversing = false\r\n\r\n    this.duration = new SVG.Number(o.duration).valueOf()\r\n    this.delay = new SVG.Number(o.delay).valueOf()\r\n\r\n    this.start = +new Date() + this.delay\r\n    this.finish = this.start + this.duration\r\n    this.ease = o.ease\r\n\r\n    // this.loop is incremented from 0 to this.loops\r\n    // it is also incremented when in an infinite loop (when this.loops is true)\r\n    this.loop = 0\r\n    this.loops = false\r\n\r\n    this.animations = {\r\n      // functionToCall: [list of morphable objects]\r\n      // e.g. move: [SVG.Number, SVG.Number]\r\n    }\r\n\r\n    this.attrs = {\r\n      // holds all attributes which are not represented from a function svg.js provides\r\n      // e.g. someAttr: SVG.Number\r\n    }\r\n\r\n    this.styles = {\r\n      // holds all styles which should be animated\r\n      // e.g. fill-color: SVG.Color\r\n    }\r\n\r\n    this.transforms = [\r\n      // holds all transformations as transformation objects\r\n      // e.g. [SVG.Rotate, SVG.Translate, SVG.Matrix]\r\n    ]\r\n\r\n    this.once = {\r\n      // functions to fire at a specific position\r\n      // e.g. \"0.5\": function foo(){}\r\n    }\r\n\r\n  }\r\n\r\n})\r\n\r\n\r\nSVG.FX = SVG.invent({\r\n\r\n  create: function(element) {\r\n    this._target = element\r\n    this.situations = []\r\n    this.active = false\r\n    this.situation = null\r\n    this.paused = false\r\n    this.lastPos = 0\r\n    this.pos = 0\r\n    // The absolute position of an animation is its position in the context of its complete duration (including delay and loops)\r\n    // When performing a delay, absPos is below 0 and when performing a loop, its value is above 1\r\n    this.absPos = 0\r\n    this._speed = 1\r\n  }\r\n\r\n, extend: {\r\n\r\n    /**\r\n     * sets or returns the target of this animation\r\n     * @param o object || number In case of Object it holds all parameters. In case of number its the duration of the animation\r\n     * @param ease function || string Function which should be used for easing or easing keyword\r\n     * @param delay Number indicating the delay before the animation starts\r\n     * @return target || this\r\n     */\r\n    animate: function(o, ease, delay){\r\n\r\n      if(typeof o == 'object'){\r\n        ease = o.ease\r\n        delay = o.delay\r\n        o = o.duration\r\n      }\r\n\r\n      var situation = new SVG.Situation({\r\n        duration: o || 1000,\r\n        delay: delay || 0,\r\n        ease: SVG.easing[ease || '-'] || ease\r\n      })\r\n\r\n      this.queue(situation)\r\n\r\n      return this\r\n    }\r\n\r\n    /**\r\n     * sets a delay before the next element of the queue is called\r\n     * @param delay Duration of delay in milliseconds\r\n     * @return this.target()\r\n     */\r\n  , delay: function(delay){\r\n      // The delay is performed by an empty situation with its duration\r\n      // attribute set to the duration of the delay\r\n      var situation = new SVG.Situation({\r\n        duration: delay,\r\n        delay: 0,\r\n        ease: SVG.easing['-']\r\n      })\r\n\r\n      return this.queue(situation)\r\n    }\r\n\r\n    /**\r\n     * sets or returns the target of this animation\r\n     * @param null || target SVG.Element which should be set as new target\r\n     * @return target || this\r\n     */\r\n  , target: function(target){\r\n      if(target && target instanceof SVG.Element){\r\n        this._target = target\r\n        return this\r\n      }\r\n\r\n      return this._target\r\n    }\r\n\r\n    // returns the absolute position at a given time\r\n  , timeToAbsPos: function(timestamp){\r\n      return (timestamp - this.situation.start) / (this.situation.duration/this._speed)\r\n    }\r\n\r\n    // returns the timestamp from a given absolute positon\r\n  , absPosToTime: function(absPos){\r\n      return this.situation.duration/this._speed * absPos + this.situation.start\r\n    }\r\n\r\n    // starts the animationloop\r\n  , startAnimFrame: function(){\r\n      this.stopAnimFrame()\r\n      this.animationFrame = window.requestAnimationFrame(function(){ this.step() }.bind(this))\r\n    }\r\n\r\n    // cancels the animationframe\r\n  , stopAnimFrame: function(){\r\n      window.cancelAnimationFrame(this.animationFrame)\r\n    }\r\n\r\n    // kicks off the animation - only does something when the queue is currently not active and at least one situation is set\r\n  , start: function(){\r\n      // dont start if already started\r\n      if(!this.active && this.situation){\r\n        this.active = true\r\n        this.startCurrent()\r\n      }\r\n\r\n      return this\r\n    }\r\n\r\n    // start the current situation\r\n  , startCurrent: function(){\r\n      this.situation.start = +new Date + this.situation.delay/this._speed\r\n      this.situation.finish = this.situation.start + this.situation.duration/this._speed\r\n      return this.initAnimations().step()\r\n    }\r\n\r\n    /**\r\n     * adds a function / Situation to the animation queue\r\n     * @param fn function / situation to add\r\n     * @return this\r\n     */\r\n  , queue: function(fn){\r\n      if(typeof fn == 'function' || fn instanceof SVG.Situation)\r\n        this.situations.push(fn)\r\n\r\n      if(!this.situation) this.situation = this.situations.shift()\r\n\r\n      return this\r\n    }\r\n\r\n    /**\r\n     * pulls next element from the queue and execute it\r\n     * @return this\r\n     */\r\n  , dequeue: function(){\r\n      // stop current animation\r\n      this.stop()\r\n\r\n      // get next animation from queue\r\n      this.situation = this.situations.shift()\r\n\r\n      if(this.situation){\r\n        if(this.situation instanceof SVG.Situation) {\r\n          this.start()\r\n        } else {\r\n          // If it is not a SVG.Situation, then it is a function, we execute it\r\n          this.situation.call(this)\r\n        }\r\n      }\r\n\r\n      return this\r\n    }\r\n\r\n    // updates all animations to the current state of the element\r\n    // this is important when one property could be changed from another property\r\n  , initAnimations: function() {\r\n      var i, j, source\r\n      var s = this.situation\r\n\r\n      if(s.init) return this\r\n\r\n      for(i in s.animations){\r\n        source = this.target()[i]()\r\n\r\n        if(!Array.isArray(source)) {\r\n          source = [source]\r\n        }\r\n\r\n        if(!Array.isArray(s.animations[i])) {\r\n          s.animations[i] = [s.animations[i]]\r\n        }\r\n\r\n        //if(s.animations[i].length > source.length) {\r\n        //  source.concat = source.concat(s.animations[i].slice(source.length, s.animations[i].length))\r\n        //}\r\n\r\n        for(j = source.length; j--;) {\r\n          // The condition is because some methods return a normal number instead\r\n          // of a SVG.Number\r\n          if(s.animations[i][j] instanceof SVG.Number)\r\n            source[j] = new SVG.Number(source[j])\r\n\r\n          s.animations[i][j] = source[j].morph(s.animations[i][j])\r\n        }\r\n      }\r\n\r\n      for(i in s.attrs){\r\n        s.attrs[i] = new SVG.MorphObj(this.target().attr(i), s.attrs[i])\r\n      }\r\n\r\n      for(i in s.styles){\r\n        s.styles[i] = new SVG.MorphObj(this.target().style(i), s.styles[i])\r\n      }\r\n\r\n      s.initialTransformation = this.target().matrixify()\r\n\r\n      s.init = true\r\n      return this\r\n    }\r\n  , clearQueue: function(){\r\n      this.situations = []\r\n      return this\r\n    }\r\n  , clearCurrent: function(){\r\n      this.situation = null\r\n      return this\r\n    }\r\n    /** stops the animation immediately\r\n     * @param jumpToEnd A Boolean indicating whether to complete the current animation immediately.\r\n     * @param clearQueue A Boolean indicating whether to remove queued animation as well.\r\n     * @return this\r\n     */\r\n  , stop: function(jumpToEnd, clearQueue){\r\n      var active = this.active\r\n      this.active = false\r\n\r\n      if(clearQueue){\r\n        this.clearQueue()\r\n      }\r\n\r\n      if(jumpToEnd && this.situation){\r\n        // initialize the situation if it was not\r\n        !active && this.startCurrent()\r\n        this.atEnd()\r\n      }\r\n\r\n      this.stopAnimFrame()\r\n\r\n      return this.clearCurrent()\r\n    }\r\n\r\n    /** resets the element to the state where the current element has started\r\n     * @return this\r\n     */\r\n  , reset: function(){\r\n      if(this.situation){\r\n        var temp = this.situation\r\n        this.stop()\r\n        this.situation = temp\r\n        this.atStart()\r\n      }\r\n      return this\r\n    }\r\n\r\n    // Stop the currently-running animation, remove all queued animations, and complete all animations for the element.\r\n  , finish: function(){\r\n\r\n      this.stop(true, false)\r\n\r\n      while(this.dequeue().situation && this.stop(true, false));\r\n\r\n      this.clearQueue().clearCurrent()\r\n\r\n      return this\r\n    }\r\n\r\n    // set the internal animation pointer at the start position, before any loops, and updates the visualisation\r\n  , atStart: function() {\r\n      return this.at(0, true)\r\n    }\r\n\r\n    // set the internal animation pointer at the end position, after all the loops, and updates the visualisation\r\n  , atEnd: function() {\r\n      if (this.situation.loops === true) {\r\n        // If in a infinite loop, we end the current iteration\r\n        this.situation.loops = this.situation.loop + 1\r\n      }\r\n\r\n      if(typeof this.situation.loops == 'number') {\r\n        // If performing a finite number of loops, we go after all the loops\r\n        return this.at(this.situation.loops, true)\r\n      } else {\r\n        // If no loops, we just go at the end\r\n        return this.at(1, true)\r\n      }\r\n    }\r\n\r\n    // set the internal animation pointer to the specified position and updates the visualisation\r\n    // if isAbsPos is true, pos is treated as an absolute position\r\n  , at: function(pos, isAbsPos){\r\n      var durDivSpd = this.situation.duration/this._speed\r\n\r\n      this.absPos = pos\r\n      // If pos is not an absolute position, we convert it into one\r\n      if (!isAbsPos) {\r\n        if (this.situation.reversed) this.absPos = 1 - this.absPos\r\n        this.absPos += this.situation.loop\r\n      }\r\n\r\n      this.situation.start = +new Date - this.absPos * durDivSpd\r\n      this.situation.finish = this.situation.start + durDivSpd\r\n\r\n      return this.step(true)\r\n    }\r\n\r\n    /**\r\n     * sets or returns the speed of the animations\r\n     * @param speed null || Number The new speed of the animations\r\n     * @return Number || this\r\n     */\r\n  , speed: function(speed){\r\n      if (speed === 0) return this.pause()\r\n\r\n      if (speed) {\r\n        this._speed = speed\r\n        // We use an absolute position here so that speed can affect the delay before the animation\r\n        return this.at(this.absPos, true)\r\n      } else return this._speed\r\n    }\r\n\r\n    // Make loopable\r\n  , loop: function(times, reverse) {\r\n      var c = this.last()\r\n\r\n      // store total loops\r\n      c.loops = (times != null) ? times : true\r\n      c.loop = 0\r\n\r\n      if(reverse) c.reversing = true\r\n      return this\r\n    }\r\n\r\n    // pauses the animation\r\n  , pause: function(){\r\n      this.paused = true\r\n      this.stopAnimFrame()\r\n\r\n      return this\r\n    }\r\n\r\n    // unpause the animation\r\n  , play: function(){\r\n      if(!this.paused) return this\r\n      this.paused = false\r\n      // We use an absolute position here so that the delay before the animation can be paused\r\n      return this.at(this.absPos, true)\r\n    }\r\n\r\n    /**\r\n     * toggle or set the direction of the animation\r\n     * true sets direction to backwards while false sets it to forwards\r\n     * @param reversed Boolean indicating whether to reverse the animation or not (default: toggle the reverse status)\r\n     * @return this\r\n     */\r\n  , reverse: function(reversed){\r\n      var c = this.last()\r\n\r\n      if(typeof reversed == 'undefined') c.reversed = !c.reversed\r\n      else c.reversed = reversed\r\n\r\n      return this\r\n    }\r\n\r\n\r\n    /**\r\n     * returns a float from 0-1 indicating the progress of the current animation\r\n     * @param eased Boolean indicating whether the returned position should be eased or not\r\n     * @return number\r\n     */\r\n  , progress: function(easeIt){\r\n      return easeIt ? this.situation.ease(this.pos) : this.pos\r\n    }\r\n\r\n    /**\r\n     * adds a callback function which is called when the current animation is finished\r\n     * @param fn Function which should be executed as callback\r\n     * @return number\r\n     */\r\n  , after: function(fn){\r\n      var c = this.last()\r\n        , wrapper = function wrapper(e){\r\n            if(e.detail.situation == c){\r\n              fn.call(this, c)\r\n              this.off('finished.fx', wrapper) // prevent memory leak\r\n            }\r\n          }\r\n\r\n      this.target().on('finished.fx', wrapper)\r\n\r\n      return this._callStart()\r\n    }\r\n\r\n    // adds a callback which is called whenever one animation step is performed\r\n  , during: function(fn){\r\n      var c = this.last()\r\n        , wrapper = function(e){\r\n            if(e.detail.situation == c){\r\n              fn.call(this, e.detail.pos, SVG.morph(e.detail.pos), e.detail.eased, c)\r\n            }\r\n          }\r\n\r\n      // see above\r\n      this.target().off('during.fx', wrapper).on('during.fx', wrapper)\r\n\r\n      this.after(function(){\r\n        this.off('during.fx', wrapper)\r\n      })\r\n\r\n      return this._callStart()\r\n    }\r\n\r\n    // calls after ALL animations in the queue are finished\r\n  , afterAll: function(fn){\r\n      var wrapper = function wrapper(e){\r\n            fn.call(this)\r\n            this.off('allfinished.fx', wrapper)\r\n          }\r\n\r\n      // see above\r\n      this.target().off('allfinished.fx', wrapper).on('allfinished.fx', wrapper)\r\n\r\n      return this._callStart()\r\n    }\r\n\r\n    // calls on every animation step for all animations\r\n  , duringAll: function(fn){\r\n      var wrapper = function(e){\r\n            fn.call(this, e.detail.pos, SVG.morph(e.detail.pos), e.detail.eased, e.detail.situation)\r\n          }\r\n\r\n      this.target().off('during.fx', wrapper).on('during.fx', wrapper)\r\n\r\n      this.afterAll(function(){\r\n        this.off('during.fx', wrapper)\r\n      })\r\n\r\n      return this._callStart()\r\n    }\r\n\r\n  , last: function(){\r\n      return this.situations.length ? this.situations[this.situations.length-1] : this.situation\r\n    }\r\n\r\n    // adds one property to the animations\r\n  , add: function(method, args, type){\r\n      this.last()[type || 'animations'][method] = args\r\n      return this._callStart()\r\n    }\r\n\r\n    /** perform one step of the animation\r\n     *  @param ignoreTime Boolean indicating whether to ignore time and use position directly or recalculate position based on time\r\n     *  @return this\r\n     */\r\n  , step: function(ignoreTime){\r\n\r\n      // convert current time to an absolute position\r\n      if(!ignoreTime) this.absPos = this.timeToAbsPos(+new Date)\r\n\r\n      // This part convert an absolute position to a position\r\n      if(this.situation.loops !== false) {\r\n        var absPos, absPosInt, lastLoop\r\n\r\n        // If the absolute position is below 0, we just treat it as if it was 0\r\n        absPos = Math.max(this.absPos, 0)\r\n        absPosInt = Math.floor(absPos)\r\n\r\n        if(this.situation.loops === true || absPosInt < this.situation.loops) {\r\n          this.pos = absPos - absPosInt\r\n          lastLoop = this.situation.loop\r\n          this.situation.loop = absPosInt\r\n        } else {\r\n          this.absPos = this.situation.loops\r\n          this.pos = 1\r\n          // The -1 here is because we don't want to toggle reversed when all the loops have been completed\r\n          lastLoop = this.situation.loop - 1\r\n          this.situation.loop = this.situation.loops\r\n        }\r\n\r\n        if(this.situation.reversing) {\r\n          // Toggle reversed if an odd number of loops as occured since the last call of step\r\n          this.situation.reversed = this.situation.reversed != Boolean((this.situation.loop - lastLoop) % 2)\r\n        }\r\n\r\n      } else {\r\n        // If there are no loop, the absolute position must not be above 1\r\n        this.absPos = Math.min(this.absPos, 1)\r\n        this.pos = this.absPos\r\n      }\r\n\r\n      // while the absolute position can be below 0, the position must not be below 0\r\n      if(this.pos < 0) this.pos = 0\r\n\r\n      if(this.situation.reversed) this.pos = 1 - this.pos\r\n\r\n\r\n      // apply easing\r\n      var eased = this.situation.ease(this.pos)\r\n\r\n      // call once-callbacks\r\n      for(var i in this.situation.once){\r\n        if(i > this.lastPos && i <= eased){\r\n          this.situation.once[i].call(this.target(), this.pos, eased)\r\n          delete this.situation.once[i]\r\n        }\r\n      }\r\n\r\n      // fire during callback with position, eased position and current situation as parameter\r\n      if(this.active) this.target().fire('during', {pos: this.pos, eased: eased, fx: this, situation: this.situation})\r\n\r\n      // the user may call stop or finish in the during callback\r\n      // so make sure that we still have a valid situation\r\n      if(!this.situation){\r\n        return this\r\n      }\r\n\r\n      // apply the actual animation to every property\r\n      this.eachAt()\r\n\r\n      // do final code when situation is finished\r\n      if((this.pos == 1 && !this.situation.reversed) || (this.situation.reversed && this.pos == 0)){\r\n\r\n        // stop animation callback\r\n        this.stopAnimFrame()\r\n\r\n        // fire finished callback with current situation as parameter\r\n        this.target().fire('finished', {fx:this, situation: this.situation})\r\n\r\n        if(!this.situations.length){\r\n          this.target().fire('allfinished')\r\n\r\n          // Recheck the length since the user may call animate in the afterAll callback\r\n          if(!this.situations.length){\r\n            this.target().off('.fx') // there shouldnt be any binding left, but to make sure...\r\n            this.active = false\r\n          }\r\n        }\r\n\r\n        // start next animation\r\n        if(this.active) this.dequeue()\r\n        else this.clearCurrent()\r\n\r\n      }else if(!this.paused && this.active){\r\n        // we continue animating when we are not at the end\r\n        this.startAnimFrame()\r\n      }\r\n\r\n      // save last eased position for once callback triggering\r\n      this.lastPos = eased\r\n      return this\r\n\r\n    }\r\n\r\n    // calculates the step for every property and calls block with it\r\n  , eachAt: function(){\r\n      var i, len, at, self = this, target = this.target(), s = this.situation\r\n\r\n      // apply animations which can be called trough a method\r\n      for(i in s.animations){\r\n\r\n        at = [].concat(s.animations[i]).map(function(el){\r\n          return typeof el !== 'string' && el.at ? el.at(s.ease(self.pos), self.pos) : el\r\n        })\r\n\r\n        target[i].apply(target, at)\r\n\r\n      }\r\n\r\n      // apply animation which has to be applied with attr()\r\n      for(i in s.attrs){\r\n\r\n        at = [i].concat(s.attrs[i]).map(function(el){\r\n          return typeof el !== 'string' && el.at ? el.at(s.ease(self.pos), self.pos) : el\r\n        })\r\n\r\n        target.attr.apply(target, at)\r\n\r\n      }\r\n\r\n      // apply animation which has to be applied with style()\r\n      for(i in s.styles){\r\n\r\n        at = [i].concat(s.styles[i]).map(function(el){\r\n          return typeof el !== 'string' && el.at ? el.at(s.ease(self.pos), self.pos) : el\r\n        })\r\n\r\n        target.style.apply(target, at)\r\n\r\n      }\r\n\r\n      // animate initialTransformation which has to be chained\r\n      if(s.transforms.length){\r\n\r\n        // get initial initialTransformation\r\n        at = s.initialTransformation\r\n        for(i = 0, len = s.transforms.length; i < len; i++){\r\n\r\n          // get next transformation in chain\r\n          var a = s.transforms[i]\r\n\r\n          // multiply matrix directly\r\n          if(a instanceof SVG.Matrix){\r\n\r\n            if(a.relative){\r\n              at = at.multiply(new SVG.Matrix().morph(a).at(s.ease(this.pos)))\r\n            }else{\r\n              at = at.morph(a).at(s.ease(this.pos))\r\n            }\r\n            continue\r\n          }\r\n\r\n          // when transformation is absolute we have to reset the needed transformation first\r\n          if(!a.relative)\r\n            a.undo(at.extract())\r\n\r\n          // and reapply it after\r\n          at = at.multiply(a.at(s.ease(this.pos)))\r\n\r\n        }\r\n\r\n        // set new matrix on element\r\n        target.matrix(at)\r\n      }\r\n\r\n      return this\r\n\r\n    }\r\n\r\n\r\n    // adds an once-callback which is called at a specific position and never again\r\n  , once: function(pos, fn, isEased){\r\n      var c = this.last()\r\n      if(!isEased) pos = c.ease(pos)\r\n\r\n      c.once[pos] = fn\r\n\r\n      return this\r\n    }\r\n\r\n  , _callStart: function() {\r\n      setTimeout(function(){this.start()}.bind(this), 0)\r\n      return this\r\n    }\r\n\r\n  }\r\n\r\n, parent: SVG.Element\r\n\r\n  // Add method to parent elements\r\n, construct: {\r\n    // Get fx module or create a new one, then animate with given duration and ease\r\n    animate: function(o, ease, delay) {\r\n      return (this.fx || (this.fx = new SVG.FX(this))).animate(o, ease, delay)\r\n    }\r\n  , delay: function(delay){\r\n      return (this.fx || (this.fx = new SVG.FX(this))).delay(delay)\r\n    }\r\n  , stop: function(jumpToEnd, clearQueue) {\r\n      if (this.fx)\r\n        this.fx.stop(jumpToEnd, clearQueue)\r\n\r\n      return this\r\n    }\r\n  , finish: function() {\r\n      if (this.fx)\r\n        this.fx.finish()\r\n\r\n      return this\r\n    }\r\n    // Pause current animation\r\n  , pause: function() {\r\n      if (this.fx)\r\n        this.fx.pause()\r\n\r\n      return this\r\n    }\r\n    // Play paused current animation\r\n  , play: function() {\r\n      if (this.fx)\r\n        this.fx.play()\r\n\r\n      return this\r\n    }\r\n    // Set/Get the speed of the animations\r\n  , speed: function(speed) {\r\n      if (this.fx)\r\n        if (speed == null)\r\n          return this.fx.speed()\r\n        else\r\n          this.fx.speed(speed)\r\n\r\n      return this\r\n    }\r\n  }\r\n\r\n})\r\n\r\n// MorphObj is used whenever no morphable object is given\r\nSVG.MorphObj = SVG.invent({\r\n\r\n  create: function(from, to){\r\n    // prepare color for morphing\r\n    if(SVG.Color.isColor(to)) return new SVG.Color(from).morph(to)\r\n    // check if we have a list of values\r\n    if(SVG.regex.delimiter.test(from)) {\r\n      // prepare path for morphing\r\n      if(SVG.regex.pathLetters.test(from)) return new SVG.PathArray(from).morph(to)\r\n      // prepare value list for morphing\r\n      else return new SVG.Array(from).morph(to)\r\n    }\r\n    // prepare number for morphing\r\n    if(SVG.regex.numberAndUnit.test(to)) return new SVG.Number(from).morph(to)\r\n\r\n    // prepare for plain morphing\r\n    this.value = from\r\n    this.destination = to\r\n  }\r\n\r\n, extend: {\r\n    at: function(pos, real){\r\n      return real < 1 ? this.value : this.destination\r\n    },\r\n\r\n    valueOf: function(){\r\n      return this.value\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.extend(SVG.FX, {\r\n  // Add animatable attributes\r\n  attr: function(a, v, relative) {\r\n    // apply attributes individually\r\n    if (typeof a == 'object') {\r\n      for (var key in a)\r\n        this.attr(key, a[key])\r\n\r\n    } else {\r\n      this.add(a, v, 'attrs')\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Add animatable styles\r\n, style: function(s, v) {\r\n    if (typeof s == 'object')\r\n      for (var key in s)\r\n        this.style(key, s[key])\r\n\r\n    else\r\n      this.add(s, v, 'styles')\r\n\r\n    return this\r\n  }\r\n  // Animatable x-axis\r\n, x: function(x, relative) {\r\n    if(this.target() instanceof SVG.G){\r\n      this.transform({x:x}, relative)\r\n      return this\r\n    }\r\n\r\n    var num = new SVG.Number(x)\r\n    num.relative = relative\r\n    return this.add('x', num)\r\n  }\r\n  // Animatable y-axis\r\n, y: function(y, relative) {\r\n    if(this.target() instanceof SVG.G){\r\n      this.transform({y:y}, relative)\r\n      return this\r\n    }\r\n\r\n    var num = new SVG.Number(y)\r\n    num.relative = relative\r\n    return this.add('y', num)\r\n  }\r\n  // Animatable center x-axis\r\n, cx: function(x) {\r\n    return this.add('cx', new SVG.Number(x))\r\n  }\r\n  // Animatable center y-axis\r\n, cy: function(y) {\r\n    return this.add('cy', new SVG.Number(y))\r\n  }\r\n  // Add animatable move\r\n, move: function(x, y) {\r\n    return this.x(x).y(y)\r\n  }\r\n  // Add animatable center\r\n, center: function(x, y) {\r\n    return this.cx(x).cy(y)\r\n  }\r\n  // Add animatable size\r\n, size: function(width, height) {\r\n    if (this.target() instanceof SVG.Text) {\r\n      // animate font size for Text elements\r\n      this.attr('font-size', width)\r\n\r\n    } else {\r\n      // animate bbox based size for all other elements\r\n      var box\r\n\r\n      if(!width || !height){\r\n        box = this.target().bbox()\r\n      }\r\n\r\n      if(!width){\r\n        width = box.width / box.height  * height\r\n      }\r\n\r\n      if(!height){\r\n        height = box.height / box.width  * width\r\n      }\r\n\r\n      this.add('width' , new SVG.Number(width))\r\n          .add('height', new SVG.Number(height))\r\n\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Add animatable width\r\n, width: function(width) {\r\n    return this.add('width', new SVG.Number(width))\r\n  }\r\n  // Add animatable height\r\n, height: function(height) {\r\n    return this.add('height', new SVG.Number(height))\r\n  }\r\n  // Add animatable plot\r\n, plot: function(a, b, c, d) {\r\n    // Lines can be plotted with 4 arguments\r\n    if(arguments.length == 4) {\r\n      return this.plot([a, b, c, d])\r\n    }\r\n\r\n    return this.add('plot', new (this.target().morphArray)(a))\r\n  }\r\n  // Add leading method\r\n, leading: function(value) {\r\n    return this.target().leading ?\r\n      this.add('leading', new SVG.Number(value)) :\r\n      this\r\n  }\r\n  // Add animatable viewbox\r\n, viewbox: function(x, y, width, height) {\r\n    if (this.target() instanceof SVG.Container) {\r\n      this.add('viewbox', new SVG.ViewBox(x, y, width, height))\r\n    }\r\n\r\n    return this\r\n  }\r\n, update: function(o) {\r\n    if (this.target() instanceof SVG.Stop) {\r\n      if (typeof o == 'number' || o instanceof SVG.Number) {\r\n        return this.update({\r\n          offset:  arguments[0]\r\n        , color:   arguments[1]\r\n        , opacity: arguments[2]\r\n        })\r\n      }\r\n\r\n      if (o.opacity != null) this.attr('stop-opacity', o.opacity)\r\n      if (o.color   != null) this.attr('stop-color', o.color)\r\n      if (o.offset  != null) this.attr('offset', o.offset)\r\n    }\r\n\r\n    return this\r\n  }\r\n})\r\n\nSVG.Box = SVG.invent({\r\n  create: function(x, y, width, height) {\r\n    if (typeof x == 'object' && !(x instanceof SVG.Element)) {\r\n      // chromes getBoundingClientRect has no x and y property\r\n      return SVG.Box.call(this, x.left != null ? x.left : x.x , x.top != null ? x.top : x.y, x.width, x.height)\r\n    } else if (arguments.length == 4) {\r\n      this.x = x\r\n      this.y = y\r\n      this.width = width\r\n      this.height = height\r\n    }\r\n\r\n    // add center, right, bottom...\r\n    fullBox(this)\r\n  }\r\n, extend: {\r\n    // Merge rect box with another, return a new instance\r\n    merge: function(box) {\r\n      var b = new this.constructor()\r\n\r\n      // merge boxes\r\n      b.x      = Math.min(this.x, box.x)\r\n      b.y      = Math.min(this.y, box.y)\r\n      b.width  = Math.max(this.x + this.width,  box.x + box.width)  - b.x\r\n      b.height = Math.max(this.y + this.height, box.y + box.height) - b.y\r\n\r\n      return fullBox(b)\r\n    }\r\n\r\n  , transform: function(m) {\r\n      var xMin = Infinity, xMax = -Infinity, yMin = Infinity, yMax = -Infinity, p, bbox\r\n\r\n      var pts = [\r\n        new SVG.Point(this.x, this.y),\r\n        new SVG.Point(this.x2, this.y),\r\n        new SVG.Point(this.x, this.y2),\r\n        new SVG.Point(this.x2, this.y2)\r\n      ]\r\n\r\n      pts.forEach(function(p) {\r\n        p = p.transform(m)\r\n        xMin = Math.min(xMin,p.x)\r\n        xMax = Math.max(xMax,p.x)\r\n        yMin = Math.min(yMin,p.y)\r\n        yMax = Math.max(yMax,p.y)\r\n      })\r\n\r\n      bbox = new this.constructor()\r\n      bbox.x = xMin\r\n      bbox.width = xMax-xMin\r\n      bbox.y = yMin\r\n      bbox.height = yMax-yMin\r\n\r\n      fullBox(bbox)\r\n\r\n      return bbox\r\n    }\r\n  }\r\n})\r\n\r\nSVG.BBox = SVG.invent({\r\n  // Initialize\r\n  create: function(element) {\r\n    SVG.Box.apply(this, [].slice.call(arguments))\r\n\r\n    // get values if element is given\r\n    if (element instanceof SVG.Element) {\r\n      var box\r\n\r\n      // yes this is ugly, but Firefox can be a pain when it comes to elements that are not yet rendered\r\n      try {\r\n\r\n        if (!document.documentElement.contains){\r\n          // This is IE - it does not support contains() for top-level SVGs\r\n          var topParent = element.node\r\n          while (topParent.parentNode){\r\n            topParent = topParent.parentNode\r\n          }\r\n          if (topParent != document) throw new Exception('Element not in the dom')\r\n        } else {\r\n          // the element is NOT in the dom, throw error\r\n          if(!document.documentElement.contains(element.node)) throw new Exception('Element not in the dom')\r\n        }\r\n\r\n        // find native bbox\r\n        box = element.node.getBBox()\r\n      } catch(e) {\r\n        if(element instanceof SVG.Shape){\r\n          var clone = element.clone(SVG.parser.draw.instance).show()\r\n          box = clone.node.getBBox()\r\n          clone.remove()\r\n        }else{\r\n          box = {\r\n            x:      element.node.clientLeft\r\n          , y:      element.node.clientTop\r\n          , width:  element.node.clientWidth\r\n          , height: element.node.clientHeight\r\n          }\r\n        }\r\n      }\r\n\r\n      SVG.Box.call(this, box)\r\n    }\r\n\r\n  }\r\n\r\n  // Define ancestor\r\n, inherit: SVG.Box\r\n\r\n  // Define Parent\r\n, parent: SVG.Element\r\n\r\n  // Constructor\r\n, construct: {\r\n    // Get bounding box\r\n    bbox: function() {\r\n      return new SVG.BBox(this)\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.BBox.prototype.constructor = SVG.BBox\r\n\r\n\r\nSVG.extend(SVG.Element, {\r\n  tbox: function(){\r\n    console.warn('Use of TBox is deprecated and mapped to RBox. Use .rbox() instead.')\r\n    return this.rbox(this.doc())\r\n  }\r\n})\r\n\r\nSVG.RBox = SVG.invent({\r\n  // Initialize\r\n  create: function(element) {\r\n    SVG.Box.apply(this, [].slice.call(arguments))\r\n\r\n    if (element instanceof SVG.Element) {\r\n      SVG.Box.call(this, element.node.getBoundingClientRect())\r\n    }\r\n  }\r\n\r\n, inherit: SVG.Box\r\n\r\n  // define Parent\r\n, parent: SVG.Element\r\n\r\n, extend: {\r\n    addOffset: function() {\r\n      // offset by window scroll position, because getBoundingClientRect changes when window is scrolled\r\n      this.x += window.pageXOffset\r\n      this.y += window.pageYOffset\r\n      return this\r\n    }\r\n  }\r\n\r\n  // Constructor\r\n, construct: {\r\n    // Get rect box\r\n    rbox: function(el) {\r\n      if (el) return new SVG.RBox(this).transform(el.screenCTM().inverse())\r\n      return new SVG.RBox(this).addOffset()\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.RBox.prototype.constructor = SVG.RBox\r\n\nSVG.Matrix = SVG.invent({\r\n  // Initialize\r\n  create: function(source) {\r\n    var i, base = arrayToMatrix([1, 0, 0, 1, 0, 0])\r\n\r\n    // ensure source as object\r\n    source = source instanceof SVG.Element ?\r\n      source.matrixify() :\r\n    typeof source === 'string' ?\r\n      arrayToMatrix(source.split(SVG.regex.delimiter).map(parseFloat)) :\r\n    arguments.length == 6 ?\r\n      arrayToMatrix([].slice.call(arguments)) :\r\n    Array.isArray(source) ?\r\n      arrayToMatrix(source) :\r\n    typeof source === 'object' ?\r\n      source : base\r\n\r\n    // merge source\r\n    for (i = abcdef.length - 1; i >= 0; --i)\r\n      this[abcdef[i]] = source[abcdef[i]] != null ?\r\n        source[abcdef[i]] : base[abcdef[i]]\r\n  }\r\n\r\n  // Add methods\r\n, extend: {\r\n    // Extract individual transformations\r\n    extract: function() {\r\n      // find delta transform points\r\n      var px    = deltaTransformPoint(this, 0, 1)\r\n        , py    = deltaTransformPoint(this, 1, 0)\r\n        , skewX = 180 / Math.PI * Math.atan2(px.y, px.x) - 90\r\n\r\n      return {\r\n        // translation\r\n        x:        this.e\r\n      , y:        this.f\r\n      , transformedX:(this.e * Math.cos(skewX * Math.PI / 180) + this.f * Math.sin(skewX * Math.PI / 180)) / Math.sqrt(this.a * this.a + this.b * this.b)\r\n      , transformedY:(this.f * Math.cos(skewX * Math.PI / 180) + this.e * Math.sin(-skewX * Math.PI / 180)) / Math.sqrt(this.c * this.c + this.d * this.d)\r\n        // skew\r\n      , skewX:    -skewX\r\n      , skewY:    180 / Math.PI * Math.atan2(py.y, py.x)\r\n        // scale\r\n      , scaleX:   Math.sqrt(this.a * this.a + this.b * this.b)\r\n      , scaleY:   Math.sqrt(this.c * this.c + this.d * this.d)\r\n        // rotation\r\n      , rotation: skewX\r\n      , a: this.a\r\n      , b: this.b\r\n      , c: this.c\r\n      , d: this.d\r\n      , e: this.e\r\n      , f: this.f\r\n      , matrix: new SVG.Matrix(this)\r\n      }\r\n    }\r\n    // Clone matrix\r\n  , clone: function() {\r\n      return new SVG.Matrix(this)\r\n    }\r\n    // Morph one matrix into another\r\n  , morph: function(matrix) {\r\n      // store new destination\r\n      this.destination = new SVG.Matrix(matrix)\r\n\r\n      return this\r\n    }\r\n    // Get morphed matrix at a given position\r\n  , at: function(pos) {\r\n      // make sure a destination is defined\r\n      if (!this.destination) return this\r\n\r\n      // calculate morphed matrix at a given position\r\n      var matrix = new SVG.Matrix({\r\n        a: this.a + (this.destination.a - this.a) * pos\r\n      , b: this.b + (this.destination.b - this.b) * pos\r\n      , c: this.c + (this.destination.c - this.c) * pos\r\n      , d: this.d + (this.destination.d - this.d) * pos\r\n      , e: this.e + (this.destination.e - this.e) * pos\r\n      , f: this.f + (this.destination.f - this.f) * pos\r\n      })\r\n\r\n      return matrix\r\n    }\r\n    // Multiplies by given matrix\r\n  , multiply: function(matrix) {\r\n      return new SVG.Matrix(this.native().multiply(parseMatrix(matrix).native()))\r\n    }\r\n    // Inverses matrix\r\n  , inverse: function() {\r\n      return new SVG.Matrix(this.native().inverse())\r\n    }\r\n    // Translate matrix\r\n  , translate: function(x, y) {\r\n      return new SVG.Matrix(this.native().translate(x || 0, y || 0))\r\n    }\r\n    // Scale matrix\r\n  , scale: function(x, y, cx, cy) {\r\n      // support uniformal scale\r\n      if (arguments.length == 1) {\r\n        y = x\r\n      } else if (arguments.length == 3) {\r\n        cy = cx\r\n        cx = y\r\n        y = x\r\n      }\r\n\r\n      return this.around(cx, cy, new SVG.Matrix(x, 0, 0, y, 0, 0))\r\n    }\r\n    // Rotate matrix\r\n  , rotate: function(r, cx, cy) {\r\n      // convert degrees to radians\r\n      r = SVG.utils.radians(r)\r\n\r\n      return this.around(cx, cy, new SVG.Matrix(Math.cos(r), Math.sin(r), -Math.sin(r), Math.cos(r), 0, 0))\r\n    }\r\n    // Flip matrix on x or y, at a given offset\r\n  , flip: function(a, o) {\r\n      return a == 'x' ?\r\n          this.scale(-1, 1, o, 0) :\r\n        a == 'y' ?\r\n          this.scale(1, -1, 0, o) :\r\n          this.scale(-1, -1, a, o != null ? o : a)\r\n    }\r\n    // Skew\r\n  , skew: function(x, y, cx, cy) {\r\n      // support uniformal skew\r\n      if (arguments.length == 1) {\r\n        y = x\r\n      } else if (arguments.length == 3) {\r\n        cy = cx\r\n        cx = y\r\n        y = x\r\n      }\r\n\r\n      // convert degrees to radians\r\n      x = SVG.utils.radians(x)\r\n      y = SVG.utils.radians(y)\r\n\r\n      return this.around(cx, cy, new SVG.Matrix(1, Math.tan(y), Math.tan(x), 1, 0, 0))\r\n    }\r\n    // SkewX\r\n  , skewX: function(x, cx, cy) {\r\n      return this.skew(x, 0, cx, cy)\r\n    }\r\n    // SkewY\r\n  , skewY: function(y, cx, cy) {\r\n      return this.skew(0, y, cx, cy)\r\n    }\r\n    // Transform around a center point\r\n  , around: function(cx, cy, matrix) {\r\n      return this\r\n        .multiply(new SVG.Matrix(1, 0, 0, 1, cx || 0, cy || 0))\r\n        .multiply(matrix)\r\n        .multiply(new SVG.Matrix(1, 0, 0, 1, -cx || 0, -cy || 0))\r\n    }\r\n    // Convert to native SVGMatrix\r\n  , native: function() {\r\n      // create new matrix\r\n      var matrix = SVG.parser.native.createSVGMatrix()\r\n\r\n      // update with current values\r\n      for (var i = abcdef.length - 1; i >= 0; i--)\r\n        matrix[abcdef[i]] = this[abcdef[i]]\r\n\r\n      return matrix\r\n    }\r\n    // Convert matrix to string\r\n  , toString: function() {\r\n      // Construct the matrix directly, avoid values that are too small\r\n      return 'matrix(' + float32String(this.a) + ',' + float32String(this.b)\r\n        + ',' + float32String(this.c) + ',' + float32String(this.d)\r\n        + ',' + float32String(this.e) + ',' + float32String(this.f)\r\n        + ')'\r\n    }\r\n  }\r\n\r\n  // Define parent\r\n, parent: SVG.Element\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Get current matrix\r\n    ctm: function() {\r\n      return new SVG.Matrix(this.node.getCTM())\r\n    },\r\n    // Get current screen matrix\r\n    screenCTM: function() {\r\n      /* https://bugzilla.mozilla.org/show_bug.cgi?id=1344537\r\n         This is needed because FF does not return the transformation matrix\r\n         for the inner coordinate system when getScreenCTM() is called on nested svgs.\r\n         However all other Browsers do that */\r\n      if(this instanceof SVG.Nested) {\r\n        var rect = this.rect(1,1)\r\n        var m = rect.node.getScreenCTM()\r\n        rect.remove()\r\n        return new SVG.Matrix(m)\r\n      }\r\n      return new SVG.Matrix(this.node.getScreenCTM())\r\n    }\r\n\r\n  }\r\n\r\n})\r\n\nSVG.Point = SVG.invent({\r\n  // Initialize\r\n  create: function(x,y) {\r\n    var i, source, base = {x:0, y:0}\r\n\r\n    // ensure source as object\r\n    source = Array.isArray(x) ?\r\n      {x:x[0], y:x[1]} :\r\n    typeof x === 'object' ?\r\n      {x:x.x, y:x.y} :\r\n    x != null ?\r\n      {x:x, y:(y != null ? y : x)} : base // If y has no value, then x is used has its value\r\n\r\n    // merge source\r\n    this.x = source.x\r\n    this.y = source.y\r\n  }\r\n\r\n  // Add methods\r\n, extend: {\r\n    // Clone point\r\n    clone: function() {\r\n      return new SVG.Point(this)\r\n    }\r\n    // Morph one point into another\r\n  , morph: function(x, y) {\r\n      // store new destination\r\n      this.destination = new SVG.Point(x, y)\r\n\r\n      return this\r\n    }\r\n    // Get morphed point at a given position\r\n  , at: function(pos) {\r\n      // make sure a destination is defined\r\n      if (!this.destination) return this\r\n\r\n      // calculate morphed matrix at a given position\r\n      var point = new SVG.Point({\r\n        x: this.x + (this.destination.x - this.x) * pos\r\n      , y: this.y + (this.destination.y - this.y) * pos\r\n      })\r\n\r\n      return point\r\n    }\r\n    // Convert to native SVGPoint\r\n  , native: function() {\r\n      // create new point\r\n      var point = SVG.parser.native.createSVGPoint()\r\n\r\n      // update with current values\r\n      point.x = this.x\r\n      point.y = this.y\r\n\r\n      return point\r\n    }\r\n    // transform point with matrix\r\n  , transform: function(matrix) {\r\n      return new SVG.Point(this.native().matrixTransform(matrix.native()))\r\n    }\r\n\r\n  }\r\n\r\n})\r\n\r\nSVG.extend(SVG.Element, {\r\n\r\n  // Get point\r\n  point: function(x, y) {\r\n    return new SVG.Point(x,y).transform(this.screenCTM().inverse());\r\n  }\r\n\r\n})\r\n\nSVG.extend(SVG.Element, {\r\n  // Set svg element attribute\r\n  attr: function(a, v, n) {\r\n    // act as full getter\r\n    if (a == null) {\r\n      // get an object of attributes\r\n      a = {}\r\n      v = this.node.attributes\r\n      for (n = v.length - 1; n >= 0; n--)\r\n        a[v[n].nodeName] = SVG.regex.isNumber.test(v[n].nodeValue) ? parseFloat(v[n].nodeValue) : v[n].nodeValue\r\n\r\n      return a\r\n\r\n    } else if (typeof a == 'object') {\r\n      // apply every attribute individually if an object is passed\r\n      for (v in a) this.attr(v, a[v])\r\n\r\n    } else if (v === null) {\r\n        // remove value\r\n        this.node.removeAttribute(a)\r\n\r\n    } else if (v == null) {\r\n      // act as a getter if the first and only argument is not an object\r\n      v = this.node.getAttribute(a)\r\n      return v == null ?\r\n        SVG.defaults.attrs[a] :\r\n      SVG.regex.isNumber.test(v) ?\r\n        parseFloat(v) : v\r\n\r\n    } else {\r\n      // BUG FIX: some browsers will render a stroke if a color is given even though stroke width is 0\r\n      if (a == 'stroke-width')\r\n        this.attr('stroke', parseFloat(v) > 0 ? this._stroke : null)\r\n      else if (a == 'stroke')\r\n        this._stroke = v\r\n\r\n      // convert image fill and stroke to patterns\r\n      if (a == 'fill' || a == 'stroke') {\r\n        if (SVG.regex.isImage.test(v))\r\n          v = this.doc().defs().image(v, 0, 0)\r\n\r\n        if (v instanceof SVG.Image)\r\n          v = this.doc().defs().pattern(0, 0, function() {\r\n            this.add(v)\r\n          })\r\n      }\r\n\r\n      // ensure correct numeric values (also accepts NaN and Infinity)\r\n      if (typeof v === 'number')\r\n        v = new SVG.Number(v)\r\n\r\n      // ensure full hex color\r\n      else if (SVG.Color.isColor(v))\r\n        v = new SVG.Color(v)\r\n\r\n      // parse array values\r\n      else if (Array.isArray(v))\r\n        v = new SVG.Array(v)\r\n\r\n      // if the passed attribute is leading...\r\n      if (a == 'leading') {\r\n        // ... call the leading method instead\r\n        if (this.leading)\r\n          this.leading(v)\r\n      } else {\r\n        // set given attribute on node\r\n        typeof n === 'string' ?\r\n          this.node.setAttributeNS(n, a, v.toString()) :\r\n          this.node.setAttribute(a, v.toString())\r\n      }\r\n\r\n      // rebuild if required\r\n      if (this.rebuild && (a == 'font-size' || a == 'x'))\r\n        this.rebuild(a, v)\r\n    }\r\n\r\n    return this\r\n  }\r\n})\nSVG.extend(SVG.Element, {\r\n  // Add transformations\r\n  transform: function(o, relative) {\r\n    // get target in case of the fx module, otherwise reference this\r\n    var target = this\r\n      , matrix, bbox\r\n\r\n    // act as a getter\r\n    if (typeof o !== 'object') {\r\n      // get current matrix\r\n      matrix = new SVG.Matrix(target).extract()\r\n\r\n      return typeof o === 'string' ? matrix[o] : matrix\r\n    }\r\n\r\n    // get current matrix\r\n    matrix = new SVG.Matrix(target)\r\n\r\n    // ensure relative flag\r\n    relative = !!relative || !!o.relative\r\n\r\n    // act on matrix\r\n    if (o.a != null) {\r\n      matrix = relative ?\r\n        // relative\r\n        matrix.multiply(new SVG.Matrix(o)) :\r\n        // absolute\r\n        new SVG.Matrix(o)\r\n\r\n    // act on rotation\r\n    } else if (o.rotation != null) {\r\n      // ensure centre point\r\n      ensureCentre(o, target)\r\n\r\n      // apply transformation\r\n      matrix = relative ?\r\n        // relative\r\n        matrix.rotate(o.rotation, o.cx, o.cy) :\r\n        // absolute\r\n        matrix.rotate(o.rotation - matrix.extract().rotation, o.cx, o.cy)\r\n\r\n    // act on scale\r\n    } else if (o.scale != null || o.scaleX != null || o.scaleY != null) {\r\n      // ensure centre point\r\n      ensureCentre(o, target)\r\n\r\n      // ensure scale values on both axes\r\n      o.scaleX = o.scale != null ? o.scale : o.scaleX != null ? o.scaleX : 1\r\n      o.scaleY = o.scale != null ? o.scale : o.scaleY != null ? o.scaleY : 1\r\n\r\n      if (!relative) {\r\n        // absolute; multiply inversed values\r\n        var e = matrix.extract()\r\n        o.scaleX = o.scaleX * 1 / e.scaleX\r\n        o.scaleY = o.scaleY * 1 / e.scaleY\r\n      }\r\n\r\n      matrix = matrix.scale(o.scaleX, o.scaleY, o.cx, o.cy)\r\n\r\n    // act on skew\r\n    } else if (o.skew != null || o.skewX != null || o.skewY != null) {\r\n      // ensure centre point\r\n      ensureCentre(o, target)\r\n\r\n      // ensure skew values on both axes\r\n      o.skewX = o.skew != null ? o.skew : o.skewX != null ? o.skewX : 0\r\n      o.skewY = o.skew != null ? o.skew : o.skewY != null ? o.skewY : 0\r\n\r\n      if (!relative) {\r\n        // absolute; reset skew values\r\n        var e = matrix.extract()\r\n        matrix = matrix.multiply(new SVG.Matrix().skew(e.skewX, e.skewY, o.cx, o.cy).inverse())\r\n      }\r\n\r\n      matrix = matrix.skew(o.skewX, o.skewY, o.cx, o.cy)\r\n\r\n    // act on flip\r\n    } else if (o.flip) {\r\n      if(o.flip == 'x' || o.flip == 'y') {\r\n        o.offset = o.offset == null ? target.bbox()['c' + o.flip] : o.offset\r\n      } else {\r\n        if(o.offset == null) {\r\n          bbox = target.bbox()\r\n          o.flip = bbox.cx\r\n          o.offset = bbox.cy\r\n        } else {\r\n          o.flip = o.offset\r\n        }\r\n      }\r\n\r\n      matrix = new SVG.Matrix().flip(o.flip, o.offset)\r\n\r\n    // act on translate\r\n    } else if (o.x != null || o.y != null) {\r\n      if (relative) {\r\n        // relative\r\n        matrix = matrix.translate(o.x, o.y)\r\n      } else {\r\n        // absolute\r\n        if (o.x != null) matrix.e = o.x\r\n        if (o.y != null) matrix.f = o.y\r\n      }\r\n    }\r\n\r\n    return this.attr('transform', matrix)\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.FX, {\r\n  transform: function(o, relative) {\r\n    // get target in case of the fx module, otherwise reference this\r\n    var target = this.target()\r\n      , matrix, bbox\r\n\r\n    // act as a getter\r\n    if (typeof o !== 'object') {\r\n      // get current matrix\r\n      matrix = new SVG.Matrix(target).extract()\r\n\r\n      return typeof o === 'string' ? matrix[o] : matrix\r\n    }\r\n\r\n    // ensure relative flag\r\n    relative = !!relative || !!o.relative\r\n\r\n    // act on matrix\r\n    if (o.a != null) {\r\n      matrix = new SVG.Matrix(o)\r\n\r\n    // act on rotation\r\n    } else if (o.rotation != null) {\r\n      // ensure centre point\r\n      ensureCentre(o, target)\r\n\r\n      // apply transformation\r\n      matrix = new SVG.Rotate(o.rotation, o.cx, o.cy)\r\n\r\n    // act on scale\r\n    } else if (o.scale != null || o.scaleX != null || o.scaleY != null) {\r\n      // ensure centre point\r\n      ensureCentre(o, target)\r\n\r\n      // ensure scale values on both axes\r\n      o.scaleX = o.scale != null ? o.scale : o.scaleX != null ? o.scaleX : 1\r\n      o.scaleY = o.scale != null ? o.scale : o.scaleY != null ? o.scaleY : 1\r\n\r\n      matrix = new SVG.Scale(o.scaleX, o.scaleY, o.cx, o.cy)\r\n\r\n    // act on skew\r\n    } else if (o.skewX != null || o.skewY != null) {\r\n      // ensure centre point\r\n      ensureCentre(o, target)\r\n\r\n      // ensure skew values on both axes\r\n      o.skewX = o.skewX != null ? o.skewX : 0\r\n      o.skewY = o.skewY != null ? o.skewY : 0\r\n\r\n      matrix = new SVG.Skew(o.skewX, o.skewY, o.cx, o.cy)\r\n\r\n    // act on flip\r\n    } else if (o.flip) {\r\n      if(o.flip == 'x' || o.flip == 'y') {\r\n        o.offset = o.offset == null ? target.bbox()['c' + o.flip] : o.offset\r\n      } else {\r\n        if(o.offset == null) {\r\n          bbox = target.bbox()\r\n          o.flip = bbox.cx\r\n          o.offset = bbox.cy\r\n        } else {\r\n          o.flip = o.offset\r\n        }\r\n      }\r\n\r\n      matrix = new SVG.Matrix().flip(o.flip, o.offset)\r\n\r\n    // act on translate\r\n    } else if (o.x != null || o.y != null) {\r\n      matrix = new SVG.Translate(o.x, o.y)\r\n    }\r\n\r\n    if(!matrix) return this\r\n\r\n    matrix.relative = relative\r\n\r\n    this.last().transforms.push(matrix)\r\n\r\n    return this._callStart()\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Element, {\r\n  // Reset all transformations\r\n  untransform: function() {\r\n    return this.attr('transform', null)\r\n  },\r\n  // merge the whole transformation chain into one matrix and returns it\r\n  matrixify: function() {\r\n\r\n    var matrix = (this.attr('transform') || '')\r\n      // split transformations\r\n      .split(SVG.regex.transforms).slice(0,-1).map(function(str){\r\n        // generate key => value pairs\r\n        var kv = str.trim().split('(')\r\n        return [kv[0], kv[1].split(SVG.regex.delimiter).map(function(str){ return parseFloat(str) })]\r\n      })\r\n      // merge every transformation into one matrix\r\n      .reduce(function(matrix, transform){\r\n\r\n        if(transform[0] == 'matrix') return matrix.multiply(arrayToMatrix(transform[1]))\r\n        return matrix[transform[0]].apply(matrix, transform[1])\r\n\r\n      }, new SVG.Matrix())\r\n\r\n    return matrix\r\n  },\r\n  // add an element to another parent without changing the visual representation on the screen\r\n  toParent: function(parent) {\r\n    if(this == parent) return this\r\n    var ctm = this.screenCTM()\r\n    var pCtm = parent.screenCTM().inverse()\r\n\r\n    this.addTo(parent).untransform().transform(pCtm.multiply(ctm))\r\n\r\n    return this\r\n  },\r\n  // same as above with parent equals root-svg\r\n  toDoc: function() {\r\n    return this.toParent(this.doc())\r\n  }\r\n\r\n})\r\n\r\nSVG.Transformation = SVG.invent({\r\n\r\n  create: function(source, inversed){\r\n\r\n    if(arguments.length > 1 && typeof inversed != 'boolean'){\r\n      return this.constructor.call(this, [].slice.call(arguments))\r\n    }\r\n\r\n    if(Array.isArray(source)){\r\n      for(var i = 0, len = this.arguments.length; i < len; ++i){\r\n        this[this.arguments[i]] = source[i]\r\n      }\r\n    } else if(typeof source == 'object'){\r\n      for(var i = 0, len = this.arguments.length; i < len; ++i){\r\n        this[this.arguments[i]] = source[this.arguments[i]]\r\n      }\r\n    }\r\n\r\n    this.inversed = false\r\n\r\n    if(inversed === true){\r\n      this.inversed = true\r\n    }\r\n\r\n  }\r\n\r\n, extend: {\r\n\r\n    arguments: []\r\n  , method: ''\r\n\r\n  , at: function(pos){\r\n\r\n      var params = []\r\n\r\n      for(var i = 0, len = this.arguments.length; i < len; ++i){\r\n        params.push(this[this.arguments[i]])\r\n      }\r\n\r\n      var m = this._undo || new SVG.Matrix()\r\n\r\n      m = new SVG.Matrix().morph(SVG.Matrix.prototype[this.method].apply(m, params)).at(pos)\r\n\r\n      return this.inversed ? m.inverse() : m\r\n\r\n    }\r\n\r\n  , undo: function(o){\r\n      for(var i = 0, len = this.arguments.length; i < len; ++i){\r\n        o[this.arguments[i]] = typeof this[this.arguments[i]] == 'undefined' ? 0 : o[this.arguments[i]]\r\n      }\r\n\r\n      // The method SVG.Matrix.extract which was used before calling this\r\n      // method to obtain a value for the parameter o doesn't return a cx and\r\n      // a cy so we use the ones that were provided to this object at its creation\r\n      o.cx = this.cx\r\n      o.cy = this.cy\r\n\r\n      this._undo = new SVG[capitalize(this.method)](o, true).at(1)\r\n\r\n      return this\r\n    }\r\n\r\n  }\r\n\r\n})\r\n\r\nSVG.Translate = SVG.invent({\r\n\r\n  parent: SVG.Matrix\r\n, inherit: SVG.Transformation\r\n\r\n, create: function(source, inversed){\r\n    this.constructor.apply(this, [].slice.call(arguments))\r\n  }\r\n\r\n, extend: {\r\n    arguments: ['transformedX', 'transformedY']\r\n  , method: 'translate'\r\n  }\r\n\r\n})\r\n\r\nSVG.Rotate = SVG.invent({\r\n\r\n  parent: SVG.Matrix\r\n, inherit: SVG.Transformation\r\n\r\n, create: function(source, inversed){\r\n    this.constructor.apply(this, [].slice.call(arguments))\r\n  }\r\n\r\n, extend: {\r\n    arguments: ['rotation', 'cx', 'cy']\r\n  , method: 'rotate'\r\n  , at: function(pos){\r\n      var m = new SVG.Matrix().rotate(new SVG.Number().morph(this.rotation - (this._undo ? this._undo.rotation : 0)).at(pos), this.cx, this.cy)\r\n      return this.inversed ? m.inverse() : m\r\n    }\r\n  , undo: function(o){\r\n      this._undo = o\r\n      return this\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.Scale = SVG.invent({\r\n\r\n  parent: SVG.Matrix\r\n, inherit: SVG.Transformation\r\n\r\n, create: function(source, inversed){\r\n    this.constructor.apply(this, [].slice.call(arguments))\r\n  }\r\n\r\n, extend: {\r\n    arguments: ['scaleX', 'scaleY', 'cx', 'cy']\r\n  , method: 'scale'\r\n  }\r\n\r\n})\r\n\r\nSVG.Skew = SVG.invent({\r\n\r\n  parent: SVG.Matrix\r\n, inherit: SVG.Transformation\r\n\r\n, create: function(source, inversed){\r\n    this.constructor.apply(this, [].slice.call(arguments))\r\n  }\r\n\r\n, extend: {\r\n    arguments: ['skewX', 'skewY', 'cx', 'cy']\r\n  , method: 'skew'\r\n  }\r\n\r\n})\r\n\nSVG.extend(SVG.Element, {\r\n  // Dynamic style generator\r\n  style: function(s, v) {\r\n    if (arguments.length == 0) {\r\n      // get full style\r\n      return this.node.style.cssText || ''\r\n\r\n    } else if (arguments.length < 2) {\r\n      // apply every style individually if an object is passed\r\n      if (typeof s == 'object') {\r\n        for (v in s) this.style(v, s[v])\r\n\r\n      } else if (SVG.regex.isCss.test(s)) {\r\n        // parse css string\r\n        s = s.split(/\\s*;\\s*/)\r\n          // filter out suffix ; and stuff like ;;\r\n          .filter(function(e) { return !!e })\r\n          .map(function(e){ return e.split(/\\s*:\\s*/) })\r\n\r\n        // apply every definition individually\r\n        while (v = s.pop()) {\r\n          this.style(v[0], v[1])\r\n        }\r\n      } else {\r\n        // act as a getter if the first and only argument is not an object\r\n        return this.node.style[camelCase(s)]\r\n      }\r\n\r\n    } else {\r\n      this.node.style[camelCase(s)] = v === null || SVG.regex.isBlank.test(v) ? '' : v\r\n    }\r\n\r\n    return this\r\n  }\r\n})\nSVG.Parent = SVG.invent({\r\n  // Initialize node\r\n  create: function(element) {\r\n    this.constructor.call(this, element)\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Element\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Returns all child elements\r\n    children: function() {\r\n      return SVG.utils.map(SVG.utils.filterSVGElements(this.node.childNodes), function(node) {\r\n        return SVG.adopt(node)\r\n      })\r\n    }\r\n    // Add given element at a position\r\n  , add: function(element, i) {\r\n      if (i == null)\r\n        this.node.appendChild(element.node)\r\n      else if (element.node != this.node.childNodes[i])\r\n        this.node.insertBefore(element.node, this.node.childNodes[i])\r\n\r\n      return this\r\n    }\r\n    // Basically does the same as `add()` but returns the added element instead\r\n  , put: function(element, i) {\r\n      this.add(element, i)\r\n      return element\r\n    }\r\n    // Checks if the given element is a child\r\n  , has: function(element) {\r\n      return this.index(element) >= 0\r\n    }\r\n    // Gets index of given element\r\n  , index: function(element) {\r\n      return [].slice.call(this.node.childNodes).indexOf(element.node)\r\n    }\r\n    // Get a element at the given index\r\n  , get: function(i) {\r\n      return SVG.adopt(this.node.childNodes[i])\r\n    }\r\n    // Get first child\r\n  , first: function() {\r\n      return this.get(0)\r\n    }\r\n    // Get the last child\r\n  , last: function() {\r\n      return this.get(this.node.childNodes.length - 1)\r\n    }\r\n    // Iterates over all children and invokes a given block\r\n  , each: function(block, deep) {\r\n      var i, il\r\n        , children = this.children()\r\n\r\n      for (i = 0, il = children.length; i < il; i++) {\r\n        if (children[i] instanceof SVG.Element)\r\n          block.apply(children[i], [i, children])\r\n\r\n        if (deep && (children[i] instanceof SVG.Container))\r\n          children[i].each(block, deep)\r\n      }\r\n\r\n      return this\r\n    }\r\n    // Remove a given child\r\n  , removeElement: function(element) {\r\n      this.node.removeChild(element.node)\r\n\r\n      return this\r\n    }\r\n    // Remove all elements in this container\r\n  , clear: function() {\r\n      // remove children\r\n      while(this.node.hasChildNodes())\r\n        this.node.removeChild(this.node.lastChild)\r\n\r\n      // remove defs reference\r\n      delete this._defs\r\n\r\n      return this\r\n    }\r\n  , // Get defs\r\n    defs: function() {\r\n      return this.doc().defs()\r\n    }\r\n  }\r\n\r\n})\r\n\nSVG.extend(SVG.Parent, {\r\n\r\n  ungroup: function(parent, depth) {\r\n    if(depth === 0 || this instanceof SVG.Defs || this.node == SVG.parser.draw) return this\r\n\r\n    parent = parent || (this instanceof SVG.Doc ? this : this.parent(SVG.Parent))\r\n    depth = depth || Infinity\r\n\r\n    this.each(function(){\r\n      if(this instanceof SVG.Defs) return this\r\n      if(this instanceof SVG.Parent) return this.ungroup(parent, depth-1)\r\n      return this.toParent(parent)\r\n    })\r\n\r\n    this.node.firstChild || this.remove()\r\n\r\n    return this\r\n  },\r\n\r\n  flatten: function(parent, depth) {\r\n    return this.ungroup(parent, depth)\r\n  }\r\n\r\n})\nSVG.Container = SVG.invent({\r\n  // Initialize node\r\n  create: function(element) {\r\n    this.constructor.call(this, element)\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Parent\r\n\r\n})\n\r\nSVG.ViewBox = SVG.invent({\r\n\r\n  create: function(source) {\r\n    var i, base = [0, 0, 0, 0]\r\n\r\n    var x, y, width, height, box, view, we, he\r\n      , wm   = 1 // width multiplier\r\n      , hm   = 1 // height multiplier\r\n      , reg  = /[+-]?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?/gi\r\n\r\n    if(source instanceof SVG.Element){\r\n\r\n      we = source\r\n      he = source\r\n      view = (source.attr('viewBox') || '').match(reg)\r\n      box = source.bbox\r\n\r\n      // get dimensions of current node\r\n      width  = new SVG.Number(source.width())\r\n      height = new SVG.Number(source.height())\r\n\r\n      // find nearest non-percentual dimensions\r\n      while (width.unit == '%') {\r\n        wm *= width.value\r\n        width = new SVG.Number(we instanceof SVG.Doc ? we.parent().offsetWidth : we.parent().width())\r\n        we = we.parent()\r\n      }\r\n      while (height.unit == '%') {\r\n        hm *= height.value\r\n        height = new SVG.Number(he instanceof SVG.Doc ? he.parent().offsetHeight : he.parent().height())\r\n        he = he.parent()\r\n      }\r\n\r\n      // ensure defaults\r\n      this.x      = 0\r\n      this.y      = 0\r\n      this.width  = width  * wm\r\n      this.height = height * hm\r\n      this.zoom   = 1\r\n\r\n      if (view) {\r\n        // get width and height from viewbox\r\n        x      = parseFloat(view[0])\r\n        y      = parseFloat(view[1])\r\n        width  = parseFloat(view[2])\r\n        height = parseFloat(view[3])\r\n\r\n        // calculate zoom accoring to viewbox\r\n        this.zoom = ((this.width / this.height) > (width / height)) ?\r\n          this.height / height :\r\n          this.width  / width\r\n\r\n        // calculate real pixel dimensions on parent SVG.Doc element\r\n        this.x      = x\r\n        this.y      = y\r\n        this.width  = width\r\n        this.height = height\r\n\r\n      }\r\n\r\n    }else{\r\n\r\n      // ensure source as object\r\n      source = typeof source === 'string' ?\r\n        source.match(reg).map(function(el){ return parseFloat(el) }) :\r\n      Array.isArray(source) ?\r\n        source :\r\n      typeof source == 'object' ?\r\n        [source.x, source.y, source.width, source.height] :\r\n      arguments.length == 4 ?\r\n        [].slice.call(arguments) :\r\n        base\r\n\r\n      this.x = source[0]\r\n      this.y = source[1]\r\n      this.width = source[2]\r\n      this.height = source[3]\r\n    }\r\n\r\n\r\n  }\r\n\r\n, extend: {\r\n\r\n    toString: function() {\r\n      return this.x + ' ' + this.y + ' ' + this.width + ' ' + this.height\r\n    }\r\n  , morph: function(x, y, width, height){\r\n      this.destination = new SVG.ViewBox(x, y, width, height)\r\n      return this\r\n    }\r\n\r\n  , at: function(pos) {\r\n\r\n      if(!this.destination) return this\r\n\r\n      return new SVG.ViewBox([\r\n          this.x + (this.destination.x - this.x) * pos\r\n        , this.y + (this.destination.y - this.y) * pos\r\n        , this.width + (this.destination.width - this.width) * pos\r\n        , this.height + (this.destination.height - this.height) * pos\r\n      ])\r\n\r\n    }\r\n\r\n  }\r\n\r\n  // Define parent\r\n, parent: SVG.Container\r\n\r\n  // Add parent method\r\n, construct: {\r\n\r\n    // get/set viewbox\r\n    viewbox: function(x, y, width, height) {\r\n      if (arguments.length == 0)\r\n        // act as a getter if there are no arguments\r\n        return new SVG.ViewBox(this)\r\n\r\n      // otherwise act as a setter\r\n      return this.attr('viewBox', new SVG.ViewBox(x, y, width, height))\r\n    }\r\n\r\n  }\r\n\r\n})\n// Add events to elements\r\n\r\n;[ 'click',\r\n  'dblclick',\r\n  'mousedown',\r\n  'mouseup',\r\n  'mouseover',\r\n  'mouseout',\r\n  'mousemove',\r\n  'mouseenter',\r\n  'mouseleave',\r\n  'touchstart',\r\n  'touchmove',\r\n  'touchleave',\r\n  'touchend',\r\n  'touchcancel' ].forEach(function (event) {\r\n    // add event to SVG.Element\r\n    SVG.Element.prototype[event] = function (f) {\r\n      // bind event to element rather than element node\r\n      if (f == null) {\r\n        SVG.off(this, event)\r\n      } else {\r\n        SVG.on(this, event, f)\r\n      }\r\n      return this\r\n    }\r\n  })\r\n\r\nSVG.listenerId = 0\r\n\r\n// Add event binder in the SVG namespace\r\nSVG.on = function (node, events, listener, binding, options) {\r\n  var l = listener.bind(binding || node)\r\n  var n = node instanceof SVG.Element ? node.node : node\r\n\r\n  // ensure instance object for nodes which are not adopted\r\n  n.instance = n.instance || {_events: {}}\r\n\r\n  var bag = n.instance._events\r\n\r\n  // add id to listener\r\n  if (!listener._svgjsListenerId) { listener._svgjsListenerId = ++SVG.listenerId }\r\n\r\n  events.split(SVG.regex.delimiter).forEach(function (event) {\r\n    var ev = event.split('.')[0]\r\n    var ns = event.split('.')[1] || '*'\r\n\r\n    // ensure valid object\r\n    bag[ev] = bag[ev] || {}\r\n    bag[ev][ns] = bag[ev][ns] || {}\r\n\r\n    // reference listener\r\n    bag[ev][ns][listener._svgjsListenerId] = l\r\n\r\n    // add listener\r\n    n.addEventListener(ev, l, options || false)\r\n  })\r\n}\r\n\r\n// Add event unbinder in the SVG namespace\r\nSVG.off = function (node, events, listener, options) {\r\n  var n = node instanceof SVG.Element ? node.node : node\r\n  if (!n.instance) return\r\n\r\n  // listener can be a function or a number\r\n  if (typeof listener === 'function') {\r\n    listener = listener._svgjsListenerId\r\n    if (!listener) return\r\n  }\r\n\r\n  var bag = n.instance._events\r\n\r\n  ;(events || '').split(SVG.regex.delimiter).forEach(function (event) {\r\n    var ev = event && event.split('.')[0]\r\n    var ns = event && event.split('.')[1]\r\n    var namespace, l\r\n\r\n    if (listener) {\r\n      // remove listener reference\r\n      if (bag[ev] && bag[ev][ns || '*']) {\r\n        // removeListener\r\n        n.removeEventListener(ev, bag[ev][ns || '*'][listener], options || false)\r\n\r\n        delete bag[ev][ns || '*'][listener]\r\n      }\r\n    } else if (ev && ns) {\r\n      // remove all listeners for a namespaced event\r\n      if (bag[ev] && bag[ev][ns]) {\r\n        for (l in bag[ev][ns]) { SVG.off(n, [ev, ns].join('.'), l) }\r\n\r\n        delete bag[ev][ns]\r\n      }\r\n    } else if (ns) {\r\n      // remove all listeners for a specific namespace\r\n      for (event in bag) {\r\n        for (namespace in bag[event]) {\r\n          if (ns === namespace) { SVG.off(n, [event, ns].join('.')) }\r\n        }\r\n      }\r\n    } else if (ev) {\r\n      // remove all listeners for the event\r\n      if (bag[ev]) {\r\n        for (namespace in bag[ev]) { SVG.off(n, [ev, namespace].join('.')) }\r\n\r\n        delete bag[ev]\r\n      }\r\n    } else {\r\n      // remove all listeners on a given node\r\n      for (event in bag) { SVG.off(n, event) }\r\n\r\n      n.instance._events = {}\r\n    }\r\n  })\r\n}\r\n\r\nSVG.extend(SVG.Element, {\r\n  // Bind given event to listener\r\n  on: function (event, listener, binding, options) {\r\n    SVG.on(this, event, listener, binding, options)\r\n    return this\r\n  },\r\n  // Unbind event from listener\r\n  off: function (event, listener) {\r\n    SVG.off(this.node, event, listener)\r\n    return this\r\n  },\r\n  fire: function (event, data) {\r\n    // Dispatch event\r\n    if (event instanceof window.Event) {\r\n      this.node.dispatchEvent(event)\r\n    } else {\r\n      this.node.dispatchEvent(event = new SVG.CustomEvent(event, {detail: data, cancelable: true}))\r\n    }\r\n    this._event = event\r\n    return this\r\n  },\r\n  event: function() {\r\n    return this._event\r\n  }\r\n})\r\n\n\r\nSVG.Defs = SVG.invent({\r\n  // Initialize node\r\n  create: 'defs'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n})\nSVG.G = SVG.invent({\r\n  // Initialize node\r\n  create: 'g'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Move over x-axis\r\n    x: function(x) {\r\n      return x == null ? this.transform('x') : this.transform({ x: x - this.x() }, true)\r\n    }\r\n    // Move over y-axis\r\n  , y: function(y) {\r\n      return y == null ? this.transform('y') : this.transform({ y: y - this.y() }, true)\r\n    }\r\n    // Move by center over x-axis\r\n  , cx: function(x) {\r\n      return x == null ? this.gbox().cx : this.x(x - this.gbox().width / 2)\r\n    }\r\n    // Move by center over y-axis\r\n  , cy: function(y) {\r\n      return y == null ? this.gbox().cy : this.y(y - this.gbox().height / 2)\r\n    }\r\n  , gbox: function() {\r\n\r\n      var bbox  = this.bbox()\r\n        , trans = this.transform()\r\n\r\n      bbox.x  += trans.x\r\n      bbox.x2 += trans.x\r\n      bbox.cx += trans.x\r\n\r\n      bbox.y  += trans.y\r\n      bbox.y2 += trans.y\r\n      bbox.cy += trans.y\r\n\r\n      return bbox\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a group element\r\n    group: function() {\r\n      return this.put(new SVG.G)\r\n    }\r\n  }\r\n})\r\n\nSVG.Doc = SVG.invent({\r\n  // Initialize node\r\n  create: function(element) {\r\n    if (element) {\r\n      // ensure the presence of a dom element\r\n      element = typeof element == 'string' ?\r\n        document.getElementById(element) :\r\n        element\r\n\r\n      // If the target is an svg element, use that element as the main wrapper.\r\n      // This allows svg.js to work with svg documents as well.\r\n      if (element.nodeName == 'svg') {\r\n        this.constructor.call(this, element)\r\n      } else {\r\n        this.constructor.call(this, SVG.create('svg'))\r\n        element.appendChild(this.node)\r\n        this.size('100%', '100%')\r\n      }\r\n\r\n      // set svg element attributes and ensure defs node\r\n      this.namespace().defs()\r\n    }\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Add namespaces\r\n    namespace: function() {\r\n      return this\r\n        .attr({ xmlns: SVG.ns, version: '1.1' })\r\n        .attr('xmlns:xlink', SVG.xlink, SVG.xmlns)\r\n        .attr('xmlns:svgjs', SVG.svgjs, SVG.xmlns)\r\n    }\r\n    // Creates and returns defs element\r\n  , defs: function() {\r\n      if (!this._defs) {\r\n        var defs\r\n\r\n        // Find or create a defs element in this instance\r\n        if (defs = this.node.getElementsByTagName('defs')[0])\r\n          this._defs = SVG.adopt(defs)\r\n        else\r\n          this._defs = new SVG.Defs\r\n\r\n        // Make sure the defs node is at the end of the stack\r\n        this.node.appendChild(this._defs.node)\r\n      }\r\n\r\n      return this._defs\r\n    }\r\n    // custom parent method\r\n  , parent: function() {\r\n      if(!this.node.parentNode || this.node.parentNode.nodeName == '#document' || this.node.parentNode.nodeName == '#document-fragment') return null\r\n      return this.node.parentNode\r\n    }\r\n    // Fix for possible sub-pixel offset. See:\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=608812\r\n  , spof: function() {\r\n      var pos = this.node.getScreenCTM()\r\n\r\n      if (pos)\r\n        this\r\n          .style('left', (-pos.e % 1) + 'px')\r\n          .style('top',  (-pos.f % 1) + 'px')\r\n\r\n      return this\r\n    }\r\n\r\n      // Removes the doc from the DOM\r\n  , remove: function() {\r\n      if(this.parent()) {\r\n        this.parent().removeChild(this.node)\r\n      }\r\n\r\n      return this\r\n    }\r\n  , clear: function() {\r\n      // remove children\r\n      while(this.node.hasChildNodes())\r\n        this.node.removeChild(this.node.lastChild)\r\n\r\n      // remove defs reference\r\n      delete this._defs\r\n\r\n      // add back parser\r\n      if(!SVG.parser.draw.parentNode)\r\n        this.node.appendChild(SVG.parser.draw)\r\n\r\n      return this\r\n    }\r\n  , clone: function (parent) {\r\n      // write dom data to the dom so the clone can pickup the data\r\n      this.writeDataToDom()\r\n\r\n      // get reference to node\r\n      var node = this.node\r\n\r\n      // clone element and assign new id\r\n      var clone = assignNewId(node.cloneNode(true))\r\n\r\n      // insert the clone in the given parent or after myself\r\n      if(parent) {\r\n        (parent.node || parent).appendChild(clone.node)\r\n      } else {\r\n        node.parentNode.insertBefore(clone.node, node.nextSibling)\r\n      }\r\n\r\n      return clone\r\n    }\r\n  }\r\n\r\n})\r\n\n// ### This module adds backward / forward functionality to elements.\r\n\r\n//\r\nSVG.extend(SVG.Element, {\r\n  // Get all siblings, including myself\r\n  siblings: function() {\r\n    return this.parent().children()\r\n  }\r\n  // Get the curent position siblings\r\n, position: function() {\r\n    return this.parent().index(this)\r\n  }\r\n  // Get the next element (will return null if there is none)\r\n, next: function() {\r\n    return this.siblings()[this.position() + 1]\r\n  }\r\n  // Get the next element (will return null if there is none)\r\n, previous: function() {\r\n    return this.siblings()[this.position() - 1]\r\n  }\r\n  // Send given element one step forward\r\n, forward: function() {\r\n    var i = this.position() + 1\r\n      , p = this.parent()\r\n\r\n    // move node one step forward\r\n    p.removeElement(this).add(this, i)\r\n\r\n    // make sure defs node is always at the top\r\n    if (p instanceof SVG.Doc)\r\n      p.node.appendChild(p.defs().node)\r\n\r\n    return this\r\n  }\r\n  // Send given element one step backward\r\n, backward: function() {\r\n    var i = this.position()\r\n\r\n    if (i > 0)\r\n      this.parent().removeElement(this).add(this, i - 1)\r\n\r\n    return this\r\n  }\r\n  // Send given element all the way to the front\r\n, front: function() {\r\n    var p = this.parent()\r\n\r\n    // Move node forward\r\n    p.node.appendChild(this.node)\r\n\r\n    // Make sure defs node is always at the top\r\n    if (p instanceof SVG.Doc)\r\n      p.node.appendChild(p.defs().node)\r\n\r\n    return this\r\n  }\r\n  // Send given element all the way to the back\r\n, back: function() {\r\n    if (this.position() > 0)\r\n      this.parent().removeElement(this).add(this, 0)\r\n\r\n    return this\r\n  }\r\n  // Inserts a given element before the targeted element\r\n, before: function(element) {\r\n    element.remove()\r\n\r\n    var i = this.position()\r\n\r\n    this.parent().add(element, i)\r\n\r\n    return this\r\n  }\r\n  // Insters a given element after the targeted element\r\n, after: function(element) {\r\n    element.remove()\r\n\r\n    var i = this.position()\r\n\r\n    this.parent().add(element, i + 1)\r\n\r\n    return this\r\n  }\r\n\r\n})\nSVG.Mask = SVG.invent({\r\n  // Initialize node\r\n  create: function() {\r\n    this.constructor.call(this, SVG.create('mask'))\r\n\r\n    // keep references to masked elements\r\n    this.targets = []\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Unmask all masked elements and remove itself\r\n    remove: function() {\r\n      // unmask all targets\r\n      for (var i = this.targets.length - 1; i >= 0; i--)\r\n        if (this.targets[i])\r\n          this.targets[i].unmask()\r\n      this.targets = []\r\n\r\n      // remove mask from parent\r\n      SVG.Element.prototype.remove.call(this)\r\n\r\n      return this\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create masking element\r\n    mask: function() {\r\n      return this.defs().put(new SVG.Mask)\r\n    }\r\n  }\r\n})\r\n\r\n\r\nSVG.extend(SVG.Element, {\r\n  // Distribute mask to svg element\r\n  maskWith: function(element) {\r\n    // use given mask or create a new one\r\n    this.masker = element instanceof SVG.Mask ? element : this.parent().mask().add(element)\r\n\r\n    // store reverence on self in mask\r\n    this.masker.targets.push(this)\r\n\r\n    // apply mask\r\n    return this.attr('mask', 'url(\"#' + this.masker.attr('id') + '\")')\r\n  }\r\n  // Unmask element\r\n, unmask: function() {\r\n    delete this.masker\r\n    return this.attr('mask', null)\r\n  }\r\n\r\n})\r\n\nSVG.ClipPath = SVG.invent({\r\n  // Initialize node\r\n  create: function() {\r\n    this.constructor.call(this, SVG.create('clipPath'))\r\n\r\n    // keep references to clipped elements\r\n    this.targets = []\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Unclip all clipped elements and remove itself\r\n    remove: function() {\r\n      // unclip all targets\r\n      for (var i = this.targets.length - 1; i >= 0; i--)\r\n        if (this.targets[i])\r\n          this.targets[i].unclip()\r\n      this.targets = []\r\n\r\n      // remove clipPath from parent\r\n      this.parent().removeElement(this)\r\n\r\n      return this\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create clipping element\r\n    clip: function() {\r\n      return this.defs().put(new SVG.ClipPath)\r\n    }\r\n  }\r\n})\r\n\r\n//\r\nSVG.extend(SVG.Element, {\r\n  // Distribute clipPath to svg element\r\n  clipWith: function(element) {\r\n    // use given clip or create a new one\r\n    this.clipper = element instanceof SVG.ClipPath ? element : this.parent().clip().add(element)\r\n\r\n    // store reverence on self in mask\r\n    this.clipper.targets.push(this)\r\n\r\n    // apply mask\r\n    return this.attr('clip-path', 'url(\"#' + this.clipper.attr('id') + '\")')\r\n  }\r\n  // Unclip element\r\n, unclip: function() {\r\n    delete this.clipper\r\n    return this.attr('clip-path', null)\r\n  }\r\n\r\n})\nSVG.Gradient = SVG.invent({\r\n  // Initialize node\r\n  create: function(type) {\r\n    this.constructor.call(this, SVG.create(type + 'Gradient'))\r\n\r\n    // store type\r\n    this.type = type\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Add a color stop\r\n    at: function(offset, color, opacity) {\r\n      return this.put(new SVG.Stop).update(offset, color, opacity)\r\n    }\r\n    // Update gradient\r\n  , update: function(block) {\r\n      // remove all stops\r\n      this.clear()\r\n\r\n      // invoke passed block\r\n      if (typeof block == 'function')\r\n        block.call(this, this)\r\n\r\n      return this\r\n    }\r\n    // Return the fill id\r\n  , fill: function() {\r\n      return 'url(#' + this.id() + ')'\r\n    }\r\n    // Alias string convertion to fill\r\n  , toString: function() {\r\n      return this.fill()\r\n    }\r\n    // custom attr to handle transform\r\n  , attr: function(a, b, c) {\r\n      if(a == 'transform') a = 'gradientTransform'\r\n      return SVG.Container.prototype.attr.call(this, a, b, c)\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create gradient element in defs\r\n    gradient: function(type, block) {\r\n      return this.defs().gradient(type, block)\r\n    }\r\n  }\r\n})\r\n\r\n// Add animatable methods to both gradient and fx module\r\nSVG.extend(SVG.Gradient, SVG.FX, {\r\n  // From position\r\n  from: function(x, y) {\r\n    return (this._target || this).type == 'radial' ?\r\n      this.attr({ fx: new SVG.Number(x), fy: new SVG.Number(y) }) :\r\n      this.attr({ x1: new SVG.Number(x), y1: new SVG.Number(y) })\r\n  }\r\n  // To position\r\n, to: function(x, y) {\r\n    return (this._target || this).type == 'radial' ?\r\n      this.attr({ cx: new SVG.Number(x), cy: new SVG.Number(y) }) :\r\n      this.attr({ x2: new SVG.Number(x), y2: new SVG.Number(y) })\r\n  }\r\n})\r\n\r\n// Base gradient generation\r\nSVG.extend(SVG.Defs, {\r\n  // define gradient\r\n  gradient: function(type, block) {\r\n    return this.put(new SVG.Gradient(type)).update(block)\r\n  }\r\n\r\n})\r\n\r\nSVG.Stop = SVG.invent({\r\n  // Initialize node\r\n  create: 'stop'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Element\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // add color stops\r\n    update: function(o) {\r\n      if (typeof o == 'number' || o instanceof SVG.Number) {\r\n        o = {\r\n          offset:  arguments[0]\r\n        , color:   arguments[1]\r\n        , opacity: arguments[2]\r\n        }\r\n      }\r\n\r\n      // set attributes\r\n      if (o.opacity != null) this.attr('stop-opacity', o.opacity)\r\n      if (o.color   != null) this.attr('stop-color', o.color)\r\n      if (o.offset  != null) this.attr('offset', new SVG.Number(o.offset))\r\n\r\n      return this\r\n    }\r\n  }\r\n\r\n})\r\n\nSVG.Pattern = SVG.invent({\r\n  // Initialize node\r\n  create: 'pattern'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Return the fill id\r\n    fill: function() {\r\n      return 'url(#' + this.id() + ')'\r\n    }\r\n    // Update pattern by rebuilding\r\n  , update: function(block) {\r\n      // remove content\r\n      this.clear()\r\n\r\n      // invoke passed block\r\n      if (typeof block == 'function')\r\n        block.call(this, this)\r\n\r\n      return this\r\n    }\r\n    // Alias string convertion to fill\r\n  , toString: function() {\r\n      return this.fill()\r\n    }\r\n    // custom attr to handle transform\r\n  , attr: function(a, b, c) {\r\n      if(a == 'transform') a = 'patternTransform'\r\n      return SVG.Container.prototype.attr.call(this, a, b, c)\r\n    }\r\n\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create pattern element in defs\r\n    pattern: function(width, height, block) {\r\n      return this.defs().pattern(width, height, block)\r\n    }\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Defs, {\r\n  // Define gradient\r\n  pattern: function(width, height, block) {\r\n    return this.put(new SVG.Pattern).update(block).attr({\r\n      x:            0\r\n    , y:            0\r\n    , width:        width\r\n    , height:       height\r\n    , patternUnits: 'userSpaceOnUse'\r\n    })\r\n  }\r\n\r\n})\nSVG.Shape = SVG.invent({\r\n  // Initialize node\r\n  create: function(element) {\r\n    this.constructor.call(this, element)\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Element\r\n\r\n})\n\r\nSVG.Bare = SVG.invent({\r\n  // Initialize\r\n  create: function(element, inherit) {\r\n    // construct element\r\n    this.constructor.call(this, SVG.create(element))\r\n\r\n    // inherit custom methods\r\n    if (inherit)\r\n      for (var method in inherit.prototype)\r\n        if (typeof inherit.prototype[method] === 'function')\r\n          this[method] = inherit.prototype[method]\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Element\r\n\r\n  // Add methods\r\n, extend: {\r\n    // Insert some plain text\r\n    words: function(text) {\r\n      // remove contents\r\n      while (this.node.hasChildNodes())\r\n        this.node.removeChild(this.node.lastChild)\r\n\r\n      // create text node\r\n      this.node.appendChild(document.createTextNode(text))\r\n\r\n      return this\r\n    }\r\n  }\r\n})\r\n\r\n\r\nSVG.extend(SVG.Parent, {\r\n  // Create an element that is not described by SVG.js\r\n  element: function(element, inherit) {\r\n    return this.put(new SVG.Bare(element, inherit))\r\n  }\r\n})\r\n\nSVG.Symbol = SVG.invent({\r\n  // Initialize node\r\n  create: 'symbol'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n, construct: {\r\n    // create symbol\r\n    symbol: function() {\r\n      return this.put(new SVG.Symbol)\r\n    }\r\n  }\r\n})\r\n\nSVG.Use = SVG.invent({\r\n  // Initialize node\r\n  create: 'use'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Use element as a reference\r\n    element: function(element, file) {\r\n      // Set lined element\r\n      return this.attr('href', (file || '') + '#' + element, SVG.xlink)\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a use element\r\n    use: function(element, file) {\r\n      return this.put(new SVG.Use).element(element, file)\r\n    }\r\n  }\r\n})\nSVG.Rect = SVG.invent({\r\n  // Initialize node\r\n  create: 'rect'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a rect element\r\n    rect: function(width, height) {\r\n      return this.put(new SVG.Rect()).size(width, height)\r\n    }\r\n  }\r\n})\nSVG.Circle = SVG.invent({\r\n  // Initialize node\r\n  create: 'circle'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create circle element, based on ellipse\r\n    circle: function(size) {\r\n      return this.put(new SVG.Circle).rx(new SVG.Number(size).divide(2)).move(0, 0)\r\n    }\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Circle, SVG.FX, {\r\n  // Radius x value\r\n  rx: function(rx) {\r\n    return this.attr('r', rx)\r\n  }\r\n  // Alias radius x value\r\n, ry: function(ry) {\r\n    return this.rx(ry)\r\n  }\r\n})\r\n\r\nSVG.Ellipse = SVG.invent({\r\n  // Initialize node\r\n  create: 'ellipse'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create an ellipse\r\n    ellipse: function(width, height) {\r\n      return this.put(new SVG.Ellipse).size(width, height).move(0, 0)\r\n    }\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Ellipse, SVG.Rect, SVG.FX, {\r\n  // Radius x value\r\n  rx: function(rx) {\r\n    return this.attr('rx', rx)\r\n  }\r\n  // Radius y value\r\n, ry: function(ry) {\r\n    return this.attr('ry', ry)\r\n  }\r\n})\r\n\r\n// Add common method\r\nSVG.extend(SVG.Circle, SVG.Ellipse, {\r\n    // Move over x-axis\r\n    x: function(x) {\r\n      return x == null ? this.cx() - this.rx() : this.cx(x + this.rx())\r\n    }\r\n    // Move over y-axis\r\n  , y: function(y) {\r\n      return y == null ? this.cy() - this.ry() : this.cy(y + this.ry())\r\n    }\r\n    // Move by center over x-axis\r\n  , cx: function(x) {\r\n      return x == null ? this.attr('cx') : this.attr('cx', x)\r\n    }\r\n    // Move by center over y-axis\r\n  , cy: function(y) {\r\n      return y == null ? this.attr('cy') : this.attr('cy', y)\r\n    }\r\n    // Set width of element\r\n  , width: function(width) {\r\n      return width == null ? this.rx() * 2 : this.rx(new SVG.Number(width).divide(2))\r\n    }\r\n    // Set height of element\r\n  , height: function(height) {\r\n      return height == null ? this.ry() * 2 : this.ry(new SVG.Number(height).divide(2))\r\n    }\r\n    // Custom size function\r\n  , size: function(width, height) {\r\n      var p = proportionalSize(this, width, height)\r\n\r\n      return this\r\n        .rx(new SVG.Number(p.width).divide(2))\r\n        .ry(new SVG.Number(p.height).divide(2))\r\n    }\r\n})\nSVG.Line = SVG.invent({\r\n  // Initialize node\r\n  create: 'line'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Get array\r\n    array: function() {\r\n      return new SVG.PointArray([\r\n        [ this.attr('x1'), this.attr('y1') ]\r\n      , [ this.attr('x2'), this.attr('y2') ]\r\n      ])\r\n    }\r\n    // Overwrite native plot() method\r\n  , plot: function(x1, y1, x2, y2) {\r\n      if (x1 == null)\r\n        return this.array()\r\n      else if (typeof y1 !== 'undefined')\r\n        x1 = { x1: x1, y1: y1, x2: x2, y2: y2 }\r\n      else\r\n        x1 = new SVG.PointArray(x1).toLine()\r\n\r\n      return this.attr(x1)\r\n    }\r\n    // Move by left top corner\r\n  , move: function(x, y) {\r\n      return this.attr(this.array().move(x, y).toLine())\r\n    }\r\n    // Set element size to given width and height\r\n  , size: function(width, height) {\r\n      var p = proportionalSize(this, width, height)\r\n\r\n      return this.attr(this.array().size(p.width, p.height).toLine())\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a line element\r\n    line: function(x1, y1, x2, y2) {\r\n      // make sure plot is called as a setter\r\n      // x1 is not necessarily a number, it can also be an array, a string and a SVG.PointArray\r\n      return SVG.Line.prototype.plot.apply(\r\n        this.put(new SVG.Line)\r\n      , x1 != null ? [x1, y1, x2, y2] : [0, 0, 0, 0]\r\n      )\r\n    }\r\n  }\r\n})\r\n\nSVG.Polyline = SVG.invent({\r\n  // Initialize node\r\n  create: 'polyline'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a wrapped polyline element\r\n    polyline: function(p) {\r\n      // make sure plot is called as a setter\r\n      return this.put(new SVG.Polyline).plot(p || new SVG.PointArray)\r\n    }\r\n  }\r\n})\r\n\r\nSVG.Polygon = SVG.invent({\r\n  // Initialize node\r\n  create: 'polygon'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a wrapped polygon element\r\n    polygon: function(p) {\r\n      // make sure plot is called as a setter\r\n      return this.put(new SVG.Polygon).plot(p || new SVG.PointArray)\r\n    }\r\n  }\r\n})\r\n\r\n// Add polygon-specific functions\r\nSVG.extend(SVG.Polyline, SVG.Polygon, {\r\n  // Get array\r\n  array: function() {\r\n    return this._array || (this._array = new SVG.PointArray(this.attr('points')))\r\n  }\r\n  // Plot new path\r\n, plot: function(p) {\r\n    return (p == null) ?\r\n      this.array() :\r\n      this.clear().attr('points', typeof p == 'string' ? p : (this._array = new SVG.PointArray(p)))\r\n  }\r\n  // Clear array cache\r\n, clear: function() {\r\n    delete this._array\r\n    return this\r\n  }\r\n  // Move by left top corner\r\n, move: function(x, y) {\r\n    return this.attr('points', this.array().move(x, y))\r\n  }\r\n  // Set element size to given width and height\r\n, size: function(width, height) {\r\n    var p = proportionalSize(this, width, height)\r\n\r\n    return this.attr('points', this.array().size(p.width, p.height))\r\n  }\r\n\r\n})\r\n\n// unify all point to point elements\r\nSVG.extend(SVG.Line, SVG.Polyline, SVG.Polygon, {\r\n  // Define morphable array\r\n  morphArray:  SVG.PointArray\r\n  // Move by left top corner over x-axis\r\n, x: function(x) {\r\n    return x == null ? this.bbox().x : this.move(x, this.bbox().y)\r\n  }\r\n  // Move by left top corner over y-axis\r\n, y: function(y) {\r\n    return y == null ? this.bbox().y : this.move(this.bbox().x, y)\r\n  }\r\n  // Set width of element\r\n, width: function(width) {\r\n    var b = this.bbox()\r\n\r\n    return width == null ? b.width : this.size(width, b.height)\r\n  }\r\n  // Set height of element\r\n, height: function(height) {\r\n    var b = this.bbox()\r\n\r\n    return height == null ? b.height : this.size(b.width, height)\r\n  }\r\n})\nSVG.Path = SVG.invent({\r\n  // Initialize node\r\n  create: 'path'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Define morphable array\r\n    morphArray:  SVG.PathArray\r\n    // Get array\r\n  , array: function() {\r\n      return this._array || (this._array = new SVG.PathArray(this.attr('d')))\r\n    }\r\n    // Plot new path\r\n  , plot: function(d) {\r\n      return (d == null) ?\r\n        this.array() :\r\n        this.clear().attr('d', typeof d == 'string' ? d : (this._array = new SVG.PathArray(d)))\r\n    }\r\n    // Clear array cache\r\n  , clear: function() {\r\n      delete this._array\r\n      return this\r\n    }\r\n    // Move by left top corner\r\n  , move: function(x, y) {\r\n      return this.attr('d', this.array().move(x, y))\r\n    }\r\n    // Move by left top corner over x-axis\r\n  , x: function(x) {\r\n      return x == null ? this.bbox().x : this.move(x, this.bbox().y)\r\n    }\r\n    // Move by left top corner over y-axis\r\n  , y: function(y) {\r\n      return y == null ? this.bbox().y : this.move(this.bbox().x, y)\r\n    }\r\n    // Set element size to given width and height\r\n  , size: function(width, height) {\r\n      var p = proportionalSize(this, width, height)\r\n\r\n      return this.attr('d', this.array().size(p.width, p.height))\r\n    }\r\n    // Set width of element\r\n  , width: function(width) {\r\n      return width == null ? this.bbox().width : this.size(width, this.bbox().height)\r\n    }\r\n    // Set height of element\r\n  , height: function(height) {\r\n      return height == null ? this.bbox().height : this.size(this.bbox().width, height)\r\n    }\r\n\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a wrapped path element\r\n    path: function(d) {\r\n      // make sure plot is called as a setter\r\n      return this.put(new SVG.Path).plot(d || new SVG.PathArray)\r\n    }\r\n  }\r\n})\r\n\nSVG.Image = SVG.invent({\r\n  // Initialize node\r\n  create: 'image'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // (re)load image\r\n    load: function(url) {\r\n      if (!url) return this\r\n\r\n      var self = this\r\n        , img  = new window.Image()\r\n\r\n      // preload image\r\n      SVG.on(img, 'load', function() {\r\n        SVG.off(img)\r\n\r\n        var p = self.parent(SVG.Pattern)\r\n\r\n        if(p === null) return\r\n\r\n        // ensure image size\r\n        if (self.width() == 0 && self.height() == 0)\r\n          self.size(img.width, img.height)\r\n\r\n        // ensure pattern size if not set\r\n        if (p && p.width() == 0 && p.height() == 0)\r\n          p.size(self.width(), self.height())\r\n\r\n        // callback\r\n        if (typeof self._loaded === 'function')\r\n          self._loaded.call(self, {\r\n            width:  img.width\r\n          , height: img.height\r\n          , ratio:  img.width / img.height\r\n          , url:    url\r\n          })\r\n      })\r\n\r\n      SVG.on(img, 'error', function(e){\r\n        SVG.off(img)\r\n\r\n        if (typeof self._error === 'function'){\r\n            self._error.call(self, e)\r\n        }\r\n      })\r\n\r\n      return this.attr('href', (img.src = this.src = url), SVG.xlink)\r\n    }\r\n    // Add loaded callback\r\n  , loaded: function(loaded) {\r\n      this._loaded = loaded\r\n      return this\r\n    }\r\n\r\n  , error: function(error) {\r\n      this._error = error\r\n      return this\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // create image element, load image and set its size\r\n    image: function(source, width, height) {\r\n      return this.put(new SVG.Image).load(source).size(width || 0, height || width || 0)\r\n    }\r\n  }\r\n\r\n})\nSVG.Text = SVG.invent({\r\n  // Initialize node\r\n  create: function() {\r\n    this.constructor.call(this, SVG.create('text'))\r\n\r\n    this.dom.leading = new SVG.Number(1.3)    // store leading value for rebuilding\r\n    this._rebuild = true                      // enable automatic updating of dy values\r\n    this._build   = false                     // disable build mode for adding multiple lines\r\n\r\n    // set default font\r\n    this.attr('font-family', SVG.defaults.attrs['font-family'])\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Move over x-axis\r\n    x: function(x) {\r\n      // act as getter\r\n      if (x == null)\r\n        return this.attr('x')\r\n\r\n      return this.attr('x', x)\r\n    }\r\n    // Move over y-axis\r\n  , y: function(y) {\r\n      var oy = this.attr('y')\r\n        , o  = typeof oy === 'number' ? oy - this.bbox().y : 0\r\n\r\n      // act as getter\r\n      if (y == null)\r\n        return typeof oy === 'number' ? oy - o : oy\r\n\r\n      return this.attr('y', typeof y.valueOf() === 'number' ? y + o : y)\r\n    }\r\n    // Move center over x-axis\r\n  , cx: function(x) {\r\n      return x == null ? this.bbox().cx : this.x(x - this.bbox().width / 2)\r\n    }\r\n    // Move center over y-axis\r\n  , cy: function(y) {\r\n      return y == null ? this.bbox().cy : this.y(y - this.bbox().height / 2)\r\n    }\r\n    // Set the text content\r\n  , text: function(text) {\r\n      // act as getter\r\n      if (typeof text === 'undefined'){\r\n        var text = ''\r\n        var children = this.node.childNodes\r\n        for(var i = 0, len = children.length; i < len; ++i){\r\n\r\n          // add newline if its not the first child and newLined is set to true\r\n          if(i != 0 && children[i].nodeType != 3 && SVG.adopt(children[i]).dom.newLined == true){\r\n            text += '\\n'\r\n          }\r\n\r\n          // add content of this node\r\n          text += children[i].textContent\r\n        }\r\n\r\n        return text\r\n      }\r\n\r\n      // remove existing content\r\n      this.clear().build(true)\r\n\r\n      if (typeof text === 'function') {\r\n        // call block\r\n        text.call(this, this)\r\n\r\n      } else {\r\n        // store text and make sure text is not blank\r\n        text = text.split('\\n')\r\n\r\n        // build new lines\r\n        for (var i = 0, il = text.length; i < il; i++)\r\n          this.tspan(text[i]).newLine()\r\n      }\r\n\r\n      // disable build mode and rebuild lines\r\n      return this.build(false).rebuild()\r\n    }\r\n    // Set font size\r\n  , size: function(size) {\r\n      return this.attr('font-size', size).rebuild()\r\n    }\r\n    // Set / get leading\r\n  , leading: function(value) {\r\n      // act as getter\r\n      if (value == null)\r\n        return this.dom.leading\r\n\r\n      // act as setter\r\n      this.dom.leading = new SVG.Number(value)\r\n\r\n      return this.rebuild()\r\n    }\r\n    // Get all the first level lines\r\n  , lines: function() {\r\n      var node = (this.textPath && this.textPath() || this).node\r\n\r\n      // filter tspans and map them to SVG.js instances\r\n      var lines = SVG.utils.map(SVG.utils.filterSVGElements(node.childNodes), function(el){\r\n        return SVG.adopt(el)\r\n      })\r\n\r\n      // return an instance of SVG.set\r\n      return new SVG.Set(lines)\r\n    }\r\n    // Rebuild appearance type\r\n  , rebuild: function(rebuild) {\r\n      // store new rebuild flag if given\r\n      if (typeof rebuild == 'boolean')\r\n        this._rebuild = rebuild\r\n\r\n      // define position of all lines\r\n      if (this._rebuild) {\r\n        var self = this\r\n          , blankLineOffset = 0\r\n          , dy = this.dom.leading * new SVG.Number(this.attr('font-size'))\r\n\r\n        this.lines().each(function() {\r\n          if (this.dom.newLined) {\r\n            if (!self.textPath())\r\n              this.attr('x', self.attr('x'))\r\n            if(this.text() == '\\n') {\r\n              blankLineOffset += dy\r\n            }else{\r\n              this.attr('dy', dy + blankLineOffset)\r\n              blankLineOffset = 0\r\n            }\r\n          }\r\n        })\r\n\r\n        this.fire('rebuild')\r\n      }\r\n\r\n      return this\r\n    }\r\n    // Enable / disable build mode\r\n  , build: function(build) {\r\n      this._build = !!build\r\n      return this\r\n    }\r\n    // overwrite method from parent to set data properly\r\n  , setData: function(o){\r\n      this.dom = o\r\n      this.dom.leading = new SVG.Number(o.leading || 1.3)\r\n      return this\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create text element\r\n    text: function(text) {\r\n      return this.put(new SVG.Text).text(text)\r\n    }\r\n    // Create plain text element\r\n  , plain: function(text) {\r\n      return this.put(new SVG.Text).plain(text)\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.Tspan = SVG.invent({\r\n  // Initialize node\r\n  create: 'tspan'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Set text content\r\n    text: function(text) {\r\n      if(text == null) return this.node.textContent + (this.dom.newLined ? '\\n' : '')\r\n\r\n      typeof text === 'function' ? text.call(this, this) : this.plain(text)\r\n\r\n      return this\r\n    }\r\n    // Shortcut dx\r\n  , dx: function(dx) {\r\n      return this.attr('dx', dx)\r\n    }\r\n    // Shortcut dy\r\n  , dy: function(dy) {\r\n      return this.attr('dy', dy)\r\n    }\r\n    // Create new line\r\n  , newLine: function() {\r\n      // fetch text parent\r\n      var t = this.parent(SVG.Text)\r\n\r\n      // mark new line\r\n      this.dom.newLined = true\r\n\r\n      // apply new hy¡n\r\n      return this.dy(t.dom.leading * t.attr('font-size')).attr('x', t.x())\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.extend(SVG.Text, SVG.Tspan, {\r\n  // Create plain text node\r\n  plain: function(text) {\r\n    // clear if build mode is disabled\r\n    if (this._build === false)\r\n      this.clear()\r\n\r\n    // create text node\r\n    this.node.appendChild(document.createTextNode(text))\r\n\r\n    return this\r\n  }\r\n  // Create a tspan\r\n, tspan: function(text) {\r\n    var node  = (this.textPath && this.textPath() || this).node\r\n      , tspan = new SVG.Tspan\r\n\r\n    // clear if build mode is disabled\r\n    if (this._build === false)\r\n      this.clear()\r\n\r\n    // add new tspan\r\n    node.appendChild(tspan.node)\r\n\r\n    return tspan.text(text)\r\n  }\r\n  // Clear all lines\r\n, clear: function() {\r\n    var node = (this.textPath && this.textPath() || this).node\r\n\r\n    // remove existing child nodes\r\n    while (node.hasChildNodes())\r\n      node.removeChild(node.lastChild)\r\n\r\n    return this\r\n  }\r\n  // Get length of text element\r\n, length: function() {\r\n    return this.node.getComputedTextLength()\r\n  }\r\n})\r\n\nSVG.TextPath = SVG.invent({\r\n  // Initialize node\r\n  create: 'textPath'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Parent\r\n\r\n  // Define parent class\r\n, parent: SVG.Text\r\n\r\n  // Add parent method\r\n, construct: {\r\n    morphArray: SVG.PathArray\r\n    // Create path for text to run on\r\n  , path: function(d) {\r\n      // create textPath element\r\n      var path  = new SVG.TextPath\r\n        , track = this.doc().defs().path(d)\r\n\r\n      // move lines to textpath\r\n      while (this.node.hasChildNodes())\r\n        path.node.appendChild(this.node.firstChild)\r\n\r\n      // add textPath element as child node\r\n      this.node.appendChild(path.node)\r\n\r\n      // link textPath to path and add content\r\n      path.attr('href', '#' + track, SVG.xlink)\r\n\r\n      return this\r\n    }\r\n    // return the array of the path track element\r\n  , array: function() {\r\n      var track = this.track()\r\n\r\n      return track ? track.array() : null\r\n    }\r\n    // Plot path if any\r\n  , plot: function(d) {\r\n      var track = this.track()\r\n        , pathArray = null\r\n\r\n      if (track) {\r\n        pathArray = track.plot(d)\r\n      }\r\n\r\n      return (d == null) ? pathArray : this\r\n    }\r\n    // Get the path track element\r\n  , track: function() {\r\n      var path = this.textPath()\r\n\r\n      if (path)\r\n        return path.reference('href')\r\n    }\r\n    // Get the textPath child\r\n  , textPath: function() {\r\n      if (this.node.firstChild && this.node.firstChild.nodeName == 'textPath')\r\n        return SVG.adopt(this.node.firstChild)\r\n    }\r\n  }\r\n})\r\n\nSVG.Nested = SVG.invent({\r\n  // Initialize node\r\n  create: function() {\r\n    this.constructor.call(this, SVG.create('svg'))\r\n\r\n    this.style('overflow', 'visible')\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create nested svg document\r\n    nested: function() {\r\n      return this.put(new SVG.Nested)\r\n    }\r\n  }\r\n})\nSVG.A = SVG.invent({\r\n  // Initialize node\r\n  create: 'a'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Link url\r\n    to: function(url) {\r\n      return this.attr('href', url, SVG.xlink)\r\n    }\r\n    // Link show attribute\r\n  , show: function(target) {\r\n      return this.attr('show', target, SVG.xlink)\r\n    }\r\n    // Link target attribute\r\n  , target: function(target) {\r\n      return this.attr('target', target)\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a hyperlink element\r\n    link: function(url) {\r\n      return this.put(new SVG.A).to(url)\r\n    }\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Element, {\r\n  // Create a hyperlink element\r\n  linkTo: function(url) {\r\n    var link = new SVG.A\r\n\r\n    if (typeof url == 'function')\r\n      url.call(link, link)\r\n    else\r\n      link.to(url)\r\n\r\n    return this.parent().put(link).put(this)\r\n  }\r\n\r\n})\nSVG.Marker = SVG.invent({\r\n  // Initialize node\r\n  create: 'marker'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Set width of element\r\n    width: function(width) {\r\n      return this.attr('markerWidth', width)\r\n    }\r\n    // Set height of element\r\n  , height: function(height) {\r\n      return this.attr('markerHeight', height)\r\n    }\r\n    // Set marker refX and refY\r\n  , ref: function(x, y) {\r\n      return this.attr('refX', x).attr('refY', y)\r\n    }\r\n    // Update marker\r\n  , update: function(block) {\r\n      // remove all content\r\n      this.clear()\r\n\r\n      // invoke passed block\r\n      if (typeof block == 'function')\r\n        block.call(this, this)\r\n\r\n      return this\r\n    }\r\n    // Return the fill id\r\n  , toString: function() {\r\n      return 'url(#' + this.id() + ')'\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    marker: function(width, height, block) {\r\n      // Create marker element in defs\r\n      return this.defs().marker(width, height, block)\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.extend(SVG.Defs, {\r\n  // Create marker\r\n  marker: function(width, height, block) {\r\n    // Set default viewbox to match the width and height, set ref to cx and cy and set orient to auto\r\n    return this.put(new SVG.Marker)\r\n      .size(width, height)\r\n      .ref(width / 2, height / 2)\r\n      .viewbox(0, 0, width, height)\r\n      .attr('orient', 'auto')\r\n      .update(block)\r\n  }\r\n\r\n})\r\n\r\nSVG.extend(SVG.Line, SVG.Polyline, SVG.Polygon, SVG.Path, {\r\n  // Create and attach markers\r\n  marker: function(marker, width, height, block) {\r\n    var attr = ['marker']\r\n\r\n    // Build attribute name\r\n    if (marker != 'all') attr.push(marker)\r\n    attr = attr.join('-')\r\n\r\n    // Set marker attribute\r\n    marker = arguments[1] instanceof SVG.Marker ?\r\n      arguments[1] :\r\n      this.doc().marker(width, height, block)\r\n\r\n    return this.attr(attr, marker)\r\n  }\r\n\r\n})\n// Define list of available attributes for stroke and fill\r\nvar sugar = {\r\n  stroke: ['color', 'width', 'opacity', 'linecap', 'linejoin', 'miterlimit', 'dasharray', 'dashoffset']\r\n, fill:   ['color', 'opacity', 'rule']\r\n, prefix: function(t, a) {\r\n    return a == 'color' ? t : t + '-' + a\r\n  }\r\n}\r\n\r\n// Add sugar for fill and stroke\r\n;['fill', 'stroke'].forEach(function(m) {\r\n  var i, extension = {}\r\n\r\n  extension[m] = function(o) {\r\n    if (typeof o == 'undefined')\r\n      return this\r\n    if (typeof o == 'string' || SVG.Color.isRgb(o) || (o && typeof o.fill === 'function'))\r\n      this.attr(m, o)\r\n\r\n    else\r\n      // set all attributes from sugar.fill and sugar.stroke list\r\n      for (i = sugar[m].length - 1; i >= 0; i--)\r\n        if (o[sugar[m][i]] != null)\r\n          this.attr(sugar.prefix(m, sugar[m][i]), o[sugar[m][i]])\r\n\r\n    return this\r\n  }\r\n\r\n  SVG.extend(SVG.Element, SVG.FX, extension)\r\n\r\n})\r\n\r\nSVG.extend(SVG.Element, SVG.FX, {\r\n  // Map rotation to transform\r\n  rotate: function(d, cx, cy) {\r\n    return this.transform({ rotation: d, cx: cx, cy: cy })\r\n  }\r\n  // Map skew to transform\r\n, skew: function(x, y, cx, cy) {\r\n    return arguments.length == 1  || arguments.length == 3 ?\r\n      this.transform({ skew: x, cx: y, cy: cx }) :\r\n      this.transform({ skewX: x, skewY: y, cx: cx, cy: cy })\r\n  }\r\n  // Map scale to transform\r\n, scale: function(x, y, cx, cy) {\r\n    return arguments.length == 1  || arguments.length == 3 ?\r\n      this.transform({ scale: x, cx: y, cy: cx }) :\r\n      this.transform({ scaleX: x, scaleY: y, cx: cx, cy: cy })\r\n  }\r\n  // Map translate to transform\r\n, translate: function(x, y) {\r\n    return this.transform({ x: x, y: y })\r\n  }\r\n  // Map flip to transform\r\n, flip: function(a, o) {\r\n    o = typeof a == 'number' ? a : o\r\n    return this.transform({ flip: a || 'both', offset: o })\r\n  }\r\n  // Map matrix to transform\r\n, matrix: function(m) {\r\n    return this.attr('transform', new SVG.Matrix(arguments.length == 6 ? [].slice.call(arguments) : m))\r\n  }\r\n  // Opacity\r\n, opacity: function(value) {\r\n    return this.attr('opacity', value)\r\n  }\r\n  // Relative move over x axis\r\n, dx: function(x) {\r\n    return this.x(new SVG.Number(x).plus(this instanceof SVG.FX ? 0 : this.x()), true)\r\n  }\r\n  // Relative move over y axis\r\n, dy: function(y) {\r\n    return this.y(new SVG.Number(y).plus(this instanceof SVG.FX ? 0 : this.y()), true)\r\n  }\r\n  // Relative move over x and y axes\r\n, dmove: function(x, y) {\r\n    return this.dx(x).dy(y)\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Rect, SVG.Ellipse, SVG.Circle, SVG.Gradient, SVG.FX, {\r\n  // Add x and y radius\r\n  radius: function(x, y) {\r\n    var type = (this._target || this).type;\r\n    return type == 'radial' || type == 'circle' ?\r\n      this.attr('r', new SVG.Number(x)) :\r\n      this.rx(x).ry(y == null ? x : y)\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Path, {\r\n  // Get path length\r\n  length: function() {\r\n    return this.node.getTotalLength()\r\n  }\r\n  // Get point at length\r\n, pointAt: function(length) {\r\n    return this.node.getPointAtLength(length)\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Parent, SVG.Text, SVG.Tspan, SVG.FX, {\r\n  // Set font\r\n  font: function(a, v) {\r\n    if (typeof a == 'object') {\r\n      for (v in a) this.font(v, a[v])\r\n    }\r\n\r\n    return a == 'leading' ?\r\n        this.leading(v) :\r\n      a == 'anchor' ?\r\n        this.attr('text-anchor', v) :\r\n      a == 'size' || a == 'family' || a == 'weight' || a == 'stretch' || a == 'variant' || a == 'style' ?\r\n        this.attr('font-'+ a, v) :\r\n        this.attr(a, v)\r\n  }\r\n})\r\n\nSVG.Set = SVG.invent({\r\n  // Initialize\r\n  create: function(members) {\r\n    if (members instanceof SVG.Set) {\r\n      this.members = members.members.slice()\r\n    } else {\r\n      Array.isArray(members) ? this.members = members : this.clear()\r\n    }\r\n  }\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Add element to set\r\n    add: function() {\r\n      var i, il, elements = [].slice.call(arguments)\r\n\r\n      for (i = 0, il = elements.length; i < il; i++)\r\n        this.members.push(elements[i])\r\n\r\n      return this\r\n    }\r\n    // Remove element from set\r\n  , remove: function(element) {\r\n      var i = this.index(element)\r\n\r\n      // remove given child\r\n      if (i > -1)\r\n        this.members.splice(i, 1)\r\n\r\n      return this\r\n    }\r\n    // Iterate over all members\r\n  , each: function(block) {\r\n      for (var i = 0, il = this.members.length; i < il; i++)\r\n        block.apply(this.members[i], [i, this.members])\r\n\r\n      return this\r\n    }\r\n    // Restore to defaults\r\n  , clear: function() {\r\n      // initialize store\r\n      this.members = []\r\n\r\n      return this\r\n    }\r\n    // Get the length of a set\r\n  , length: function() {\r\n      return this.members.length\r\n    }\r\n    // Checks if a given element is present in set\r\n  , has: function(element) {\r\n      return this.index(element) >= 0\r\n    }\r\n    // retuns index of given element in set\r\n  , index: function(element) {\r\n      return this.members.indexOf(element)\r\n    }\r\n    // Get member at given index\r\n  , get: function(i) {\r\n      return this.members[i]\r\n    }\r\n    // Get first member\r\n  , first: function() {\r\n      return this.get(0)\r\n    }\r\n    // Get last member\r\n  , last: function() {\r\n      return this.get(this.members.length - 1)\r\n    }\r\n    // Default value\r\n  , valueOf: function() {\r\n      return this.members\r\n    }\r\n    // Get the bounding box of all members included or empty box if set has no items\r\n  , bbox: function(){\r\n      // return an empty box of there are no members\r\n      if (this.members.length == 0)\r\n        return new SVG.RBox()\r\n\r\n      // get the first rbox and update the target bbox\r\n      var rbox = this.members[0].rbox(this.members[0].doc())\r\n\r\n      this.each(function() {\r\n        // user rbox for correct position and visual representation\r\n        rbox = rbox.merge(this.rbox(this.doc()))\r\n      })\r\n\r\n      return rbox\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a new set\r\n    set: function(members) {\r\n      return new SVG.Set(members)\r\n    }\r\n  }\r\n})\r\n\r\nSVG.FX.Set = SVG.invent({\r\n  // Initialize node\r\n  create: function(set) {\r\n    // store reference to set\r\n    this.set = set\r\n  }\r\n\r\n})\r\n\r\n// Alias methods\r\nSVG.Set.inherit = function() {\r\n  var m\r\n    , methods = []\r\n\r\n  // gather shape methods\r\n  for(var m in SVG.Shape.prototype)\r\n    if (typeof SVG.Shape.prototype[m] == 'function' && typeof SVG.Set.prototype[m] != 'function')\r\n      methods.push(m)\r\n\r\n  // apply shape aliasses\r\n  methods.forEach(function(method) {\r\n    SVG.Set.prototype[method] = function() {\r\n      for (var i = 0, il = this.members.length; i < il; i++)\r\n        if (this.members[i] && typeof this.members[i][method] == 'function')\r\n          this.members[i][method].apply(this.members[i], arguments)\r\n\r\n      return method == 'animate' ? (this.fx || (this.fx = new SVG.FX.Set(this))) : this\r\n    }\r\n  })\r\n\r\n  // clear methods for the next round\r\n  methods = []\r\n\r\n  // gather fx methods\r\n  for(var m in SVG.FX.prototype)\r\n    if (typeof SVG.FX.prototype[m] == 'function' && typeof SVG.FX.Set.prototype[m] != 'function')\r\n      methods.push(m)\r\n\r\n  // apply fx aliasses\r\n  methods.forEach(function(method) {\r\n    SVG.FX.Set.prototype[method] = function() {\r\n      for (var i = 0, il = this.set.members.length; i < il; i++)\r\n        this.set.members[i].fx[method].apply(this.set.members[i].fx, arguments)\r\n\r\n      return this\r\n    }\r\n  })\r\n}\r\n\n\r\nSVG.extend(SVG.Element, {\r\n  // Store data values on svg nodes\r\n  data: function(a, v, r) {\r\n    if (typeof a == 'object') {\r\n      for (v in a)\r\n        this.data(v, a[v])\r\n\r\n    } else if (arguments.length < 2) {\r\n      try {\r\n        return JSON.parse(this.attr('data-' + a))\r\n      } catch(e) {\r\n        return this.attr('data-' + a)\r\n      }\r\n\r\n    } else {\r\n      this.attr(\r\n        'data-' + a\r\n      , v === null ?\r\n          null :\r\n        r === true || typeof v === 'string' || typeof v === 'number' ?\r\n          v :\r\n          JSON.stringify(v)\r\n      )\r\n    }\r\n\r\n    return this\r\n  }\r\n})\nSVG.extend(SVG.Element, {\r\n  // Remember arbitrary data\r\n  remember: function(k, v) {\r\n    // remember every item in an object individually\r\n    if (typeof arguments[0] == 'object')\r\n      for (var v in k)\r\n        this.remember(v, k[v])\r\n\r\n    // retrieve memory\r\n    else if (arguments.length == 1)\r\n      return this.memory()[k]\r\n\r\n    // store memory\r\n    else\r\n      this.memory()[k] = v\r\n\r\n    return this\r\n  }\r\n\r\n  // Erase a given memory\r\n, forget: function() {\r\n    if (arguments.length == 0)\r\n      this._memory = {}\r\n    else\r\n      for (var i = arguments.length - 1; i >= 0; i--)\r\n        delete this.memory()[arguments[i]]\r\n\r\n    return this\r\n  }\r\n\r\n  // Initialize or return local memory object\r\n, memory: function() {\r\n    return this._memory || (this._memory = {})\r\n  }\r\n\r\n})\n// Method for getting an element by id\r\nSVG.get = function(id) {\r\n  var node = document.getElementById(idFromReference(id) || id)\r\n  return SVG.adopt(node)\r\n}\r\n\r\n// Select elements by query string\r\nSVG.select = function(query, parent) {\r\n  return new SVG.Set(\r\n    SVG.utils.map((parent || document).querySelectorAll(query), function(node) {\r\n      return SVG.adopt(node)\r\n    })\r\n  )\r\n}\r\n\r\nSVG.extend(SVG.Parent, {\r\n  // Scoped select method\r\n  select: function(query) {\r\n    return SVG.select(query, this.node)\r\n  }\r\n\r\n})\nfunction pathRegReplace(a, b, c, d) {\r\n  return c + d.replace(SVG.regex.dots, ' .')\r\n}\r\n\r\n// creates deep clone of array\r\nfunction array_clone(arr){\r\n  var clone = arr.slice(0)\r\n  for(var i = clone.length; i--;){\r\n    if(Array.isArray(clone[i])){\r\n      clone[i] = array_clone(clone[i])\r\n    }\r\n  }\r\n  return clone\r\n}\r\n\r\n// tests if a given element is instance of an object\r\nfunction is(el, obj){\r\n  return el instanceof obj\r\n}\r\n\r\n// tests if a given selector matches an element\r\nfunction matches(el, selector) {\r\n  return (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector).call(el, selector);\r\n}\r\n\r\n// Convert dash-separated-string to camelCase\r\nfunction camelCase(s) {\r\n  return s.toLowerCase().replace(/-(.)/g, function(m, g) {\r\n    return g.toUpperCase()\r\n  })\r\n}\r\n\r\n// Capitalize first letter of a string\r\nfunction capitalize(s) {\r\n  return s.charAt(0).toUpperCase() + s.slice(1)\r\n}\r\n\r\n// Ensure to six-based hex\r\nfunction fullHex(hex) {\r\n  return hex.length == 4 ?\r\n    [ '#',\r\n      hex.substring(1, 2), hex.substring(1, 2)\r\n    , hex.substring(2, 3), hex.substring(2, 3)\r\n    , hex.substring(3, 4), hex.substring(3, 4)\r\n    ].join('') : hex\r\n}\r\n\r\n// Component to hex value\r\nfunction compToHex(comp) {\r\n  var hex = comp.toString(16)\r\n  return hex.length == 1 ? '0' + hex : hex\r\n}\r\n\r\n// Calculate proportional width and height values when necessary\r\nfunction proportionalSize(element, width, height) {\r\n  if (width == null || height == null) {\r\n    var box = element.bbox()\r\n\r\n    if (width == null)\r\n      width = box.width / box.height * height\r\n    else if (height == null)\r\n      height = box.height / box.width * width\r\n  }\r\n\r\n  return {\r\n    width:  width\r\n  , height: height\r\n  }\r\n}\r\n\r\n// Delta transform point\r\nfunction deltaTransformPoint(matrix, x, y) {\r\n  return {\r\n    x: x * matrix.a + y * matrix.c + 0\r\n  , y: x * matrix.b + y * matrix.d + 0\r\n  }\r\n}\r\n\r\n// Map matrix array to object\r\nfunction arrayToMatrix(a) {\r\n  return { a: a[0], b: a[1], c: a[2], d: a[3], e: a[4], f: a[5] }\r\n}\r\n\r\n// Parse matrix if required\r\nfunction parseMatrix(matrix) {\r\n  if (!(matrix instanceof SVG.Matrix))\r\n    matrix = new SVG.Matrix(matrix)\r\n\r\n  return matrix\r\n}\r\n\r\n// Add centre point to transform object\r\nfunction ensureCentre(o, target) {\r\n  o.cx = o.cx == null ? target.bbox().cx : o.cx\r\n  o.cy = o.cy == null ? target.bbox().cy : o.cy\r\n}\r\n\r\n// PathArray Helpers\r\nfunction arrayToString(a) {\r\n  for (var i = 0, il = a.length, s = ''; i < il; i++) {\r\n    s += a[i][0]\r\n\r\n    if (a[i][1] != null) {\r\n      s += a[i][1]\r\n\r\n      if (a[i][2] != null) {\r\n        s += ' '\r\n        s += a[i][2]\r\n\r\n        if (a[i][3] != null) {\r\n          s += ' '\r\n          s += a[i][3]\r\n          s += ' '\r\n          s += a[i][4]\r\n\r\n          if (a[i][5] != null) {\r\n            s += ' '\r\n            s += a[i][5]\r\n            s += ' '\r\n            s += a[i][6]\r\n\r\n            if (a[i][7] != null) {\r\n              s += ' '\r\n              s += a[i][7]\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return s + ' '\r\n}\r\n\r\n// Deep new id assignment\r\nfunction assignNewId(node) {\r\n  // do the same for SVG child nodes as well\r\n  for (var i = node.childNodes.length - 1; i >= 0; i--)\r\n    if (node.childNodes[i] instanceof window.SVGElement)\r\n      assignNewId(node.childNodes[i])\r\n\r\n  return SVG.adopt(node).id(SVG.eid(node.nodeName))\r\n}\r\n\r\n// Add more bounding box properties\r\nfunction fullBox(b) {\r\n  if (b.x == null) {\r\n    b.x      = 0\r\n    b.y      = 0\r\n    b.width  = 0\r\n    b.height = 0\r\n  }\r\n\r\n  b.w  = b.width\r\n  b.h  = b.height\r\n  b.x2 = b.x + b.width\r\n  b.y2 = b.y + b.height\r\n  b.cx = b.x + b.width / 2\r\n  b.cy = b.y + b.height / 2\r\n\r\n  return b\r\n}\r\n\r\n// Get id from reference string\r\nfunction idFromReference(url) {\r\n  var m = (url || '').toString().match(SVG.regex.reference)\r\n\r\n  if (m) return m[1]\r\n}\r\n\r\n// If values like 1e-88 are passed, this is not a valid 32 bit float,\r\n// but in those cases, we are so close to 0 that 0 works well!\r\nfunction float32String(v) {\r\n  return Math.abs(v) > 1e-37 ? v : 0\r\n}\r\n\r\n// Create matrix array for looping\r\nvar abcdef = 'abcdef'.split('')\r\n\n// Add CustomEvent to IE9 and IE10\r\nif (typeof window.CustomEvent !== 'function') {\r\n  // Code from: https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent\r\n  var CustomEventPoly = function(event, options) {\r\n    options = options || { bubbles: false, cancelable: false, detail: undefined }\r\n    var e = document.createEvent('CustomEvent')\r\n    e.initCustomEvent(event, options.bubbles, options.cancelable, options.detail)\r\n    return e\r\n  }\r\n\r\n  CustomEventPoly.prototype = window.Event.prototype\r\n\r\n  SVG.CustomEvent = CustomEventPoly\r\n} else {\r\n  SVG.CustomEvent = window.CustomEvent\r\n}\r\n\r\n// requestAnimationFrame / cancelAnimationFrame Polyfill with fallback based on Paul Irish\r\n(function(w) {\r\n  var lastTime = 0\r\n  var vendors = ['moz', 'webkit']\r\n\r\n  for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n    w.requestAnimationFrame = w[vendors[x] + 'RequestAnimationFrame']\r\n    w.cancelAnimationFrame  = w[vendors[x] + 'CancelAnimationFrame'] ||\r\n                              w[vendors[x] + 'CancelRequestAnimationFrame']\r\n  }\r\n\r\n  w.requestAnimationFrame = w.requestAnimationFrame ||\r\n    function(callback) {\r\n      var currTime = new Date().getTime()\r\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime))\r\n\r\n      var id = w.setTimeout(function() {\r\n        callback(currTime + timeToCall)\r\n      }, timeToCall)\r\n\r\n      lastTime = currTime + timeToCall\r\n      return id\r\n    }\r\n\r\n  w.cancelAnimationFrame = w.cancelAnimationFrame || w.clearTimeout;\r\n\r\n}(window))\r\n\r\nreturn SVG\r\n\r\n}));\r","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorAbbreviation = exports.ColorName = exports.ColorCode = void 0;\nvar ColorCode;\n(function (ColorCode) {\n    ColorCode[\"Black\"] = \"#000000\";\n    ColorCode[\"DarkGray\"] = \"#404040\";\n    ColorCode[\"Gray\"] = \"#808080\";\n    ColorCode[\"Silver\"] = \"#BFBFBF\";\n    ColorCode[\"White\"] = \"#FFFFFF\";\n    ColorCode[\"Yellow\"] = \"#FEFE00\";\n    ColorCode[\"Red\"] = \"#EE0000\";\n    ColorCode[\"Orange\"] = \"#FFA100\";\n    ColorCode[\"Blue\"] = \"#0000F2\";\n    ColorCode[\"Green\"] = \"#00D800\";\n    ColorCode[\"Purple\"] = \"#A83DD9\";\n    ColorCode[\"Pink\"] = \"#F33D7B\";\n    ColorCode[\"Transparent\"] = \"transparent\";\n})(ColorCode = exports.ColorCode || (exports.ColorCode = {}));\nvar ColorName;\n(function (ColorName) {\n    ColorName[\"Black\"] = \"black\";\n    ColorName[\"DarkGray\"] = \"darkGray\";\n    ColorName[\"Gray\"] = \"gray\";\n    ColorName[\"Silver\"] = \"silver\";\n    ColorName[\"White\"] = \"white\";\n    ColorName[\"Yellow\"] = \"yellow\";\n    ColorName[\"Red\"] = \"red\";\n    ColorName[\"Orange\"] = \"orange\";\n    ColorName[\"Blue\"] = \"blue\";\n    ColorName[\"Green\"] = \"green\";\n    ColorName[\"Purple\"] = \"purple\";\n    ColorName[\"Pink\"] = \"pink\";\n    ColorName[\"Transparent\"] = \"transparent\";\n})(ColorName = exports.ColorName || (exports.ColorName = {}));\nvar ColorAbbreviation;\n(function (ColorAbbreviation) {\n    ColorAbbreviation[\"Black\"] = \"n\";\n    ColorAbbreviation[\"DarkGray\"] = \"d\";\n    ColorAbbreviation[\"Gray\"] = \"l\";\n    ColorAbbreviation[\"Silver\"] = \"s\";\n    ColorAbbreviation[\"White\"] = \"w\";\n    ColorAbbreviation[\"Yellow\"] = \"y\";\n    ColorAbbreviation[\"Red\"] = \"r\";\n    ColorAbbreviation[\"Orange\"] = \"o\";\n    ColorAbbreviation[\"Blue\"] = \"b\";\n    ColorAbbreviation[\"Green\"] = \"g\";\n    ColorAbbreviation[\"Purple\"] = \"m\";\n    ColorAbbreviation[\"Pink\"] = \"p\";\n    ColorAbbreviation[\"Transparent\"] = \"t\";\n})(ColorAbbreviation = exports.ColorAbbreviation || (exports.ColorAbbreviation = {}));\n","\"use strict\";\nvar _a, _b, _c, _d;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FaceletToColor = exports.FaceletToFace = exports.FaceletAbbreviateToDefinition = exports.ColorAbbreviationToCode = exports.ColorNameToCode = exports.FaceletDefinition = void 0;\nvar colors_1 = require(\"./colors\");\nvar constants_1 = require(\"./cube/constants\");\nvar FaceletDefinition;\n(function (FaceletDefinition) {\n    FaceletDefinition[\"Up\"] = \"u\";\n    FaceletDefinition[\"Down\"] = \"d\";\n    FaceletDefinition[\"Left\"] = \"l\";\n    FaceletDefinition[\"Right\"] = \"r\";\n    FaceletDefinition[\"Back\"] = \"b\";\n    FaceletDefinition[\"Front\"] = \"f\";\n    FaceletDefinition[\"Transparent\"] = \"t\";\n    FaceletDefinition[\"Oriented\"] = \"o\";\n    FaceletDefinition[\"Blank\"] = \"n\";\n})(FaceletDefinition = exports.FaceletDefinition || (exports.FaceletDefinition = {}));\nexports.ColorNameToCode = (_a = {},\n    _a[colors_1.ColorName.Black] = colors_1.ColorCode.Black,\n    _a[colors_1.ColorName.DarkGray] = colors_1.ColorCode.DarkGray,\n    _a[colors_1.ColorName.Gray] = colors_1.ColorCode.Gray,\n    _a[colors_1.ColorName.Silver] = colors_1.ColorCode.Silver,\n    _a[colors_1.ColorName.White] = colors_1.ColorCode.White,\n    _a[colors_1.ColorName.Yellow] = colors_1.ColorCode.Yellow,\n    _a[colors_1.ColorName.Red] = colors_1.ColorCode.Red,\n    _a[colors_1.ColorName.Orange] = colors_1.ColorCode.Orange,\n    _a[colors_1.ColorName.Blue] = colors_1.ColorCode.Blue,\n    _a[colors_1.ColorName.Green] = colors_1.ColorCode.Green,\n    _a[colors_1.ColorName.Purple] = colors_1.ColorCode.Purple,\n    _a[colors_1.ColorName.Pink] = colors_1.ColorCode.Pink,\n    _a);\nexports.ColorAbbreviationToCode = (_b = {},\n    _b[colors_1.ColorAbbreviation.Black] = colors_1.ColorCode.Black,\n    _b[colors_1.ColorAbbreviation.DarkGray] = colors_1.ColorCode.DarkGray,\n    _b[colors_1.ColorAbbreviation.Gray] = colors_1.ColorCode.Gray,\n    _b[colors_1.ColorAbbreviation.Silver] = colors_1.ColorCode.Silver,\n    _b[colors_1.ColorAbbreviation.White] = colors_1.ColorCode.White,\n    _b[colors_1.ColorAbbreviation.Yellow] = colors_1.ColorCode.Yellow,\n    _b[colors_1.ColorAbbreviation.Red] = colors_1.ColorCode.Red,\n    _b[colors_1.ColorAbbreviation.Orange] = colors_1.ColorCode.Orange,\n    _b[colors_1.ColorAbbreviation.Blue] = colors_1.ColorCode.Blue,\n    _b[colors_1.ColorAbbreviation.Green] = colors_1.ColorCode.Green,\n    _b[colors_1.ColorAbbreviation.Purple] = colors_1.ColorCode.Purple,\n    _b[colors_1.ColorAbbreviation.Pink] = colors_1.ColorCode.Pink,\n    _b[colors_1.ColorAbbreviation.Transparent] = colors_1.ColorCode.Transparent,\n    _b);\nexports.FaceletAbbreviateToDefinition = {\n    u: FaceletDefinition.Up,\n    f: FaceletDefinition.Front,\n    r: FaceletDefinition.Right,\n    d: FaceletDefinition.Down,\n    l: FaceletDefinition.Left,\n    b: FaceletDefinition.Back,\n    t: FaceletDefinition.Transparent,\n    o: FaceletDefinition.Oriented,\n    n: FaceletDefinition.Blank,\n};\nexports.FaceletToFace = (_c = {},\n    _c[FaceletDefinition.Up] = constants_1.Face.U,\n    _c[FaceletDefinition.Down] = constants_1.Face.D,\n    _c[FaceletDefinition.Left] = constants_1.Face.L,\n    _c[FaceletDefinition.Right] = constants_1.Face.R,\n    _c[FaceletDefinition.Front] = constants_1.Face.F,\n    _c[FaceletDefinition.Back] = constants_1.Face.B,\n    _c);\nexports.FaceletToColor = (_d = {},\n    _d[FaceletDefinition.Oriented] = colors_1.ColorName.Gray,\n    _d[FaceletDefinition.Blank] = colors_1.ColorCode.DarkGray,\n    _d[FaceletDefinition.Transparent] = colors_1.ColorName.Transparent,\n    _d);\n","\"use strict\";\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Masking = exports.TurnAbbreviation = exports.cubeRotations = exports.possibleMoves = exports.AxisSymbolToAxis = exports.AlgorithmUnit = exports.JapaneseColorScheme = exports.DefaultColorScheme = exports.FaceRotationVectors = exports.AllFaces = exports.Face = void 0;\nvar colors_1 = require(\"./../colors\");\nvar math_1 = require(\"./../math\");\nvar Face;\n(function (Face) {\n    Face[Face[\"U\"] = 0] = \"U\";\n    Face[Face[\"R\"] = 1] = \"R\";\n    Face[Face[\"F\"] = 2] = \"F\";\n    Face[Face[\"D\"] = 3] = \"D\";\n    Face[Face[\"L\"] = 4] = \"L\";\n    Face[Face[\"B\"] = 5] = \"B\";\n})(Face = exports.Face || (exports.Face = {}));\nexports.AllFaces = [Face.U, Face.R, Face.F, Face.D, Face.L, Face.B];\nvar FaceRotationVectors = /** @class */ (function () {\n    function FaceRotationVectors() {\n    }\n    FaceRotationVectors.U = [0, -1, 0];\n    FaceRotationVectors.R = [1, 0, 0];\n    FaceRotationVectors.F = [0, 0, -1];\n    FaceRotationVectors.D = [0, 1, 0];\n    FaceRotationVectors.L = [-1, 0, 0];\n    FaceRotationVectors.B = [0, 0, 1];\n    return FaceRotationVectors;\n}());\nexports.FaceRotationVectors = FaceRotationVectors;\nexports.DefaultColorScheme = (_a = {},\n    _a[Face.U] = colors_1.ColorCode.Yellow,\n    _a[Face.R] = colors_1.ColorCode.Red,\n    _a[Face.F] = colors_1.ColorCode.Blue,\n    _a[Face.D] = colors_1.ColorCode.White,\n    _a[Face.L] = colors_1.ColorCode.Orange,\n    _a[Face.B] = colors_1.ColorCode.Green,\n    _a);\nexports.JapaneseColorScheme = (_b = {},\n    _b[Face.U] = colors_1.ColorCode.Blue,\n    _b[Face.R] = colors_1.ColorCode.Orange,\n    _b[Face.F] = colors_1.ColorCode.Green,\n    _b[Face.D] = colors_1.ColorCode.White,\n    _b[Face.L] = colors_1.ColorCode.Red,\n    _b[Face.B] = colors_1.ColorCode.Yellow,\n    _b);\nvar AlgorithmUnit;\n(function (AlgorithmUnit) {\n    AlgorithmUnit[\"F\"] = \"F\";\n    AlgorithmUnit[\"U\"] = \"U\";\n    AlgorithmUnit[\"R\"] = \"R\";\n    AlgorithmUnit[\"L\"] = \"L\";\n    AlgorithmUnit[\"D\"] = \"D\";\n    AlgorithmUnit[\"B\"] = \"B\";\n    AlgorithmUnit[\"M\"] = \"M\";\n    AlgorithmUnit[\"E\"] = \"E\";\n    AlgorithmUnit[\"S\"] = \"S\";\n    AlgorithmUnit[\"X\"] = \"x\";\n    AlgorithmUnit[\"Y\"] = \"y\";\n    AlgorithmUnit[\"Z\"] = \"z\";\n})(AlgorithmUnit = exports.AlgorithmUnit || (exports.AlgorithmUnit = {}));\nexports.AxisSymbolToAxis = {\n    x: math_1.Axis.X,\n    y: math_1.Axis.Y,\n    z: math_1.Axis.Z,\n};\nexports.possibleMoves = [\n    AlgorithmUnit.F,\n    AlgorithmUnit.U,\n    AlgorithmUnit.R,\n    AlgorithmUnit.L,\n    AlgorithmUnit.D,\n    AlgorithmUnit.B,\n    AlgorithmUnit.M,\n    AlgorithmUnit.E,\n    AlgorithmUnit.S,\n    AlgorithmUnit.X,\n    AlgorithmUnit.Y,\n    AlgorithmUnit.Z,\n];\nexports.cubeRotations = [AlgorithmUnit.X, AlgorithmUnit.Y, AlgorithmUnit.Z];\nvar TurnAbbreviation;\n(function (TurnAbbreviation) {\n    TurnAbbreviation[\"Clockwise\"] = \"\";\n    TurnAbbreviation[\"CounterClockwise\"] = \"'\";\n    TurnAbbreviation[\"Double\"] = \"2\";\n    TurnAbbreviation[\"DoubleCounter1\"] = \"2'\";\n    TurnAbbreviation[\"DoubleCounter2\"] = \"'2\";\n})(TurnAbbreviation = exports.TurnAbbreviation || (exports.TurnAbbreviation = {}));\nvar Masking;\n(function (Masking) {\n    Masking[\"FL\"] = \"fl\";\n    Masking[\"F2L\"] = \"f2l\";\n    Masking[\"LL\"] = \"ll\";\n    Masking[\"CLL\"] = \"cll\";\n    Masking[\"ELL\"] = \"ell\";\n    Masking[\"OLL\"] = \"oll\";\n    Masking[\"OCLL\"] = \"ocll\";\n    Masking[\"OELL\"] = \"oell\";\n    Masking[\"COLL\"] = \"coll\";\n    Masking[\"OCELL\"] = \"ocell\";\n    Masking[\"WV\"] = \"wv\";\n    Masking[\"VH\"] = \"vh\";\n    Masking[\"ELS\"] = \"els\";\n    Masking[\"CLS\"] = \"cls\";\n    Masking[\"CMLL\"] = \"cmll\";\n    Masking[\"CROSS\"] = \"cross\";\n    Masking[\"F2L3\"] = \"f2l_3\";\n    Masking[\"F2L2\"] = \"f2l_2\";\n    Masking[\"F2LSM\"] = \"f2l_sm\";\n    Masking[\"F2L1\"] = \"f2l_1\";\n    Masking[\"F2B\"] = \"f2b\";\n    Masking[\"LINE\"] = \"line\";\n})(Masking = exports.Masking || (exports.Masking = {}));\n","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.renderArrow = exports.renderOLLStickers = exports.renderCube = void 0;\nvar colors_1 = require(\"./../colors\");\nvar constants_1 = require(\"./../constants\");\nvar SVG = require(\"svg.js\");\nvar geometry_1 = require(\"./geometry\");\nvar math_1 = require(\"../math\");\nvar constants_2 = require(\"./constants\");\nvar arrow_1 = require(\"./parsing/arrow\");\n/**\n * Utility methods for rendering cube geometry using svg.js\n */\n// Rotation vectors to track visibility of each face\nvar defaultFaceRotations = (_a = {},\n    _a[constants_2.Face.U] = [0, -1, 0],\n    _a[constants_2.Face.R] = [1, 0, 0],\n    _a[constants_2.Face.F] = [0, 0, -1],\n    _a[constants_2.Face.D] = [0, 1, 0],\n    _a[constants_2.Face.L] = [-1, 0, 0],\n    _a[constants_2.Face.B] = [0, 0, 1],\n    _a);\nfunction renderCube(container, geometry, options) {\n    var faceRotations = geometry_1.rotateFaces(defaultFaceRotations, options.viewportRotations);\n    var renderOrder = getRenderOrder(faceRotations);\n    var svg = SVG(container).size(options.width, options.height);\n    svg.viewbox(options.viewbox.x, options.viewbox.y, options.viewbox.width, options.viewbox.height);\n    var hiddenFaces = renderOrder.filter(function (face) { return !faceVisible(face, faceRotations); });\n    var visibleFaces = renderOrder.filter(function (face) { return faceVisible(face, faceRotations); });\n    renderBackground(svg, options);\n    // Render hidden faces if cube color has transparency\n    if (options.cubeOpacity < 100) {\n        var cubeOutlineGroup_1 = getCubeOutlineGroup(svg, options);\n        hiddenFaces.forEach(function (face) {\n            renderFaceStickers(svg, face, geometry[face], options);\n            renderCubeOutline(cubeOutlineGroup_1, geometry[face], options);\n        });\n    }\n    var cubeOutlineGroup = getCubeOutlineGroup(svg, options);\n    visibleFaces.forEach(function (face) {\n        renderCubeOutline(cubeOutlineGroup, geometry[face], options);\n        renderFaceStickers(svg, face, geometry[face], options);\n    });\n    if (options.view === 'plan') {\n        var ollGroup_1 = getOllLayerGroup(svg, options);\n        [constants_2.Face.R, constants_2.Face.F, constants_2.Face.L, constants_2.Face.B].forEach(function (face) {\n            renderOLLStickers(ollGroup_1, face, geometry[face], faceRotations, options);\n        });\n    }\n    var arrowGroup = getArrowGroup(svg, geometry[0].length - 1);\n    var arrowDefinitions = [];\n    if (Array.isArray(options.arrows)) {\n        arrowDefinitions = options.arrows;\n    }\n    else if (typeof options.arrows === 'string') {\n        arrowDefinitions = arrow_1.parseArrows(options.arrows);\n    }\n    arrowDefinitions.forEach(function (arrow) {\n        renderArrow(arrowGroup, geometry, arrow);\n    });\n}\nexports.renderCube = renderCube;\n/**\n * Determines face render order based on z position. Faces further away\n * will render first so anything closer will be drawn on top.\n */\nfunction getRenderOrder(faceRotations) {\n    var renderOrder = __spreadArray([], constants_2.AllFaces).sort(function (a, b) {\n        return faceRotations[b][2] - faceRotations[a][2];\n    });\n    return renderOrder;\n}\nfunction renderBackground(svg, options) {\n    var backgroundSvg = svg.rect(options.viewbox.width, options.viewbox.height);\n    backgroundSvg.x(options.viewbox.x);\n    backgroundSvg.y(options.viewbox.y);\n    if (!options.backgroundColor) {\n        backgroundSvg.fill('none');\n        backgroundSvg.opacity(0);\n    }\n    else {\n        backgroundSvg.fill({\n            color: options.backgroundColor,\n        });\n    }\n}\nfunction faceVisible(face, rotations) {\n    return rotations[face][2] < -0.105;\n}\nfunction getCubeOutlineGroup(svg, options) {\n    var cubeOutlineGroup = svg.group();\n    cubeOutlineGroup.opacity(options.cubeOpacity / 100);\n    cubeOutlineGroup.attr({\n        'stroke-width': '0.1',\n        'stroke-linejoin': 'round',\n    });\n    return cubeOutlineGroup;\n}\nfunction getOllLayerGroup(svg, options) {\n    var group = svg.group();\n    group.opacity(options.stickerOpacity / 100);\n    group.attr({\n        'stroke-opacity': '1',\n        'stroke-width': 0.02,\n        'stroke-linejoin': 'round',\n    });\n    return group;\n}\nfunction getArrowGroup(svg, cubeSize) {\n    var arrowGroup = svg.group();\n    arrowGroup.attr({\n        opacity: 1,\n        'stroke-opacity': 1,\n        'stroke-width': 0.12 / cubeSize,\n        'stroke-linecap': 'round',\n    });\n    return arrowGroup;\n}\nfunction renderCubeOutline(svg, face, options) {\n    var cubeSize = face.length - 1;\n    var width = options.outlineWidth;\n    var outlinePoints = [\n        [face[0][0][0] * width, face[0][0][1] * width],\n        [face[cubeSize][0][0] * width, face[cubeSize][0][1] * width],\n        [face[cubeSize][cubeSize][0] * width, face[cubeSize][cubeSize][1] * width],\n        [face[0][cubeSize][0] * width, face[0][cubeSize][1] * width],\n    ];\n    var polygon = svg.polygon(outlinePoints);\n    polygon.fill(options.cubeColor);\n    polygon.stroke(options.cubeColor);\n    return polygon;\n}\nfunction renderFaceStickers(svg, face, stickers, options) {\n    var cubeSize = stickers.length - 1;\n    var group = svg.group();\n    group.opacity(options.stickerOpacity / 100);\n    group.attr({\n        'stoke-opacity': '0.5',\n        'stroke-width': options.strokeWidth,\n        'stroke-linejoin': 'round',\n    });\n    for (var i = 0; i < cubeSize; i++) {\n        for (var j = 0; j < cubeSize; j++) {\n            var centerPoint = [\n                (stickers[j][i][0] + stickers[j + 1][i + 1][0]) / 2,\n                (stickers[j][i][1] + stickers[j + 1][i + 1][1]) / 2,\n                0,\n            ];\n            // Scale points in towards centre\n            var p1 = math_1.transScale(stickers[j][i], centerPoint, 0.85);\n            var p2 = math_1.transScale(stickers[j + 1][i], centerPoint, 0.85);\n            var p3 = math_1.transScale(stickers[j + 1][i + 1], centerPoint, 0.85);\n            var p4 = math_1.transScale(stickers[j][i + 1], centerPoint, 0.85);\n            var color = getStickerColor(face, i, j, options);\n            if (color !== colors_1.ColorName.Transparent) {\n                renderSticker(group, p1, p2, p3, p4, color, options.cubeColor);\n            }\n        }\n    }\n    return group;\n}\nfunction renderSticker(g, p1, p2, p3, p4, stickerColor, cubeColor) {\n    var stickerPoints = [[p1[0], p1[1]], [p2[0], p2[1]], [p3[0], p3[1]], [p4[0], p4[1]]];\n    var polygon = g.polygon(stickerPoints);\n    polygon.fill(stickerColor);\n    polygon.stroke(cubeColor);\n    return polygon;\n}\n/**\n * Starting with U, stickers are numbered from\n * their face starting with the top left corner\n * sticker.\n *\n * U Face\n * 1 | 2 | 3\n * ----------\n * 4 | 5 | 6\n * ----------\n * 7 | 8 | 9\n *\n * And so on for faces R, F, D, L, B.\n * So R's top left corner for a 3x3 cube would be # 10\n *\n * An individual sticker's color is obtained by indexing\n * into the array of sticker colors by the number the sticker is\n */\nfunction getStickerColor(face, row, col, options) {\n    var faceIndex = constants_2.AllFaces.indexOf(face);\n    var stickerNumber = row * options.cubeSize + col;\n    var colorIndex = faceIndex * (options.cubeSize * options.cubeSize) + stickerNumber;\n    if (!Array.isArray(options.facelets) && Array.isArray(options.stickerColors)) {\n        if (options.stickerColors.length <= colorIndex) {\n            return colors_1.ColorName.Black;\n        }\n        return options.stickerColors[colorIndex];\n    }\n    else if (Array.isArray(options.facelets)) {\n        if (options.facelets.length <= colorIndex) {\n            return colors_1.ColorCode.DarkGray;\n        }\n        var fd = options.facelets[colorIndex];\n        if (constants_1.FaceletToFace[fd] != null) {\n            var face_1 = constants_1.FaceletToFace[fd];\n            return options.colorScheme[face_1];\n        }\n        return constants_1.FaceletToColor[fd] || colors_1.ColorCode.DarkGray;\n    }\n    else {\n        return options.colorScheme[face] || colors_1.ColorName.Black;\n    }\n}\n// Renders the top rim of the R U L and B faces out from side of cube\nfunction renderOLLStickers(group, face, stickers, rotations, options) {\n    // Translation vector, to move faces out\n    var v1 = math_1.scale(rotations[face], 0);\n    var v2 = math_1.scale(rotations[face], 0.2);\n    for (var i = 0; i < options.cubeSize; i++) {\n        // find center point of sticker\n        var centerPoint = [\n            (stickers[i][0][0] + stickers[i + 1][1][0]) / 2,\n            (stickers[i][0][1] + stickers[i + 1][1][1]) / 2,\n            0,\n        ];\n        var p1 = math_1.translate(math_1.transScale(stickers[i][0], centerPoint, 0.94), v1);\n        var p2 = math_1.translate(math_1.transScale(stickers[i + 1][0], centerPoint, 0.94), v1);\n        var p3 = math_1.translate(math_1.transScale(stickers[i + 1][1], centerPoint, 0.94), v2);\n        var p4 = math_1.translate(math_1.transScale(stickers[i][1], centerPoint, 0.94), v2);\n        var stickerColor = getStickerColor(face, 0, i, options);\n        if (stickerColor !== colors_1.ColorName.Transparent) {\n            renderSticker(group, p1, p2, p3, p4, stickerColor, options.cubeColor);\n        }\n    }\n}\nexports.renderOLLStickers = renderOLLStickers;\n/**\n * Generates svg for an arrow pointing from sticker s1 to s2\n */\nfunction renderArrow(group, geometry, arrow) {\n    var cubeSize = geometry[0].length - 1;\n    // Find center point for each facelet\n    var p1y = Math.floor(arrow.s1.n / cubeSize);\n    var p1x = arrow.s1.n % cubeSize;\n    var p1 = [\n        (geometry[arrow.s1.face][p1x][p1y][0] + geometry[arrow.s1.face][p1x + 1][p1y + 1][0]) / 2,\n        (geometry[arrow.s1.face][p1x][p1y][1] + geometry[arrow.s1.face][p1x + 1][p1y + 1][1]) / 2,\n        0,\n    ];\n    var p2y = Math.floor(arrow.s2.n / cubeSize);\n    var p2x = arrow.s2.n % cubeSize;\n    var p2 = [\n        (geometry[arrow.s1.face][p2x][p2y][0] + geometry[arrow.s1.face][p2x + 1][p2y + 1][0]) / 2,\n        (geometry[arrow.s1.face][p2x][p2y][1] + geometry[arrow.s1.face][p2x + 1][p2y + 1][1]) / 2,\n        0,\n    ];\n    // Find midpoint between p1 and p2\n    var center = [(p1[0] + p2[0]) / 2, (p1[1] + p2[1]) / 2, 0];\n    // Shorten arrows towards midpoint according to config\n    p1 = math_1.transScale(p1, center, arrow.scale / 10);\n    p2 = math_1.transScale(p2, center, arrow.scale / 10);\n    var p3;\n    if (arrow.s3) {\n        var p3y = Math.floor(arrow.s3.n / cubeSize);\n        var p3x = arrow.s3.n % cubeSize;\n        p3 = [\n            (geometry[arrow.s1.face][p3x][p3y][0] + geometry[arrow.s1.face][p3x + 1][p3y + 1][0]) / 2,\n            (geometry[arrow.s1.face][p3x][p3y][1] + geometry[arrow.s1.face][p3x + 1][p3y + 1][1]) / 2,\n            0,\n        ];\n        p3 = math_1.transScale(p3, center, arrow.influence / 5);\n    }\n    // Calculate arrow rotation\n    var p_ = p3 ? p3 : p1;\n    var rotation = p_[1] > p2[1] ? 270 : 90;\n    if (p2[0] - p_[0] != 0) {\n        rotation = math_1.radians2Degrees(Math.atan((p2[1] - p_[1]) / (p2[0] - p_[0])));\n        rotation = p_[0] > p2[0] ? rotation + 180 : rotation;\n    }\n    // Draw line\n    var lineSvg = group.path(\"M \" + p1[0] + \",\" + p1[1] + \" \" + (p3 ? 'Q ' + p3[0] + ',' + p3[1] : 'L') + \" \" + p2[0] + \",\" + p2[1]);\n    lineSvg.fill('none');\n    lineSvg.stroke({\n        color: arrow.color,\n        opacity: 1,\n    });\n    // Draw arrow head\n    var headSvg = group.path('M 5.77,0.0 L -2.88,5.0 L -2.88,-5.0 L 5.77,0.0 z');\n    headSvg.attr({\n        transform: \"translate(\" + p2[0] + \",\" + p2[1] + \") scale(\" + 0.033 / cubeSize + \") rotate(\" + rotation + \")\",\n    });\n    headSvg.style({\n        fill: arrow.color,\n    });\n    headSvg.attr({\n        'stroke-width': 0,\n        'stroke-linejoin': 'round',\n    });\n}\nexports.renderArrow = renderArrow;\n","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.makeCubeGeometry = exports.makeFaceStickers = exports.makeStickerPosition = exports.rotateFaces = void 0;\n/**\n * Utlity Methods for creating 2D coodinates for svg polygons\n */\nvar constants_1 = require(\"./constants\");\nvar math_1 = require(\"../math\");\n/**\n * Applies set of rotations to all face rotation vectors.\n */\nfunction rotateFaces(faceRotations, rotations) {\n    return constants_1.AllFaces.reduce(function (acc, face) {\n        rotations.forEach(function (rotation) {\n            if (!acc[face]) {\n                acc[face] = __spreadArray([], faceRotations[face]);\n            }\n            acc[face] = math_1.rotate(acc[face], rotation[0], (Math.PI * rotation[1]) / 180);\n        });\n        return acc;\n    }, {});\n}\nexports.rotateFaces = rotateFaces;\nfunction makeStickerPosition(face, cubeSize, x, y) {\n    switch (face) {\n        case constants_1.Face.U:\n            return [x, 0, cubeSize - y];\n        case constants_1.Face.R:\n            return [cubeSize, y, x];\n        case constants_1.Face.F:\n            return [x, y, 0];\n        case constants_1.Face.D:\n            return [x, cubeSize, y];\n        case constants_1.Face.L:\n            return [0, y, cubeSize - x];\n        case constants_1.Face.B:\n            return [cubeSize - x, y, cubeSize];\n        default:\n            throw new Error(\"Unknown cube face: '\" + face + \"'\");\n    }\n}\nexports.makeStickerPosition = makeStickerPosition;\n/**\n * Creates 2D coordinates for stickers of a given face of the cube.\n */\nfunction makeFaceStickers(face, options) {\n    var stickers = math_1.makeMatrix(options.cubeSize + 1, options.cubeSize + 1);\n    for (var row = 0; row <= options.cubeSize; row++) {\n        var _loop_1 = function (col) {\n            var sticker = makeStickerPosition(face, options.cubeSize, row, col);\n            // Now scale and tranform point to ensure size/pos independent of dim\n            var centerTranslation = [-options.cubeSize / 2, -options.cubeSize / 2, -options.cubeSize / 2];\n            sticker = math_1.translate(sticker, centerTranslation);\n            sticker = math_1.scale(sticker, 1 / options.cubeSize);\n            // Rotate cube as per perameter settings\n            options.viewportRotations.forEach(function (rotation) {\n                sticker = math_1.rotate(sticker, rotation[0], (Math.PI * rotation[1]) / 180);\n            });\n            // Move cube away from viewer\n            sticker = math_1.translate(sticker, [0, 0, options.dist]);\n            // Finally project the 3D points onto 2D\n            sticker = math_1.project(sticker, options.dist);\n            stickers[row][col] = sticker;\n        };\n        for (var col = 0; col <= options.cubeSize; col++) {\n            _loop_1(col);\n        }\n    }\n    return stickers;\n}\nexports.makeFaceStickers = makeFaceStickers;\n/**\n * Creates geometry for rubiks cube stickers. Contains 2D coordinates\n * for drawing svg polygons\n */\nfunction makeCubeGeometry(options) {\n    if (options.view === 'plan') {\n        options.viewportRotations = [[math_1.Axis.X, -90]];\n    }\n    return constants_1.AllFaces.reduce(function (acc, face) {\n        acc[face] = makeFaceStickers(face, options);\n        return acc;\n    }, {});\n}\nexports.makeCubeGeometry = makeCubeGeometry;\n","\"use strict\";\nvar _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.makeMasking = void 0;\nvar constants_1 = require(\"./constants\");\nvar maskingFunctions = (_a = {},\n    _a[constants_1.Masking.FL] = (_b = {},\n        _b[constants_1.Face.U] = function (row, col, cubeSize) { return false; },\n        _b[constants_1.Face.D] = function (row, col, cubeSize) { return true; },\n        _b[constants_1.Face.R] = function (row, col, cubeSize) { return row == cubeSize - 1; },\n        _b[constants_1.Face.L] = function (row, col, cubeSize) { return row == cubeSize - 1; },\n        _b[constants_1.Face.F] = function (row, col, cubeSize) { return row == cubeSize - 1; },\n        _b[constants_1.Face.B] = function (row, col, cubeSize) { return row == cubeSize - 1; },\n        _b),\n    _a[constants_1.Masking.F2L] = (_c = {},\n        _c[constants_1.Face.U] = function (row, col, cubeSize) { return false; },\n        _c[constants_1.Face.D] = function (row, col, cubeSize) { return true; },\n        _c[constants_1.Face.R] = function (row, col, cubeSize) { return row > 0; },\n        _c[constants_1.Face.L] = function (row, col, cubeSize) { return row > 0; },\n        _c[constants_1.Face.F] = function (row, col, cubeSize) { return row > 0; },\n        _c[constants_1.Face.B] = function (row, col, cubeSize) { return row > 0; },\n        _c),\n    _a[constants_1.Masking.LL] = (_d = {},\n        _d[constants_1.Face.U] = function (row, col, cubeSize) { return true; },\n        _d[constants_1.Face.D] = function (row, col, cubeSize) { return false; },\n        _d[constants_1.Face.R] = function (row, col, cubeSize) { return row == 0; },\n        _d[constants_1.Face.L] = function (row, col, cubeSize) { return row == 0; },\n        _d[constants_1.Face.F] = function (row, col, cubeSize) { return row == 0; },\n        _d[constants_1.Face.B] = function (row, col, cubeSize) { return row == 0; },\n        _d),\n    _a[constants_1.Masking.CLL] = (_e = {},\n        _e[constants_1.Face.U] = function (row, col, cubeSize) {\n            return (row > 0 && col > 0 && row < cubeSize - 1 && col < cubeSize - 1) || // is center\n                ((row == 0 || row == cubeSize - 1) && (col == 0 || col == cubeSize - 1));\n        },\n        _e[constants_1.Face.D] = function (row, col, cubeSize) { return false; },\n        _e[constants_1.Face.R] = function (row, col, cubeSize) { return row == 0 && (col == 0 || col == cubeSize - 1); },\n        _e[constants_1.Face.L] = function (row, col, cubeSize) { return row == 0 && (col == 0 || col == cubeSize - 1); },\n        _e[constants_1.Face.F] = function (row, col, cubeSize) { return row == 0 && (col == 0 || col == cubeSize - 1); },\n        _e[constants_1.Face.B] = function (row, col, cubeSize) { return row == 0 && (col == 0 || col == cubeSize - 1); },\n        _e),\n    _a[constants_1.Masking.ELL] = (_f = {},\n        _f[constants_1.Face.U] = function (row, col, cubeSize) { return !((row == 0 || row == cubeSize - 1) && (col == 0 || col == cubeSize - 1)); },\n        _f[constants_1.Face.D] = function (row, col, cubeSize) { return false; },\n        _f[constants_1.Face.R] = function (row, col, cubeSize) { return row == 0 && col > 0 && col < cubeSize - 1; },\n        _f[constants_1.Face.L] = function (row, col, cubeSize) { return row == 0 && col > 0 && col < cubeSize - 1; },\n        _f[constants_1.Face.F] = function (row, col, cubeSize) { return row == 0 && col > 0 && col < cubeSize - 1; },\n        _f[constants_1.Face.B] = function (row, col, cubeSize) { return row == 0 && col > 0 && col < cubeSize - 1; },\n        _f),\n    _a[constants_1.Masking.OLL] = (_g = {},\n        _g[constants_1.Face.U] = function (row, col, cubeSize) { return true; },\n        _g[constants_1.Face.D] = function (row, col, cubeSize) { return false; },\n        _g[constants_1.Face.R] = function (row, col, cubeSize) { return false; },\n        _g[constants_1.Face.L] = function (row, col, cubeSize) { return false; },\n        _g[constants_1.Face.F] = function (row, col, cubeSize) { return false; },\n        _g[constants_1.Face.B] = function (row, col, cubeSize) { return false; },\n        _g),\n    _a[constants_1.Masking.OCLL] = (_h = {},\n        _h[constants_1.Face.U] = function (row, col, cubeSize) {\n            return (row > 0 && col > 0 && row < cubeSize - 1 && col < cubeSize - 1) || // is center\n                ((row == 0 || row == cubeSize - 1) && (col == 0 || col == cubeSize - 1));\n        },\n        _h[constants_1.Face.D] = function (row, col, cubeSize) { return false; },\n        _h[constants_1.Face.R] = function (row, col, cubeSize) { return false; },\n        _h[constants_1.Face.L] = function (row, col, cubeSize) { return false; },\n        _h[constants_1.Face.F] = function (row, col, cubeSize) { return false; },\n        _h[constants_1.Face.B] = function (row, col, cubeSize) { return false; },\n        _h),\n    _a[constants_1.Masking.OELL] = (_j = {},\n        _j[constants_1.Face.U] = function (row, col, cubeSize) { return !((row == 0 || row == cubeSize - 1) && (col == 0 || col == cubeSize - 1)); },\n        _j[constants_1.Face.D] = function (row, col, cubeSize) { return false; },\n        _j[constants_1.Face.R] = function (row, col, cubeSize) { return false; },\n        _j[constants_1.Face.L] = function (row, col, cubeSize) { return false; },\n        _j[constants_1.Face.F] = function (row, col, cubeSize) { return false; },\n        _j[constants_1.Face.B] = function (row, col, cubeSize) { return false; },\n        _j),\n    _a[constants_1.Masking.COLL] = (_k = {},\n        _k[constants_1.Face.U] = function (row, col, cubeSize) { return true; },\n        _k[constants_1.Face.D] = function (row, col, cubeSize) { return false; },\n        _k[constants_1.Face.R] = function (row, col, cubeSize) { return row == 0 && (col == 0 || col == cubeSize - 1); },\n        _k[constants_1.Face.L] = function (row, col, cubeSize) { return row == 0 && (col == 0 || col == cubeSize - 1); },\n        _k[constants_1.Face.F] = function (row, col, cubeSize) { return row == 0 && (col == 0 || col == cubeSize - 1); },\n        _k[constants_1.Face.B] = function (row, col, cubeSize) { return row == 0 && (col == 0 || col == cubeSize - 1); },\n        _k),\n    _a[constants_1.Masking.OCELL] = (_l = {},\n        _l[constants_1.Face.U] = function (row, col, cubeSize) { return true; },\n        _l[constants_1.Face.D] = function (row, col, cubeSize) { return false; },\n        _l[constants_1.Face.R] = function (row, col, cubeSize) { return row == 0 && col > 0 && col < cubeSize - 1; },\n        _l[constants_1.Face.L] = function (row, col, cubeSize) { return row == 0 && col > 0 && col < cubeSize - 1; },\n        _l[constants_1.Face.F] = function (row, col, cubeSize) { return row == 0 && col > 0 && col < cubeSize - 1; },\n        _l[constants_1.Face.B] = function (row, col, cubeSize) { return row == 0 && col > 0 && col < cubeSize - 1; },\n        _l),\n    _a[constants_1.Masking.WV] = (_m = {},\n        _m[constants_1.Face.U] = function (row, col, cubeSize) { return true; },\n        _m[constants_1.Face.D] = function (row, col, cubeSize) { return true; },\n        _m[constants_1.Face.R] = function (row, col, cubeSize) { return row > 0; },\n        _m[constants_1.Face.L] = function (row, col, cubeSize) { return row > 0; },\n        _m[constants_1.Face.F] = function (row, col, cubeSize) { return row > 0; },\n        _m[constants_1.Face.B] = function (row, col, cubeSize) { return row > 0; },\n        _m),\n    _a[constants_1.Masking.VH] = (_o = {},\n        _o[constants_1.Face.U] = function (row, col, cubeSize) { return !((row == 0 || row == cubeSize - 1) && (col == 0 || col == cubeSize - 1)); },\n        _o[constants_1.Face.D] = function (row, col, cubeSize) { return true; },\n        _o[constants_1.Face.R] = function (row, col, cubeSize) { return row > 0; },\n        _o[constants_1.Face.L] = function (row, col, cubeSize) { return row > 0; },\n        _o[constants_1.Face.F] = function (row, col, cubeSize) { return row > 0; },\n        _o[constants_1.Face.B] = function (row, col, cubeSize) { return row > 0; },\n        _o),\n    _a[constants_1.Masking.ELS] = (_p = {},\n        _p[constants_1.Face.U] = function (row, col, cubeSize) { return !((row == 0 || row == cubeSize - 1) && (col == 0 || col == cubeSize - 1)); },\n        _p[constants_1.Face.D] = function (row, col, cubeSize) { return (row == 0 ? col < cubeSize - 1 : true); },\n        _p[constants_1.Face.R] = function (row, col, cubeSize) { return row > 0 && (row == cubeSize - 1 ? col > 0 : true); },\n        _p[constants_1.Face.L] = function (row, col, cubeSize) { return row > 0; },\n        _p[constants_1.Face.F] = function (row, col, cubeSize) { return row > 0 && (row == cubeSize - 1 ? col < cubeSize - 1 : true); },\n        _p[constants_1.Face.B] = function (row, col, cubeSize) { return row > 0; },\n        _p),\n    _a[constants_1.Masking.CLS] = (_q = {},\n        _q[constants_1.Face.U] = function (row, col, cubeSize) { return true; },\n        _q[constants_1.Face.D] = function (row, col, cubeSize) { return true; },\n        _q[constants_1.Face.R] = function (row, col, cubeSize) { return row > 0; },\n        _q[constants_1.Face.L] = function (row, col, cubeSize) { return row > 0; },\n        _q[constants_1.Face.F] = function (row, col, cubeSize) { return row > 0; },\n        _q[constants_1.Face.B] = function (row, col, cubeSize) { return row > 0; },\n        _q),\n    _a[constants_1.Masking.CMLL] = (_r = {},\n        _r[constants_1.Face.U] = function (row, col, cubeSize) { return (row == 0 || row == cubeSize - 1) && (col == 0 || col == cubeSize - 1); },\n        _r[constants_1.Face.D] = function (row, col, cubeSize) { return true; },\n        _r[constants_1.Face.R] = function (row, col, cubeSize) { return row > 0 || col == 0 || col == cubeSize - 1; },\n        _r[constants_1.Face.L] = function (row, col, cubeSize) { return row > 0 || col == 0 || col == cubeSize - 1; },\n        _r[constants_1.Face.F] = function (row, col, cubeSize) { return col == 0 || col == cubeSize - 1; },\n        _r[constants_1.Face.B] = function (row, col, cubeSize) { return col == 0 || col == cubeSize - 1; },\n        _r),\n    _a[constants_1.Masking.CROSS] = (_s = {},\n        _s[constants_1.Face.U] = function (row, col, cubeSize) { return false; },\n        _s[constants_1.Face.D] = function (row, col, cubeSize) { return !((row == 0 || row == cubeSize - 1) && (col == 0 || col == cubeSize - 1)); },\n        _s[constants_1.Face.R] = function (row, col, cubeSize) { return row > 0 && col > 0 && col < cubeSize - 1; },\n        _s[constants_1.Face.L] = function (row, col, cubeSize) { return row > 0 && col > 0 && col < cubeSize - 1; },\n        _s[constants_1.Face.F] = function (row, col, cubeSize) { return row > 0 && col > 0 && col < cubeSize - 1; },\n        _s[constants_1.Face.B] = function (row, col, cubeSize) { return row > 0 && col > 0 && col < cubeSize - 1; },\n        _s),\n    _a[constants_1.Masking.F2L3] = (_t = {},\n        _t[constants_1.Face.U] = function (row, col, cubeSize) { return false; },\n        _t[constants_1.Face.D] = function (row, col, cubeSize) {\n            return (row == 0 && col == cubeSize - 1) || !((row == 0 || row == cubeSize - 1) && (col == 0 || col == cubeSize - 1));\n        },\n        _t[constants_1.Face.R] = function (row, col, cubeSize) { return row > 0 && col < cubeSize - 1; },\n        _t[constants_1.Face.L] = function (row, col, cubeSize) { return row > 0 && col > 0 && col < cubeSize - 1; },\n        _t[constants_1.Face.F] = function (row, col, cubeSize) { return row > 0 && col > 0; },\n        _t[constants_1.Face.B] = function (row, col, cubeSize) { return row > 0 && col > 0 && col < cubeSize - 1; },\n        _t),\n    _a[constants_1.Masking.F2L2] = (_u = {},\n        _u[constants_1.Face.U] = function (row, col, cubeSize) { return false; },\n        _u[constants_1.Face.D] = function (row, col, cubeSize) { return row > 0 || (col > 0 && col < cubeSize - 1); },\n        _u[constants_1.Face.R] = function (row, col, cubeSize) { return row > 0 && col > 0; },\n        _u[constants_1.Face.L] = function (row, col, cubeSize) { return row > 0 && col < cubeSize - 1; },\n        _u[constants_1.Face.F] = function (row, col, cubeSize) { return row > 0 && col > 0 && col < cubeSize - 1; },\n        _u[constants_1.Face.B] = function (row, col, cubeSize) { return row > 0; },\n        _u),\n    _a[constants_1.Masking.F2LSM] = (_v = {},\n        _v[constants_1.Face.U] = function (row, col, cubeSize) { return false; },\n        _v[constants_1.Face.D] = function (row, col, cubeSize) {\n            return !((row == 0 || row == cubeSize - 1) && (col == 0 || col == cubeSize - 1)) ||\n                (col == 0 && row == cubeSize - 1) ||\n                (row == 0 && col == cubeSize - 1);\n        },\n        _v[constants_1.Face.R] = function (row, col, cubeSize) { return row > 0 && col < cubeSize - 1; },\n        _v[constants_1.Face.L] = function (row, col, cubeSize) { return row > 0 && col < cubeSize - 1; },\n        _v[constants_1.Face.F] = function (row, col, cubeSize) { return row > 0 && col > 0; },\n        _v[constants_1.Face.B] = function (row, col, cubeSize) { return row > 0 && col > 0; },\n        _v),\n    _a[constants_1.Masking.F2L1] = (_w = {},\n        _w[constants_1.Face.U] = function (row, col, cubeSize) { return false; },\n        _w[constants_1.Face.D] = function (row, col, cubeSize) { return row !== 0 || col !== cubeSize - 1; },\n        _w[constants_1.Face.R] = function (row, col, cubeSize) { return row > 0 && col > 0; },\n        _w[constants_1.Face.L] = function (row, col, cubeSize) { return row > 0; },\n        _w[constants_1.Face.F] = function (row, col, cubeSize) { return row > 0 && col < cubeSize - 1; },\n        _w[constants_1.Face.B] = function (row, col, cubeSize) { return row > 0; },\n        _w),\n    _a[constants_1.Masking.F2B] = (_x = {},\n        _x[constants_1.Face.U] = function (row, col, cubeSize) { return false; },\n        _x[constants_1.Face.D] = function (row, col, cubeSize) { return col == 0 || col == cubeSize - 1; },\n        _x[constants_1.Face.R] = function (row, col, cubeSize) { return row > 0; },\n        _x[constants_1.Face.L] = function (row, col, cubeSize) { return row > 0; },\n        _x[constants_1.Face.F] = function (row, col, cubeSize) { return row > 0 && (col == 0 || col == cubeSize - 1); },\n        _x[constants_1.Face.B] = function (row, col, cubeSize) { return row > 0 && (col == 0 || col == cubeSize - 1); },\n        _x),\n    _a[constants_1.Masking.LINE] = (_y = {},\n        _y[constants_1.Face.U] = function (row, col, cubeSize) { return false; },\n        _y[constants_1.Face.D] = function (row, col, cubeSize) { return col > 0 && col < cubeSize - 1; },\n        _y[constants_1.Face.R] = function (row, col, cubeSize) { return false; },\n        _y[constants_1.Face.L] = function (row, col, cubeSize) { return false; },\n        _y[constants_1.Face.F] = function (row, col, cubeSize) { return row > 0 && col > 0 && col < cubeSize - 1; },\n        _y[constants_1.Face.B] = function (row, col, cubeSize) { return row > 0 && col > 0 && col < cubeSize - 1; },\n        _y),\n    _a);\nfunction makeMasking(masking, cubeSize) {\n    var _a;\n    if (!maskingFunctions[masking]) {\n        throw new Error(\"invalid masking \" + masking);\n    }\n    var numStickers = cubeSize * cubeSize;\n    var faceValues = (_a = {},\n        _a[constants_1.Face.U] = [],\n        _a[constants_1.Face.F] = [],\n        _a[constants_1.Face.R] = [],\n        _a[constants_1.Face.D] = [],\n        _a[constants_1.Face.L] = [],\n        _a[constants_1.Face.B] = [],\n        _a);\n    var _loop_1 = function (i) {\n        var row = Math.floor(i / cubeSize);\n        var col = i % cubeSize;\n        constants_1.AllFaces.forEach(function (face) {\n            faceValues[face].push(maskingFunctions[masking][face](row, col, cubeSize));\n        });\n    };\n    for (var i = 0; i < numStickers; i++) {\n        _loop_1(i);\n    }\n    return faceValues;\n}\nexports.makeMasking = makeMasking;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Arrow = void 0;\nvar Arrow = /** @class */ (function () {\n    function Arrow(s1, s2, color, s3, scale, influence) {\n        this.scale = 10; // Var range = 0 to 20, default 10\n        this.influence = 10; // Var range = 0 to 50, default 10\n        this.s1 = s1;\n        this.s2 = s2;\n        this.color = color;\n        if (scale) {\n            this.scale = scale;\n        }\n        if (influence) {\n            this.influence = influence;\n        }\n        if (s3) {\n            this.s3 = s3;\n        }\n    }\n    return Arrow;\n}());\nexports.Arrow = Arrow;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StickerDefinition = void 0;\nvar StickerDefinition = /** @class */ (function () {\n    function StickerDefinition() {\n    }\n    return StickerDefinition;\n}());\nexports.StickerDefinition = StickerDefinition;\n","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseCase = exports.parseAlgorithm = void 0;\nvar constants_1 = require(\"./../constants\");\nvar simulation_1 = require(\"../simulation\");\nvar constants_2 = require(\"../constants\");\nvar turnRegex = /([2-9]+)?([UuFfRrDdLlBbMESxyz])(w)?(2\\'|\\'2|2|\\')?/g;\nvar Opposite = (_a = {},\n    _a[simulation_1.TurnType.Clockwise] = simulation_1.TurnType.CounterClockwise,\n    _a[simulation_1.TurnType.CounterClockwise] = simulation_1.TurnType.Clockwise,\n    _a[simulation_1.TurnType.Double] = simulation_1.TurnType.Double,\n    _a);\n/**\n * Takes in an algorithm string and parses the turns from it\n * algorithm string format should be moves separated by a single space\n * (ex. \"U R2 L' x\")\n *\n * https://www.worldcubeassociation.org/regulations/#article-12-notation\n */\nfunction parseAlgorithm(algorithm) {\n    if (!algorithm) {\n        return [];\n    }\n    var turns = [];\n    var match;\n    do {\n        match = turnRegex.exec(algorithm);\n        if (match) {\n            var rawSlices = match[1];\n            var rawFace = match[2];\n            var outerBlockIndicator = match[3];\n            var rawType = match[4] || constants_2.TurnAbbreviation.Clockwise; // Default to clockwise\n            var isLowerCaseMove = rawFace === rawFace.toLowerCase() && constants_1.cubeRotations.indexOf(rawFace) === -1;\n            if (isLowerCaseMove) {\n                rawFace = rawFace.toUpperCase();\n            }\n            var turn = {\n                move: getMove(rawFace),\n                turnType: getTurnType(rawType),\n                slices: isLowerCaseMove ? 2 : getSlices(rawSlices, outerBlockIndicator),\n            };\n            turns.push(turn);\n        }\n    } while (match);\n    return turns;\n}\nexports.parseAlgorithm = parseAlgorithm;\nfunction parseCase(algorithm) {\n    return parseAlgorithm(algorithm)\n        .map(function (turn) {\n        return {\n            turnType: Opposite[turn.turnType],\n            move: turn.move,\n            slices: turn.slices,\n        };\n    })\n        .reverse();\n}\nexports.parseCase = parseCase;\nfunction getSlices(rawSlices, outerBlockIndicator) {\n    if (outerBlockIndicator && !rawSlices) {\n        return 2;\n    }\n    else if (!outerBlockIndicator && rawSlices) {\n        throw new Error(\"Invalid move: Cannot specify num slices if outer block move indicator 'w' is not present\");\n    }\n    else if (!outerBlockIndicator && !rawSlices) {\n        return 1;\n    }\n    else {\n        return parseInt(rawSlices);\n    }\n}\nfunction getMove(rawFace) {\n    if (constants_2.possibleMoves.indexOf(rawFace) < 0) {\n        throw new Error(\"Invalid move (\" + rawFace + \"): Possible turn faces are [U R F L D B M E S x y z]\");\n    }\n    else\n        return rawFace;\n}\nfunction getTurnType(rawType) {\n    switch (rawType) {\n        case constants_2.TurnAbbreviation.Clockwise:\n            return simulation_1.TurnType.Clockwise;\n        case constants_2.TurnAbbreviation.CounterClockwise:\n            return simulation_1.TurnType.CounterClockwise;\n        case constants_2.TurnAbbreviation.Double:\n        case constants_2.TurnAbbreviation.DoubleCounter1:\n        case constants_2.TurnAbbreviation.DoubleCounter2:\n            return simulation_1.TurnType.Double;\n        default:\n            throw new Error(\"Invalid move modifier (\" + rawType + \")\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseArrow = exports.parseArrows = void 0;\nvar colors_1 = require(\"./../../colors\");\nvar constants_1 = require(\"../constants\");\nvar color_1 = require(\"./color\");\nvar stickerPattern = '([URFDLB])([0-9]+)';\nvar colorPattern = '(black|dgrey|grey|silver|white|yellow|red|orange|blue|green|purple|pink|[0-9a-fA-F]{6}|[0-9a-fA-F]{3})';\nvar arrowPattern = \"^(\" + stickerPattern + \")(\" + stickerPattern + \")(\" + stickerPattern + \")?(-s([0-9+]))?(-i([0-9+]))?(-\" + colorPattern + \")?\";\nfunction parseArrows(raw) {\n    if (typeof raw !== 'string') {\n        return [];\n    }\n    return raw\n        .split(',')\n        .map(function (part) { return parseArrow(part); })\n        .filter(function (arrow) { return !!arrow; });\n}\nexports.parseArrows = parseArrows;\nfunction parseArrow(raw) {\n    if (typeof raw !== 'string') {\n        return null;\n    }\n    var arrowRegex = new RegExp(arrowPattern);\n    var match = arrowRegex.exec(raw);\n    if (!match) {\n        return null;\n    }\n    return {\n        s1: {\n            face: constants_1.Face[match[2]],\n            n: parseInt(match[3]),\n        },\n        s2: {\n            face: constants_1.Face[match[5]],\n            n: parseInt(match[6]),\n        },\n        s3: !match[7]\n            ? undefined\n            : {\n                face: constants_1.Face[match[8]],\n                n: parseInt(match[9]),\n            },\n        color: match[15] ? color_1.parseColor(match[15]) : colors_1.ColorCode.Gray,\n        scale: match[11] ? parseInt(match[11]) : 10,\n        influence: match[13] ? parseInt(match[13]) : 10,\n    };\n}\nexports.parseArrow = parseArrow;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseColor = void 0;\nvar colors_1 = require(\"./../../colors\");\nvar constants_1 = require(\"../../constants\");\nfunction parseColor(raw) {\n    var colorcodeRegex = /^[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/;\n    // Append # for color codes\n    if (colorcodeRegex.exec(raw)) {\n        return \"#\" + raw;\n    }\n    if (constants_1.ColorAbbreviationToCode[raw]) {\n        return constants_1.ColorAbbreviationToCode[raw];\n    }\n    if (constants_1.ColorNameToCode[raw]) {\n        return constants_1.ColorNameToCode[raw];\n    }\n    // Default color\n    return colors_1.ColorCode.Gray;\n}\nexports.parseColor = parseColor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseColorScheme = void 0;\nvar color_1 = require(\"./color\");\nvar constants_1 = require(\"../../constants\");\nvar constants_2 = require(\"../constants\");\nfunction parseColorScheme(rawValue) {\n    if (rawValue.indexOf(',') > -1) {\n        return parseCommaSeparatedValues(rawValue);\n    }\n    else {\n        return parseAbbreviations(rawValue);\n    }\n}\nexports.parseColorScheme = parseColorScheme;\nfunction parseAbbreviations(rawValue) {\n    var scheme = {};\n    if (rawValue.length < constants_2.AllFaces.length) {\n        return constants_2.DefaultColorScheme;\n    }\n    constants_2.AllFaces.forEach(function (face, index) {\n        if (rawValue.length > index) {\n            scheme[face] = constants_1.ColorAbbreviationToCode[rawValue.charAt(index)];\n        }\n    });\n    return scheme;\n}\nfunction parseCommaSeparatedValues(rawValue) {\n    var scheme = {};\n    // Parse as comma separated list of colors\n    var rawColors = rawValue.split(',');\n    if (rawColors.length < constants_2.AllFaces.length) {\n        return constants_2.DefaultColorScheme;\n    }\n    constants_2.AllFaces.forEach(function (face, index) {\n        if (rawColors.length > index) {\n            var parsedColor = color_1.parseColor(rawColors[index]);\n            var colorCode = constants_1.ColorNameToCode[parsedColor] || parsedColor;\n            if (parsedColor) {\n                scheme[face] = colorCode;\n            }\n        }\n    });\n    return scheme;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseFaceletColors = void 0;\nvar color_1 = require(\"./color\");\nvar constants_1 = require(\"../../constants\");\nfunction parseFaceletColors(rawValue) {\n    var colors = [];\n    if (rawValue.indexOf(',') > -1) {\n        // Parse as comma separated colors\n        rawValue.split(',').forEach(function (value) {\n            var parsed = color_1.parseColor(value);\n            if (parsed) {\n                colors.push(parsed);\n            }\n        });\n    }\n    else {\n        // parse as abbreviations (ex 'yyyyyyyyyrrrrrrrrrbbbbbbbbb....')\n        for (var i = 0; i < rawValue.length; i++) {\n            colors.push(constants_1.ColorAbbreviationToCode[rawValue.charAt(i)]);\n        }\n    }\n    return colors;\n}\nexports.parseFaceletColors = parseFaceletColors;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseFaceletDefinitions = void 0;\nvar constants_1 = require(\"../../constants\");\nfunction parseFaceletDefinitions(rawValue) {\n    var colors = [];\n    for (var i = 0; i < rawValue.length; i++) {\n        colors.push(constants_1.FaceletAbbreviateToDefinition[rawValue.charAt(i)]);\n    }\n    return colors;\n}\nexports.parseFaceletDefinitions = parseFaceletDefinitions;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseOptions = void 0;\nvar rotation_1 = require(\"./rotation\");\nvar faceletColors_1 = require(\"./faceletColors\");\nvar colorScheme_1 = require(\"./colorScheme\");\nvar faceletDefinitions_1 = require(\"./faceletDefinitions\");\n/**\n * Utility methods for parsing the old query param style options\n */\nfunction parseOptions(rawOptions) {\n    var options = {};\n    var params = parseQuery(rawOptions);\n    Object.keys(params).forEach(function (key) {\n        var paramValue = params[key];\n        switch (key) {\n            case 'pzl':\n                options.cubeSize = parseInt(paramValue) || 3;\n                break;\n            case 'size':\n                var size = parseInt(paramValue) || 250;\n                options.width = size;\n                options.height = size;\n                break;\n            case 'view':\n                options.view = paramValue;\n                break;\n            case 'stage':\n                options.mask = paramValue;\n                break;\n            case 'r':\n                options.viewportRotations = rotation_1.parseRotationSequence(paramValue);\n                break;\n            case 'alg':\n                options.algorithm = paramValue;\n                break;\n            case 'case':\n                options.case = paramValue;\n                break;\n            case 'fc':\n                options.stickerColors = faceletColors_1.parseFaceletColors(paramValue);\n                break;\n            case 'sch':\n                options.colorScheme = colorScheme_1.parseColorScheme(paramValue);\n                break;\n            case 'bg':\n                options.backgroundColor = paramValue;\n                break;\n            case 'cc':\n                options.cubeColor = paramValue;\n                break;\n            case 'co':\n                options.cubeOpacity = parseInt(paramValue) || 100;\n                break;\n            case 'fo':\n                options.stickerOpacity = parseInt(paramValue) || 100;\n                break;\n            case 'dist':\n                options.dist = parseInt(paramValue) || 5;\n                break;\n            case 'arw':\n                options.arrows = paramValue;\n                break;\n            case 'fd':\n                options.facelets = faceletDefinitions_1.parseFaceletDefinitions(paramValue);\n                break;\n            case 'ac':\n                // TODO: Support default arrow color\n                console.warn(\"Currently param 'ac' is unsupported\");\n                break;\n        }\n    });\n    return options;\n}\nexports.parseOptions = parseOptions;\nfunction parseQuery(url) {\n    var queryString = url.indexOf('?') > -1 ? url.substr(url.indexOf('?') + 1) : url;\n    var query = {};\n    var pairs = queryString.split('&');\n    for (var i = 0; i < pairs.length; i++) {\n        var pair = pairs[i].split('=');\n        query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\n    }\n    return query;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseRotationSequence = void 0;\nvar constants_1 = require(\"../constants\");\nfunction parseRotationSequence(rawSequence) {\n    var rotationRegex = /([xyz]-?[0-9][0-9]?[0-9]?)/g;\n    var match;\n    var rotations = [];\n    do {\n        match = rotationRegex.exec(rawSequence);\n        if (match) {\n            var matchText = match[0];\n            var axisSymbol = matchText.charAt(0);\n            var value = matchText.substr(1);\n            var axis = constants_1.AxisSymbolToAxis[axisSymbol];\n            rotations.push([axis, parseInt(value)]);\n        }\n    } while (match);\n    return rotations;\n}\nexports.parseRotationSequence = parseRotationSequence;\n","\"use strict\";\nvar _a, _b, _c, _d, _e, _f;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CubeData = exports.TurnType = void 0;\nvar math_1 = require(\"./../math\");\nvar constants_1 = require(\"./constants\");\nvar TurnType;\n(function (TurnType) {\n    TurnType[TurnType[\"Clockwise\"] = 0] = \"Clockwise\";\n    TurnType[TurnType[\"CounterClockwise\"] = 1] = \"CounterClockwise\";\n    TurnType[TurnType[\"Double\"] = 2] = \"Double\";\n})(TurnType = exports.TurnType || (exports.TurnType = {}));\nvar faceIdentity = function (stickerNumber, cubeSize) { return stickerNumber; };\nvar counterClockwiseSticker = function (stickerNumber, cubeSize) {\n    return (stickerNumber * cubeSize) % (cubeSize * cubeSize + 1);\n};\nvar clockwiseSticker = function (stickerNumber, cubeSize) {\n    var numStickers = cubeSize * cubeSize;\n    return numStickers + 1 - counterClockwiseSticker(stickerNumber, cubeSize);\n};\nvar doubleTurn = function (stickerNumber, cubeSize) {\n    return cubeSize * cubeSize - stickerNumber + 1;\n};\nvar OppositeTurn = (_a = {},\n    _a[TurnType.Clockwise] = TurnType.CounterClockwise,\n    _a[TurnType.CounterClockwise] = TurnType.Clockwise,\n    _a[TurnType.Double] = TurnType.Double,\n    _a);\n// Faces that wrap around a given axis\nvar AxisMapping = (_b = {},\n    _b[math_1.Axis.X] = [constants_1.Face.U, constants_1.Face.B, constants_1.Face.F, constants_1.Face.D],\n    _b[math_1.Axis.Y] = [constants_1.Face.L, constants_1.Face.B, constants_1.Face.R, constants_1.Face.F],\n    _b[math_1.Axis.Z] = [constants_1.Face.L, constants_1.Face.U, constants_1.Face.R, constants_1.Face.D],\n    _b);\n// Face's orientation related to other faces on a given axis\nvar AxisOrientation = (_c = {},\n    _c[math_1.Axis.X] = (_d = {},\n        _d[constants_1.Face.U] = faceIdentity,\n        _d[constants_1.Face.B] = doubleTurn,\n        _d[constants_1.Face.F] = faceIdentity,\n        _d[constants_1.Face.D] = faceIdentity,\n        _d[constants_1.Face.L] = null,\n        _d[constants_1.Face.R] = null,\n        _d),\n    _c[math_1.Axis.Y] = (_e = {},\n        _e[constants_1.Face.U] = null,\n        _e[constants_1.Face.B] = counterClockwiseSticker,\n        _e[constants_1.Face.F] = counterClockwiseSticker,\n        _e[constants_1.Face.D] = null,\n        _e[constants_1.Face.L] = counterClockwiseSticker,\n        _e[constants_1.Face.R] = counterClockwiseSticker,\n        _e),\n    _c[math_1.Axis.Z] = (_f = {},\n        _f[constants_1.Face.U] = counterClockwiseSticker,\n        _f[constants_1.Face.B] = null,\n        _f[constants_1.Face.F] = null,\n        _f[constants_1.Face.D] = clockwiseSticker,\n        _f[constants_1.Face.L] = faceIdentity,\n        _f[constants_1.Face.R] = doubleTurn,\n        _f),\n    _c);\nvar CubeData = /** @class */ (function () {\n    function CubeData(cubeSize, initialValues) {\n        this.cubeSize = cubeSize;\n        /**\n         *  Data to store face value\n         *  data saved in flat array [1, 2, 3, 4, 5, 6, 7, 8, 9]\n         *  maps to cube stickers like this\n         *\n         *  U Face\n         *  1 | 2 | 3\n         *  ----------\n         *  4 | 5 | 6\n         *  ----------\n         *  7 | 8 | 9\n         *\n         *  Stickers are numbered in that manner starting with the U face\n         *  continuing with this order U, R, F, D, L, B\n         *\n         *  Because each face has a differen't orientation it may not be clear\n         *  how the back faces are numbered. Below is an example 3x3 mapping\n         *\n         *  Example numbers of 3x3 cube. nxn cubes follow the same pattern\n         *\n         *        B\n         *      L U R\n         *        F\n         *        D\n         *                  | 54  | 53  | 52  |\n         *                   -----------------\n         *                  | 51  | 50  | 49  |\n         *                   -----------------\n         *                  | 48  | 47  | 46  |\n         * -----------------                   -----------------\n         *  43  | 40  | 37     1  |  2  |  3    12  | 15  | 18\n         * ----------------- ----------------- -----------------\n         *  44  | 41  | 38     4  |  5  |  6    11  | 14  | 17\n         * ----------------- ----------------- -----------------\n         *  45  | 42  | 39     7  |  8  |  9    10  | 13  | 16\n         * -----------------                   -----------------\n         *                  | 19  | 20  | 21  |\n         *                   -----------------\n         *                  | 22  | 23  | 24  |\n         *                   -----------------\n         *                  | 25  | 26  | 27  |\n         *\n         *                  | 28  | 29  | 30  |\n         *                   -----------------\n         *                  | 31  | 32  | 33  |\n         *                   -----------------\n         *                  | 34  | 35  | 36  |\n         */\n        this.faces = {};\n        this.numStickers = this.cubeSize * this.cubeSize;\n        this.clockwiseMapping = [];\n        this.counterClockwiseMapping = [];\n        this.doubleMapping = [];\n        this.faces = initialValues;\n        if (!this.faces) {\n            this.initValues();\n        }\n        for (var i = 1; i <= this.numStickers; i++) {\n            this.clockwiseMapping.push(clockwiseSticker(i, cubeSize));\n            this.counterClockwiseMapping.push(counterClockwiseSticker(i, cubeSize));\n            this.doubleMapping.push(doubleTurn(i, cubeSize));\n        }\n    }\n    CubeData.prototype.initValues = function () {\n        var _this = this;\n        var currentValue = 1;\n        constants_1.AllFaces.forEach(function (face) {\n            _this.faces[face] = [];\n            for (var i = 0; i < _this.numStickers; i++) {\n                _this.faces[face].push(currentValue++);\n            }\n        });\n    };\n    /**\n     * Rotates values on an outer face of the rubiks cubes\n     */\n    CubeData.prototype.rotateFace = function (face, turn) {\n        var _this = this;\n        // TODO more efficient rotation to not construct so many new arrays\n        switch (turn) {\n            case TurnType.Clockwise:\n                this.faces[face] = this.clockwiseMapping.map(function (newStickerNumber) { return _this.faces[face][newStickerNumber - 1]; });\n                break;\n            case TurnType.CounterClockwise:\n                this.faces[face] = this.counterClockwiseMapping.map(function (newStickerNumber) { return _this.faces[face][newStickerNumber - 1]; });\n                break;\n            case TurnType.Double:\n                this.faces[face].reverse();\n                break;\n        }\n    };\n    /**\n     * Rotates layer values around a given axis\n     */\n    CubeData.prototype.axisRotation = function (offset, range, axis, faceOrder, forward, double) {\n        var _this = this;\n        if (forward === void 0) { forward = true; }\n        if (double === void 0) { double = false; }\n        if (!forward) {\n            faceOrder.reverse();\n        }\n        // Copy original values to avoid clobbering values when modifying stickers\n        var originalValues = faceOrder.map(function (face) { return _this.faces[face].slice(); });\n        // Copy values\n        for (var i = 0; i < this.cubeSize; i++) {\n            for (var r = 0; r < range; r++) {\n                var stickerIndex = this.cubeSize * i + (offset + r);\n                for (var j = 0; j < faceOrder.length; j++) {\n                    var face = faceOrder[j];\n                    var nextFace = double ? faceOrder[(j + 2) % faceOrder.length] : faceOrder[(j + 1) % faceOrder.length];\n                    var valueIndex = AxisOrientation[axis][face](stickerIndex + 1, this.cubeSize) - 1;\n                    var nextFaceValueIndex = AxisOrientation[axis][nextFace](stickerIndex + 1, this.cubeSize) - 1;\n                    this.faces[face][valueIndex] =\n                        originalValues[(double ? j + 2 : j + 1) % originalValues.length][nextFaceValueIndex];\n                }\n            }\n        }\n    };\n    /**\n     * Rotate layers around the x axis of the cube\n     */\n    CubeData.prototype.xLayersRotation = function (offset, forward, double, range) {\n        if (forward === void 0) { forward = true; }\n        if (double === void 0) { double = false; }\n        if (range === void 0) { range = 1; }\n        var faceOrder = [constants_1.Face.U, constants_1.Face.F, constants_1.Face.D, constants_1.Face.B];\n        this.axisRotation(offset, range, math_1.Axis.X, faceOrder, forward, double);\n    };\n    /**\n     * Rotate layers around the y axis of the cube\n     */\n    CubeData.prototype.yLayersRotation = function (offset, forward, double, range) {\n        if (forward === void 0) { forward = true; }\n        if (double === void 0) { double = false; }\n        if (range === void 0) { range = 1; }\n        var faceOrder = [constants_1.Face.L, constants_1.Face.F, constants_1.Face.R, constants_1.Face.B];\n        this.axisRotation(offset, range, math_1.Axis.Y, faceOrder, forward, double);\n    };\n    /**\n     * Rotate layers around the z axis of the cube\n     */\n    CubeData.prototype.zLayersRotation = function (offset, forward, double, range) {\n        if (forward === void 0) { forward = true; }\n        if (double === void 0) { double = false; }\n        if (range === void 0) { range = 1; }\n        var faceOrder = [constants_1.Face.U, constants_1.Face.L, constants_1.Face.D, constants_1.Face.R];\n        this.axisRotation(offset, range, math_1.Axis.Z, faceOrder, forward, double);\n    };\n    /**\n     * Restricts the number of slices used in outer block moves to the cube size\n     */\n    CubeData.prototype.safeSlices = function (n) {\n        return n > this.cubeSize ? this.cubeSize : n;\n    };\n    CubeData.prototype.rTurn = function (turnType, slices) {\n        if (slices === void 0) { slices = 1; }\n        this.rotateFace(constants_1.Face.R, turnType);\n        var offset = this.cubeSize - slices;\n        this.xLayersRotation(offset, turnType === TurnType.Clockwise, turnType === TurnType.Double, slices);\n    };\n    CubeData.prototype.lTurn = function (turnType, slices) {\n        if (slices === void 0) { slices = 1; }\n        this.rotateFace(constants_1.Face.L, turnType);\n        this.xLayersRotation(0, turnType === TurnType.CounterClockwise, turnType === TurnType.Double, slices);\n    };\n    CubeData.prototype.uTurn = function (turnType, slices) {\n        if (slices === void 0) { slices = 1; }\n        this.rotateFace(constants_1.Face.U, turnType);\n        this.yLayersRotation(0, turnType === TurnType.Clockwise, turnType === TurnType.Double, slices);\n    };\n    CubeData.prototype.dTurn = function (turnType, slices) {\n        if (slices === void 0) { slices = 1; }\n        this.rotateFace(constants_1.Face.D, turnType);\n        var offset = this.cubeSize - slices;\n        this.yLayersRotation(offset, turnType === TurnType.CounterClockwise, turnType === TurnType.Double, slices);\n    };\n    CubeData.prototype.fTurn = function (turnType, slices) {\n        if (slices === void 0) { slices = 1; }\n        this.rotateFace(constants_1.Face.F, turnType);\n        var offset = this.cubeSize - slices;\n        this.zLayersRotation(offset, turnType === TurnType.Clockwise, turnType === TurnType.Double, slices);\n    };\n    CubeData.prototype.bTurn = function (turnType, slices) {\n        if (slices === void 0) { slices = 1; }\n        this.rotateFace(constants_1.Face.B, turnType);\n        this.zLayersRotation(0, turnType === TurnType.CounterClockwise, turnType === TurnType.Double, slices);\n    };\n    CubeData.prototype.mTurn = function (turnType) {\n        if (this.cubeSize < 2)\n            return;\n        this.xLayersRotation(1, turnType === TurnType.CounterClockwise, turnType === TurnType.Double, this.cubeSize - 2);\n    };\n    CubeData.prototype.eTurn = function (turnType) {\n        if (this.cubeSize < 2)\n            return;\n        this.yLayersRotation(1, turnType === TurnType.CounterClockwise, turnType === TurnType.Double, this.cubeSize - 2);\n    };\n    CubeData.prototype.sTurn = function (turnType) {\n        if (this.cubeSize < 2)\n            return;\n        this.zLayersRotation(1, turnType === TurnType.Clockwise, turnType === TurnType.Double, this.cubeSize - 2);\n    };\n    CubeData.prototype.xTurn = function (turnType) {\n        this.rotateFace(constants_1.Face.R, turnType);\n        this.rotateFace(constants_1.Face.L, OppositeTurn[turnType]);\n        this.xLayersRotation(0, turnType === TurnType.Clockwise, turnType === TurnType.Double, this.cubeSize);\n    };\n    CubeData.prototype.yTurn = function (turnType) {\n        this.rotateFace(constants_1.Face.U, turnType);\n        this.rotateFace(constants_1.Face.D, OppositeTurn[turnType]);\n        this.yLayersRotation(0, turnType === TurnType.Clockwise, turnType === TurnType.Double, this.cubeSize);\n    };\n    CubeData.prototype.zTurn = function (turnType) {\n        this.rotateFace(constants_1.Face.F, turnType);\n        this.rotateFace(constants_1.Face.B, OppositeTurn[turnType]);\n        this.zLayersRotation(0, turnType === TurnType.Clockwise, turnType === TurnType.Double, this.cubeSize);\n    };\n    CubeData.prototype.turn = function (turn) {\n        var slices = this.safeSlices(turn.slices);\n        switch (turn.move) {\n            case constants_1.AlgorithmUnit.F:\n                this.fTurn(turn.turnType, slices);\n                break;\n            case constants_1.AlgorithmUnit.B:\n                this.bTurn(turn.turnType, slices);\n                break;\n            case constants_1.AlgorithmUnit.U:\n                this.uTurn(turn.turnType, slices);\n                break;\n            case constants_1.AlgorithmUnit.D:\n                this.dTurn(turn.turnType, slices);\n                break;\n            case constants_1.AlgorithmUnit.R:\n                this.rTurn(turn.turnType, slices);\n                break;\n            case constants_1.AlgorithmUnit.L:\n                this.lTurn(turn.turnType, slices);\n                break;\n            case constants_1.AlgorithmUnit.M:\n                this.mTurn(turn.turnType);\n                break;\n            case constants_1.AlgorithmUnit.E:\n                this.eTurn(turn.turnType);\n                break;\n            case constants_1.AlgorithmUnit.S:\n                this.sTurn(turn.turnType);\n                break;\n            case constants_1.AlgorithmUnit.X:\n                this.xTurn(turn.turnType);\n                break;\n            case constants_1.AlgorithmUnit.Y:\n                this.yTurn(turn.turnType);\n                break;\n            case constants_1.AlgorithmUnit.Z:\n                this.zTurn(turn.turnType);\n                break;\n            default:\n                throw new Error(\"Unrecognized move in turn \" + JSON.stringify(turn));\n        }\n    };\n    return CubeData;\n}());\nexports.CubeData = CubeData;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.makeStickerColors = void 0;\nvar colors_1 = require(\"./../colors\");\nvar masking_1 = require(\"./masking\");\nvar simulation_1 = require(\"./simulation\");\nvar algorithm_1 = require(\"./parsing/algorithm\");\nvar constants_1 = require(\"./constants\");\nfunction makeStickerColors(options) {\n    var stickerColors = options.stickerColors;\n    var mask = options.mask ? masking_1.makeMasking(options.mask, options.cubeSize) : null;\n    var maskColor = typeof options.maskColor == 'string' ? options.maskColor : colors_1.ColorCode.DarkGray;\n    if (mask && options.maskAlg) {\n        var maskCubeData_1 = new simulation_1.CubeData(options.cubeSize, mask);\n        var alg_1 = algorithm_1.parseAlgorithm(options.maskAlg);\n        alg_1.forEach(function (turn) {\n            maskCubeData_1.turn(turn);\n        });\n        mask = maskCubeData_1.faces;\n    }\n    // Fill with color scheme if sticker colors not predefined.\n    if (!stickerColors) {\n        stickerColors = [].concat.apply([], constants_1.AllFaces.map(function (face) {\n            return Array.apply(null, Array(options.cubeSize * options.cubeSize)).map(function () { return options.colorScheme[face]; });\n        }));\n    }\n    var faceMappedStickers = constants_1.AllFaces.reduce(function (acc, face) {\n        if (!acc[face])\n            acc[face] = [];\n        for (var i = 0; i < options.cubeSize; i++) {\n            for (var j = 0; j < options.cubeSize; j++) {\n                var faceIndex = constants_1.AllFaces.indexOf(face);\n                var stickerNumber = i * options.cubeSize + j;\n                var colorIndex = faceIndex * (options.cubeSize * options.cubeSize) + stickerNumber;\n                if (stickerColors.length <= colorIndex) {\n                    acc[face][options.cubeSize * i + j] = colors_1.ColorName.Black;\n                }\n                else {\n                    acc[face][options.cubeSize * i + j] = stickerColors[colorIndex];\n                }\n                if (mask && !mask[face][options.cubeSize * i + j]) {\n                    acc[face][options.cubeSize * i + j] = maskColor;\n                }\n            }\n        }\n        return acc;\n    }, {});\n    // Apply Algorithm\n    var cubeData = new simulation_1.CubeData(options.cubeSize, faceMappedStickers);\n    var alg = [];\n    if (options.case) {\n        alg = algorithm_1.parseCase(options.case);\n    }\n    else if (options.algorithm) {\n        alg = algorithm_1.parseAlgorithm(options.algorithm);\n    }\n    alg.forEach(function (move) {\n        cubeData.turn(move);\n    });\n    return [].concat.apply([], constants_1.AllFaces.map(function (face) { return cubeData.faces[face].slice(); }));\n}\nexports.makeStickerColors = makeStickerColors;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cubePNG = exports.cubeSVG = exports.Arrow = exports.StickerDefinition = exports.Axis = exports.Face = exports.Masking = void 0;\nvar colors_1 = require(\"./colors\");\nvar geometry_1 = require(\"./cube/geometry\");\nvar math_1 = require(\"./math\");\nvar drawing_1 = require(\"./cube/drawing\");\nvar constants_1 = require(\"./cube/constants\");\nvar stickers_1 = require(\"./cube/stickers\");\nvar options_1 = require(\"./cube/parsing/options\");\nvar faceletDefinitions_1 = require(\"./cube/parsing/faceletDefinitions\");\nvar constants_2 = require(\"./cube/constants\");\nObject.defineProperty(exports, \"Masking\", { enumerable: true, get: function () { return constants_2.Masking; } });\nObject.defineProperty(exports, \"Face\", { enumerable: true, get: function () { return constants_2.Face; } });\nvar math_2 = require(\"./math\");\nObject.defineProperty(exports, \"Axis\", { enumerable: true, get: function () { return math_2.Axis; } });\nvar sticker_1 = require(\"./cube/models/sticker\");\nObject.defineProperty(exports, \"StickerDefinition\", { enumerable: true, get: function () { return sticker_1.StickerDefinition; } });\nvar arrow_1 = require(\"./cube/models/arrow\");\nObject.defineProperty(exports, \"Arrow\", { enumerable: true, get: function () { return arrow_1.Arrow; } });\nvar defaultOptions = {\n    cubeSize: 3,\n    width: 128,\n    height: 128,\n    viewportRotations: [[math_1.Axis.Y, 45], [math_1.Axis.X, -34]],\n    colorScheme: constants_1.DefaultColorScheme,\n    cubeColor: colors_1.ColorName.Black,\n    cubeOpacity: 100,\n    stickerOpacity: 100,\n    dist: 5,\n    outlineWidth: 0.94,\n    strokeWidth: 0,\n    viewbox: {\n        x: -0.9,\n        y: -0.9,\n        width: 1.8,\n        height: 1.8,\n    },\n};\nfunction cubeSVG(container, extraOptions) {\n    if (extraOptions === void 0) {\n        extraOptions = {};\n    }\n    var options = getOptions(defaultOptions, extraOptions);\n    var geomety = geometry_1.makeCubeGeometry(options);\n    options.stickerColors = stickers_1.makeStickerColors(options);\n    drawing_1.renderCube(container, geomety, options);\n}\nexports.cubeSVG = cubeSVG;\nfunction cubePNG(container, extraOptions) {\n    if (extraOptions === void 0) {\n        extraOptions = {};\n    }\n    var element = document.createElement('div');\n    var options = getOptions(defaultOptions, extraOptions);\n    cubeSVG(element, options);\n    setTimeout(function () {\n        var svgElement = element.querySelector('svg');\n        var targetImage = document.createElement('img'); // Where to draw the result\n        container.appendChild(targetImage);\n        var can = document.createElement('canvas'); // Not shown on page\n        var ctx = can.getContext('2d');\n        var loader = new Image(); // Not shown on page\n        loader.width = can.width = targetImage.width = options.width || 128;\n        loader.height = can.height = targetImage.height = options.height || 128;\n        loader.onload = function () {\n            ctx.drawImage(loader, 0, 0, loader.width, loader.height);\n            targetImage.src = can.toDataURL();\n        };\n        var svgAsXML = new XMLSerializer().serializeToString(svgElement);\n        loader.src = 'data:image/svg+xml,' + encodeURIComponent(svgAsXML);\n    });\n}\nexports.cubePNG = cubePNG;\nfunction getOptions(defaultOptions, extraOptions) {\n    var parsedOptions;\n    if (typeof extraOptions === 'string') {\n        parsedOptions = options_1.parseOptions(extraOptions);\n    }\n    else {\n        parsedOptions = extraOptions;\n    }\n    if (typeof parsedOptions.facelets === 'string') {\n        parsedOptions.facelets = faceletDefinitions_1.parseFaceletDefinitions(parsedOptions.facelets);\n    }\n    return __assign(__assign({}, defaultOptions), parsedOptions);\n}\n","\"use strict\";\n/**\n * Methods for manipulating points in 3d space (Vec3)\n */\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.radians2Degrees = exports.project = exports.rotate = exports.transScale = exports.scale = exports.translate = exports.makeMatrix = exports.Axis = void 0;\nvar Axis;\n(function (Axis) {\n    Axis[Axis[\"X\"] = 0] = \"X\";\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\n    Axis[Axis[\"Z\"] = 2] = \"Z\";\n})(Axis = exports.Axis || (exports.Axis = {}));\nfunction makeMatrix(rows, cols) {\n    var matrix = [];\n    for (var r = 0; r < rows; r++) {\n        matrix[r] = [];\n        for (var c = 0; c < cols; c++) {\n            matrix[r][c] = null;\n        }\n    }\n    return matrix;\n}\nexports.makeMatrix = makeMatrix;\nfunction translate(pos, v) {\n    return pos.map(function (value, index) { return value + v[index]; });\n}\nexports.translate = translate;\nfunction scale(pos, scalar) {\n    return pos.map(function (v) { return v * scalar; });\n}\nexports.scale = scale;\n// Scale a point relative to position vector\nfunction transScale(pos, v, scalar) {\n    // Translate each facelet to cf\n    var iv = v.map(function (x) { return -x; });\n    return translate(scale(translate(pos, iv), scalar), v);\n}\nexports.transScale = transScale;\nfunction rotate(pos, axis, radians) {\n    var newPosition = __spreadArray([], pos);\n    switch (axis) {\n        case Axis.X:\n            newPosition[2] = pos[2] * Math.cos(radians) - pos[1] * Math.sin(radians);\n            newPosition[1] = pos[2] * Math.sin(radians) + pos[1] * Math.cos(radians);\n            break;\n        case Axis.Y:\n            newPosition[0] = pos[0] * Math.cos(radians) + pos[2] * Math.sin(radians);\n            newPosition[2] = -pos[0] * Math.sin(radians) + pos[2] * Math.cos(radians);\n            break;\n        case Axis.Z:\n            newPosition[0] = pos[0] * Math.cos(radians) - pos[1] * Math.sin(radians);\n            newPosition[1] = pos[0] * Math.sin(radians) + pos[1] * Math.cos(radians);\n            break;\n    }\n    return newPosition;\n}\nexports.rotate = rotate;\nfunction project(pos, d) {\n    return [\n        (pos[0] * d) / pos[2],\n        (pos[1] * d) / pos[2],\n        pos[2], // Maintain z coordinate to allow use of rendering tricks\n    ];\n}\nexports.project = project;\nfunction radians2Degrees(radians) {\n    return (radians * 180) / Math.PI;\n}\nexports.radians2Degrees = radians2Degrees;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(607);\n"],"names":["root","factory","exports","module","define","amd","this","window","document","SVG","element","supported","Doc","parser","draw","prepare","ns","xmlns","xlink","svgjs","createElementNS","createSVGRect","did","eid","name","capitalize","create","setAttribute","extend","modules","methods","key","i","slice","call","arguments","pop","length","prototype","Set","inherit","invent","config","initializer","constructor","construct","parent","Container","adopt","node","instance","nodeName","parentNode","SVGElement","Nested","Gradient","Element","type","namespace","defs","setData","JSON","parse","getAttribute","body","getElementsByTagName","documentElement","nested","size","style","attr","poly","polyline","path","native","addEventListener","regex","numberAndUnit","hex","rgb","reference","transforms","whitespace","isHex","isRgb","isCss","isBlank","isNumber","isPercent","isImage","delimiter","hyphen","pathLetters","isPathLetter","numbersWithDots","dots","utils","map","array","block","il","result","push","filter","radians","d","Math","PI","degrees","r","filterSVGElements","nodes","el","defaults","attrs","fill","stroke","opacity","x","y","cx","cy","width","height","rx","ry","offset","Color","color","match","g","b","test","exec","replace","parseInt","fullHex","toString","toHex","compToHex","toRgb","join","brightness","morph","destination","at","pos","isColor","Array","fallback","valueOf","value","lastValue","lastDestination","settle","seen","indexOf","isArray","split","string","trim","parseFloat","reverse","clone","array_clone","PointArray","toLine","x1","y1","x2","y2","points","len","move","box","bbox","isNaN","getBBox","pathHandlers","M","c","p","p0","L","H","V","C","S","Q","T","Z","A","mlhvqtcsa","j","jl","toUpperCase","PathArray","arrayToString","l","equalCommands","pathArray","sourceArray","destinationArray","s","paramCnt","pathRegReplace","reduce","prev","curr","concat","arr","Point","index","Number","unit","isFinite","toJSON","plus","number","minus","times","divide","to","relative","_stroke","_event","_events","dom","center","proportionalSize","writeDataToDom","assignNewId","cloneNode","add","after","remove","removeElement","addTo","put","putIn","id","inside","show","hide","visible","classes","hasClass","addClass","removeClass","toggleClass","get","matches","doc","parents","selector","svg","well","createElement","Parent","appendChild","innerHTML","firstChild","childNodes","each","lines","removeAttribute","Object","keys","stringify","o","is","obj","easing","cos","sin","from","MorphObj","Situation","init","reversed","reversing","duration","delay","start","Date","finish","ease","loop","loops","animations","styles","once","FX","_target","situations","active","situation","paused","lastPos","absPos","_speed","animate","queue","target","timeToAbsPos","timestamp","absPosToTime","startAnimFrame","stopAnimFrame","animationFrame","requestAnimationFrame","step","bind","cancelAnimationFrame","startCurrent","initAnimations","fn","shift","dequeue","stop","source","initialTransformation","matrixify","clearQueue","clearCurrent","jumpToEnd","atEnd","reset","temp","atStart","isAbsPos","durDivSpd","speed","pause","last","play","progress","easeIt","wrapper","e","detail","off","on","_callStart","during","eased","afterAll","duringAll","method","args","ignoreTime","absPosInt","lastLoop","max","floor","Boolean","min","fire","fx","eachAt","self","apply","a","Matrix","multiply","undo","extract","matrix","isEased","setTimeout","real","v","G","transform","num","Text","plot","leading","viewbox","ViewBox","update","Stop","Box","left","top","fullBox","merge","m","xMin","Infinity","xMax","yMin","yMax","forEach","BBox","contains","Exception","topParent","Shape","clientLeft","clientTop","clientWidth","clientHeight","tbox","console","warn","rbox","RBox","getBoundingClientRect","addOffset","pageXOffset","pageYOffset","screenCTM","inverse","base","arrayToMatrix","abcdef","px","deltaTransformPoint","py","skewX","atan2","f","transformedX","sqrt","transformedY","skewY","scaleX","scaleY","rotation","parseMatrix","translate","scale","around","rotate","flip","skew","tan","createSVGMatrix","float32String","ctm","getCTM","rect","getScreenCTM","point","createSVGPoint","matrixTransform","n","attributes","nodeValue","image","Image","pattern","setAttributeNS","rebuild","ensureCentre","Rotate","Scale","Skew","Translate","untransform","str","kv","toParent","pCtm","toDoc","Transformation","inversed","params","_undo","cssText","camelCase","children","insertBefore","has","first","deep","removeChild","clear","hasChildNodes","lastChild","_defs","ungroup","depth","Defs","flatten","view","we","he","wm","hm","reg","offsetWidth","offsetHeight","zoom","event","listenerId","events","listener","binding","options","bag","_svgjsListenerId","ev","removeEventListener","data","Event","dispatchEvent","CustomEvent","cancelable","gbox","trans","group","getElementById","version","spof","nextSibling","siblings","position","next","previous","forward","backward","front","back","before","Mask","targets","unmask","mask","maskWith","masker","ClipPath","unclip","clip","clipWith","clipper","gradient","fy","Pattern","patternUnits","Bare","words","text","createTextNode","Symbol","symbol","Use","file","use","Rect","Circle","circle","Ellipse","ellipse","Line","line","Polyline","Polygon","polygon","_array","morphArray","Path","load","url","img","_loaded","ratio","_error","src","loaded","error","_rebuild","_build","oy","nodeType","newLined","textContent","build","tspan","newLine","textPath","blankLineOffset","dy","plain","Tspan","dx","t","getComputedTextLength","TextPath","track","link","linkTo","Marker","ref","marker","sugar","prefix","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","toLowerCase","charAt","substring","comp","w","h","idFromReference","abs","extension","dmove","radius","getTotalLength","pointAt","getPointAtLength","font","members","elements","splice","set","remember","k","memory","forget","_memory","select","query","querySelectorAll","CustomEventPoly","bubbles","undefined","createEvent","initCustomEvent","lastTime","vendors","callback","currTime","getTime","timeToCall","clearTimeout","defineProperty","ColorAbbreviation","ColorName","ColorCode","_a","_b","_c","_d","FaceletToColor","FaceletToFace","FaceletAbbreviateToDefinition","ColorAbbreviationToCode","ColorNameToCode","FaceletDefinition","colors_1","constants_1","Black","DarkGray","Gray","Silver","White","Yellow","Red","Orange","Blue","Green","Purple","Pink","Transparent","u","Up","Front","Right","Down","Left","Back","Oriented","Blank","Face","U","D","R","F","B","Masking","TurnAbbreviation","cubeRotations","possibleMoves","AxisSymbolToAxis","AlgorithmUnit","JapaneseColorScheme","DefaultColorScheme","FaceRotationVectors","AllFaces","math_1","Axis","X","Y","z","E","__spreadArray","renderArrow","renderOLLStickers","renderCube","geometry_1","constants_2","arrow_1","defaultFaceRotations","faceVisible","face","rotations","getCubeOutlineGroup","cubeOutlineGroup","cubeOpacity","renderCubeOutline","cubeSize","outlineWidth","outlinePoints","cubeColor","renderFaceStickers","stickers","stickerOpacity","strokeWidth","centerPoint","p1","transScale","p2","p3","p4","getStickerColor","renderSticker","stickerColor","stickerPoints","row","col","faceIndex","stickerNumber","colorIndex","facelets","stickerColors","fd","face_1","colorScheme","v1","v2","geometry","arrow","p1y","s1","p1x","p2y","s2","p2x","s3","p3y","p3x","influence","p_","radians2Degrees","atan","lineSvg","headSvg","container","faceRotations","rotateFaces","viewportRotations","renderOrder","sort","getRenderOrder","hiddenFaces","visibleFaces","backgroundSvg","backgroundColor","renderBackground","cubeOutlineGroup_1","ollGroup_1","getOllLayerGroup","arrowGroup","getArrowGroup","arrowDefinitions","arrows","parseArrows","makeCubeGeometry","makeFaceStickers","makeStickerPosition","Error","makeMatrix","_loop_1","sticker","centerTranslation","dist","project","acc","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","makeMasking","maskingFunctions","FL","F2L","LL","CLL","ELL","OLL","OCLL","OELL","COLL","OCELL","WV","VH","ELS","CLS","CMLL","CROSS","F2L3","F2L2","F2LSM","F2L1","F2B","LINE","masking","numStickers","faceValues","Arrow","StickerDefinition","parseCase","parseAlgorithm","simulation_1","turnRegex","Opposite","TurnType","Clockwise","CounterClockwise","Double","algorithm","turns","rawSlices","rawFace","outerBlockIndicator","rawType","isLowerCaseMove","turn","getMove","turnType","getTurnType","slices","getSlices","DoubleCounter1","DoubleCounter2","parseArrow","color_1","raw","RegExp","parseColor","part","parseColorScheme","rawValue","scheme","rawColors","parsedColor","colorCode","parseCommaSeparatedValues","parseAbbreviations","parseFaceletColors","colors","parsed","parseFaceletDefinitions","parseOptions","rotation_1","faceletColors_1","colorScheme_1","faceletDefinitions_1","rawOptions","queryString","substr","pairs","pair","decodeURIComponent","parseQuery","paramValue","parseRotationSequence","case","rawSequence","rotationRegex","matchText","axisSymbol","axis","CubeData","faceIdentity","counterClockwiseSticker","clockwiseSticker","doubleTurn","OppositeTurn","AxisOrientation","initialValues","faces","clockwiseMapping","counterClockwiseMapping","doubleMapping","initValues","_this","currentValue","rotateFace","newStickerNumber","axisRotation","range","faceOrder","double","originalValues","stickerIndex","nextFace","valueIndex","nextFaceValueIndex","xLayersRotation","yLayersRotation","zLayersRotation","safeSlices","rTurn","lTurn","uTurn","dTurn","fTurn","bTurn","mTurn","eTurn","sTurn","xTurn","yTurn","zTurn","makeStickerColors","masking_1","algorithm_1","maskColor","maskAlg","maskCubeData_1","faceMappedStickers","cubeData","alg","__assign","assign","hasOwnProperty","cubePNG","cubeSVG","drawing_1","stickers_1","options_1","enumerable","math_2","sticker_1","defaultOptions","extraOptions","getOptions","geomety","parsedOptions","svgElement","querySelector","targetImage","can","ctx","getContext","loader","onload","drawImage","toDataURL","svgAsXML","XMLSerializer","serializeToString","encodeURIComponent","scalar","rows","cols","newPosition","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}